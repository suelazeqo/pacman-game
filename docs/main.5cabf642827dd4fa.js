"use strict";(self.webpackChunkpocman_game=self.webpackChunkpocman_game||[]).push([[179],{4009:(_t,Ae,k)=>{var g=k(4650);let Q=null;function P(){return Q}const oe=new g.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function de(){return(0,g.LFG)($)}()},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function je(){return new $((0,g.LFG)(oe))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Xe)},providedIn:"root"}),n})();const le=new g.OlP("appBaseHref");let Xe=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+tt(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+tt(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+tt(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+tt(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ue(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(ye))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function _e(){return new Se((0,g.LFG)(ye))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let dn=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class oa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ns=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new oa(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),Ps(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ps(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ps(n,e){n.context.$implicit=e.item}let pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new il,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class il{constructor(){this.$implicit=null,this.ngIf=null}}function gr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Qc=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),c=-1===i.indexOf("-")?void 0:g.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),la=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Ar(n){return"server"===n}let nu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new wf((0,g.LFG)(oe),window)}),n})();class wf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ur(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pd extends class Sf extends class ue{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ee(n){Q||(Q=n)}(new pd)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hu(){return du=du||document.querySelector("base"),du?du.getAttribute("href"):null}();return null==t?null:function fu(n){Xs=Xs||document.createElement("a"),Xs.setAttribute("href",n);const e=Xs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ja(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Xs,du=null;const eo=new g.OlP("TRANSITION_ID"),ya=[{provide:g.ip1,useFactory:function ma(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[eo,oe,g.zs3],multi:!0}];let Tf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ls=new g.OlP("EventManagerPlugins");let _a=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ls),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Us{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Lg=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Qr=(()=>{class n extends Lg{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(El),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(El))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function El(n){P().remove(n)}const Il={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sr=/%COMP%/g;function mu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?mu(n,i,t):(i=i.replace(sr,n),t.push(i))}return t}function va(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let no=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ro(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Af(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case g.ifc.ShadowDom:return new jo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=mu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_a),g.LFG(Qr),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ro{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Il[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ni(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ni(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Il[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Il[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,i&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,va(r)):this.eventManager.addEventListener(e,t,va(r))}}function Ni(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Af extends ro{constructor(e,t,r,i){super(e),this.component=r;const u=mu(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function gu(n){return"_ngcontent-%COMP%".replace(sr,n)}(i+"-"+r.id),this.hostAttr=function Bo(n){return"_nghost-%COMP%".replace(sr,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class jo extends ro{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=mu(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let bl=(()=>{class n extends Us{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Pi=["alt","control","meta","shift"],Dl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ea=(()=>{class n extends Us{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Pi.forEach(I=>{const S=r.indexOf(I);S>-1&&(r.splice(S,1),c+=I+".")}),c+=u,0!=r.length||0===u.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=Dl[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pi.forEach(c=>{c!==i&&(0,wa[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const xf=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Xr(){pd.makeCurrent()},multi:!0},{provide:oe,useFactory:function _u(){return(0,g.RDi)(document),document},deps:[]}]),vu=new g.OlP(""),Zt=[{provide:g.rWj,useClass:class Uo{addToWindow(e){g.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const i=g.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Al=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Tl(){return new g.qLn},deps:[]},{provide:ls,useClass:bl,multi:!0,deps:[oe,g.R0b,g.Lbi]},{provide:ls,useClass:Ea,multi:!0,deps:[oe]},{provide:no,useClass:no,deps:[_a,Qr,g.AFp]},{provide:g.FYo,useExisting:no},{provide:Lg,useExisting:Qr},{provide:Qr,useClass:Qr,deps:[oe]},{provide:_a,useClass:_a,deps:[ls,g.R0b]},{provide:class Ro{},useClass:Tf,deps:[]},[]];let Vg=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:eo,useExisting:g.AFp},ya]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(vu,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Al,...Zt],imports:[la,g.hGG]}),n})(),Ml=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Bg(){return new Ml((0,g.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var hn=k(8996),Bs=k(7669);function ct(...n){const e=(0,Bs.yG)(n);return(0,hn.D)(n,e)}var ei=k(7579);class $n extends ei.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const bu=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fi=k(9751);const{isArray:oo}=Array,{getPrototypeOf:Ed,prototype:pi,keys:ao}=Object;function kl(n){if(1===n.length){const e=n[0];if(oo(e))return{args:e,keys:null};if(function Vn(n){return n&&"object"==typeof n&&Ed(n)===pi}(e)){const t=ao(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var js=k(4671),Nt=k(4004);const{isArray:Fl}=Array;function C(n){return(0,Nt.U)(e=>function D(n,e){return Fl(e)?n(...e):n(e)}(n,e))}function x(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var F=k(5403),K=k(9672);function X(...n){const e=(0,Bs.yG)(n),t=(0,Bs.jO)(n),{args:r,keys:i}=kl(n);if(0===r.length)return(0,hn.D)([],e);const u=new fi.y(function Ne(n,e,t=js.y){return r=>{Ze(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)Ze(e,()=>{const I=(0,hn.D)(n[y],e);let S=!1;I.subscribe((0,F.x)(r,M=>{u[y]=M,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>x(i,c):js.y));return t?u.pipe(C(t)):u}function Ze(n,e,t){n?(0,K.f)(t,n,e):e()}var ot=k(8189);function Ut(...n){return function bt(){return(0,ot.J)(1)}()((0,hn.D)(n,(0,Bs.yG)(n)))}var Et=k(8421);function Rr(n){return new fi.y(e=>{(0,Et.Xf)(n()).subscribe(e)})}var or=k(9635),$s=k(576);function Ci(n,e){const t=(0,$s.m)(n)?n:()=>n,r=i=>i.error(t());return new fi.y(e?i=>e.schedule(r,0,i):r)}var Nr=k(515),gi=k(727),Pn=k(4482);function Da(){return(0,Pn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,F.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kf extends fi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Pn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,F.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gi.w0.EMPTY)}return e}refCount(){return Da()(this)}}function yr(n,e){return(0,Pn.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,F.x)(r,y=>{i?.unsubscribe();let I=0;const S=u++;(0,Et.Xf)(n(y,S)).subscribe(i=(0,F.x)(r,M=>r.next(e?e(y,M,S,I++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function Ll(n){return n<=0?()=>Nr.E:(0,Pn.e)((e,t)=>{let r=0;e.subscribe((0,F.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Id(...n){const e=(0,Bs.yG)(n);return(0,Pn.e)((t,r)=>{(e?Ut(n,t,e):Ut(n,t)).subscribe(r)})}function ds(n,e){return(0,Pn.e)((t,r)=>{let i=0;t.subscribe((0,F.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var ar=k(5577);function Vl(n){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,F.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gg(n=Ff){return(0,Pn.e)((e,t)=>{let r=!1;e.subscribe((0,F.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ff(){return new bu}function Ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ds((i,u)=>n(i,u,r)):js.y,Ll(1),t?Vl(e):Gg(()=>new bu))}function hs(n,e){return(0,$s.m)(e)?(0,ar.z)(n,e,1):(0,ar.z)(n,1)}var mi=k(8505);function Go(n){return(0,Pn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,F.x)(t,void 0,void 0,c=>{u=(0,Et.Xf)(n(c,Go(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function I_(n,e,t,r,i){return(u,c)=>{let f=t,y=e,I=0;u.subscribe((0,F.x)(c,S=>{const M=I++;y=f?n(y,S,M):(f=!0,S),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function Ca(n,e){return(0,Pn.e)(I_(n,e,arguments.length>=2,!0))}function zg(n){return n<=0?()=>Nr.E:(0,Pn.e)((e,t)=>{let r=[];e.subscribe((0,F.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function b_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ds((i,u)=>n(i,u,r)):js.y,zg(1),t?Vl(e):Gg(()=>new bu))}function bd(n){return(0,Pn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",Dd=Symbol("RouteTitle");class Fw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Du(n){return new Fw(n)}function qg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Vf(n[i],e[i]))return!1;return!0}function Vf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Uf(n){return Array.prototype.concat.apply([],n)}function ps(n){return n.length>0?n[n.length-1]:null}function jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Hs(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,hn.D)(Promise.resolve(n)):ct(n)}const D_={exact:function Md(n,e,t){if(!Sa(n.segments,e.segments)||!Cu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Md(n.children[r],e.children[r],t))return!1;return!0},subset:_r},Ad={exact:function C_(n,e){return fs(n,e)},subset:function Zg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Vf(n[t],e[t]))},ignored:()=>!0};function Kg(n,e,t){return D_[t.paths](n.root,e.root,t.matrixParams)&&Ad[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function _r(n,e,t){return Ul(n,e,e.segments,t)}function Ul(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Sa(i,t)||e.hasChildren()||!Cu(i,t,r))}if(n.segments.length===t.length){if(!Sa(n.segments,t)||!Cu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!_r(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Sa(n.segments,i)&&Cu(n.segments,i,r)&&n.children[Xt])&&Ul(n.children[Xt],e,u,r)}}function Cu(n,e,t){return e.every((r,i)=>Ad[t](n[i].parameters,r.parameters))}class uo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Du(this.queryParams)),this._queryParamMap}toString(){return zo.serialize(this)}}class Tt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,jr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xd(this)}}class lo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Du(this.parameters)),this._parameterMap}toString(){return Xg(this)}}function Sa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Bf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Jg},providedIn:"root"}),n})();class Jg{parse(e){const t=new Gl(e);return new uo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Su(e.root,!0)}`,r=function jf(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Nd(t)}=${Nd(i)}`).join("&"):`${Nd(t)}=${Nd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Bl(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zo=new Jg;function xd(n){return n.segments.map(e=>Xg(e)).join("/")}function Su(n,e){if(!n.hasChildren())return xd(n);if(e){const t=n.children[Xt]?Su(n.children[Xt],!1):"",r=[];return jr(n.children,(i,u)=>{u!==Xt&&r.push(`${u}:${Su(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Qg(n,e){let t=[];return jr(n.children,(r,i)=>{i===Xt&&(t=t.concat(e(r,i)))}),jr(n.children,(r,i)=>{i!==Xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Xt?[Su(n.children[Xt],!1)]:[`${i}:${Su(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${xd(n)}/${t[0]}`:`${xd(n)}/(${t.join("//")})`}}function Rd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nd(n){return Rd(n).replace(/%3B/gi,";")}function jl(n){return Rd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pd(n){return decodeURIComponent(n)}function $l(n){return Pd(n.replace(/\+/g,"%20"))}function Xg(n){return`${jl(n.path)}${function Hl(n){return Object.keys(n).map(e=>`;${jl(e)}=${jl(n[e])}`).join("")}(n.parameters)}`}const S_=/^[^\/()?;=#]+/;function Tu(n){const e=n.match(S_);return e?e[0]:""}const $f=/^[^=?&#]+/,Lw=/^[^&#]+/;class Gl{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tt([],{}):new Tt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new Tt(e,t)),r}parseSegment(){const e=Tu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new lo(Pd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Tu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Tu(this.remaining);i&&(r=i,this.capture(r))}e[Pd(t)]=Pd(r)}parseQueryParam(e){const t=function em(n){const e=n.match($f);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Ta(n){const e=n.match(Lw);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=$l(t),u=$l(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Xt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Xt]:new Tt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function Od(n){return n.segments.length>0?new Tt([],{[Xt]:n}):n}function kd(n){const e={};for(const r of Object.keys(n.children)){const u=kd(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function zl(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new Tt(n.segments.concat(e.segments),e.children)}return n}(new Tt(n.segments,e))}function co(n){return n instanceof uo}function A_(n,e,t,r,i){if(0===t.length)return Aa(e.root,e.root,e.root,r,i);const u=function nm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new tm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return jr(u.outlets,(y,I)=>{f[I]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new tm(t,e,r)}(t);return u.toRoot()?Aa(e.root,e.root,new Tt([],{}),r,i):function c(y){const I=function Wo(n,e,t,r){if(n.isAbsolute)return new gs(e.root,!0,0);if(-1===r)return new gs(t,t===e.root,0);return function Gf(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new g.vHH(4005,!1);i=r.segments.length}return new gs(r,!1,i-u)}(t,r+(Au(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,y),S=I.processChildren?Vd(I.segmentGroup,I.index,u.commands):zf(I.segmentGroup,I.index,u.commands);return Aa(e.root,I.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function Au(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qo(n){return"object"==typeof n&&null!=n&&n.outlets}function Aa(n,e,t,r,i){let c,u={};r&&jr(r,(y,I)=>{u[I]=Array.isArray(y)?y.map(S=>`${S}`):`${y}`}),c=n===e?t:Ld(n,e,t);const f=Od(kd(c));return new uo(f,u,i)}function Ld(n,e,t){const r={};return jr(n.children,(i,u)=>{r[u]=i===e?t:Ld(i,e,t)}),new Tt(n.segments,r)}class tm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Au(r[0]))throw new g.vHH(4003,!1);const i=r.find(qo);if(i&&i!==ps(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gs{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zf(n,e,t){if(n||(n=new Tt([],{})),0===n.segments.length&&n.hasChildren())return Vd(n,e,t);const r=function ql(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(qo(f))break;const y=`${f}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&I&&"object"==typeof I&&void 0===I.outlets){if(!qf(y,I,c))return u;r+=2}else{if(!qf(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Tt(n.segments.slice(0,r.pathIndex),{});return u.children[Xt]=new Tt(n.segments.slice(r.pathIndex),n.children),Vd(u,0,i)}return r.match&&0===i.length?new Tt(n.segments,{}):r.match&&!n.hasChildren()?Wl(n,e,t):r.match?Vd(n,0,i):Wl(n,e,t)}function Vd(n,e,t){if(0===t.length)return new Tt(n.segments,{});{const r=function im(n){return qo(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};return jr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=zf(n.children[c],e,u))}),jr(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Tt(n.segments,i)}}function Wl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(qo(u)){const y=Ud(u.outlets);return new Tt(r,y)}if(0===i&&Au(t[0])){r.push(new lo(n.segments[e].path,Bd(t[0]))),i++;continue}const c=qo(u)?u.outlets[Xt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&Au(f)?(r.push(new lo(c,Bd(f))),i+=2):(r.push(new lo(c,{})),i++)}return new Tt(r,{})}function Ud(n){const e={};return jr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Wl(new Tt([],{}),0,t))}),e}function Bd(n){const e={};return jr(n,(t,r)=>e[r]=`${t}`),e}function qf(n,e,t){return n==t.path&&fs(e,t.parameters)}class ki{constructor(e,t){this.id=e,this.url=t}}class jd extends ki{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hn extends ki{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ms extends ki{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $d extends ki{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wf extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kl extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zl extends ki{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yl extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sm extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class om{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ko{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class am{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class um{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hd{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ql{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Gd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Jl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Jl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lm(e,this._root).map(t=>t.value)}}function Jl(n,e){if(n===e.value)return e;for(const t of e.children){const r=Jl(n,t);if(r)return r}return null}function lm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lm(n,t);if(r.length)return r.unshift(e),r}return[]}class $r{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ki(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Zf extends Gd{constructor(e,t){super(e),this.snapshot=t,_(this,e)}toString(){return this.snapshot.toString()}}function zd(n,e){const t=function qd(n,e){const c=new Xl([],{},{},"",{},Xt,e,null,n.root,-1,{});return new Qf("",new $r(c,[]))}(n,e),r=new $n([new lo("",{})]),i=new $n({}),u=new $n({}),c=new $n({}),f=new $n(""),y=new ys(r,i,c,f,u,Xt,e,t.root);return y.snapshot=t.root,new Zf(new $r(y,[]),t)}class ys{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,Nt.U)(I=>I[Dd]))??ct(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(e=>Du(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(e=>Du(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function cm(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Xl{constructor(e,t,r,i,u,c,f,y,I,S,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.[Dd],this.routeConfig=y,this._urlSegment=I,this._lastPathIndex=S,this._correctedLastPathIndex=L??S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Du(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Du(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qf extends Gd{constructor(e,t){super(t),this.url=e,_(this,t)}toString(){return h(this._root)}}function _(n,e){e.value._routerState=n,e.children.forEach(t=>_(n,t))}function h(n){const e=n.children.length>0?` { ${n.children.map(h).join(", ")} } `:"";return`${n.value}${e}`}function p(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),fs(e.params,t.params)||n.params.next(t.params),function Cd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),fs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function w(n,e){const t=fs(n.params,e.params)&&function Yg(n,e){return Sa(n,e)&&n.every((t,r)=>fs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||w(n.parent,e.parent))}function N(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function z(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return N(n,r,i);return N(n,r)})}(n,e,t);return new $r(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>N(n,f)),c}}const r=function ce(n){return new ys(new $n(n.url),new $n(n.params),new $n(n.queryParams),new $n(n.fragment),new $n(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>N(n,u));return new $r(r,i)}}const Ve="ngNavigationCancelingError";function et(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=co(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Rt(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Rt(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ve]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Dt(n){return vr(n)&&co(n.url)}function vr(n){return n&&n[Ve]}class Zi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zo,this.attachRef=null}}let Zo=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Zi,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ec=!1;let tc=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=i||Xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,ec);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,ec);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,ec);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,ec);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new dm(t,f,i.injector);if(r&&function Wd(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(c);this.activated=i.createComponent(I,i.length,y)}else this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Zo),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class dm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ys?this.route:e===Zo?this.childContexts:this.parent.get(e,t)}}let Fi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[tc],encapsulation:2}),n})();function Ma(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bw(n){const e=n.children&&n.children.map(Bw),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=Fi),t}function ho(n){return n.outlet||Xt}function R_(n,e){const t=n.filter(r=>ho(r)===e);return t.push(...n.filter(r=>ho(r)!==e)),t}function Xf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class nC{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),p(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ki(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),jr(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ki(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ki(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ki(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Hd(u.value.snapshot))}),e.children.length&&this.forwardEvent(new um(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(p(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),p(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=Xf(i.snapshot),y=f?.get(g._Vd)??null;c.attachRef=null,c.route=i,c.resolver=y,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class jw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ep{constructor(e,t){this.component=e,this.route=t}}function pm(n,e,t){const r=n._root;return tp(r,e?e._root:null,t,[r.value])}function Mu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function tp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ki(e);return n.children.forEach(c=>{(function Pr(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function iC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Sa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Sa(n.url,e.url)||!fs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!w(n,e)||!fs(n.queryParams,e.queryParams);default:return!w(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new jw(r)):(u.data=c.data,u._resolvedData=c._resolvedData),tp(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new ep(f.outlet.component,c))}else c&&np(e,f,i),i.canActivateChecks.push(new jw(r)),tp(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),jr(u,(c,f)=>np(c,t.getContext(f),i)),i}function np(n,e,t){const r=Ki(n),i=n.value;jr(r,(u,c)=>{np(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ep(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function nc(n){return"function"==typeof n}function rc(n){return n instanceof bu||"EmptyError"===n?.name}const Zd=Symbol("INITIAL_VALUE");function ic(){return yr(n=>X(n.map(e=>e.pipe(Ll(1),Id(Zd)))).pipe((0,Nt.U)(e=>{for(const t of e)if(!0!==t){if(t===Zd)return Zd;if(!1===t||t instanceof uo)return t}return!0}),ds(e=>e!==Zd),Ll(1)))}function O_(n){return(0,or.z)((0,mi.b)(e=>{if(co(e))throw et(0,e)}),(0,Nt.U)(e=>!0===e))}const xa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kw(n,e,t,r,i){const u=rp(n,e,t);return u.matched?function Ww(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ct(i.map(c=>{const f=Mu(c,n);return Hs(function lC(n){return n&&nc(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(ic(),O_()):ct(!0)}(r=Ma(e,r),e,t).pipe((0,Nt.U)(c=>!0===c?u:{...xa})):ct(u)}function rp(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...xa}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qg)(t,n,e);if(!i)return{...xa};const u={};jr(i.posParams,(f,y)=>{u[y]=f.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function sc(n,e,t,r,i="corrected"){if(t.length>0&&function gm(n,e,t){return t.some(r=>ip(n,e,r)&&ho(r)!==Xt)}(n,t,r)){const c=new Tt(e,function k_(n,e,t,r){const i={};i[Xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ho(u)!==Xt){const c=new Tt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ho(u)]=c}return i}(n,e,r,new Tt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function oc(n,e,t){return t.some(r=>ip(n,e,r))}(n,t,r)){const c=new Tt(n.segments,function hC(n,e,t,r,i,u){const c={};for(const f of r)if(ip(n,t,f)&&!i[ho(f)]){const y=new Tt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[ho(f)]=y}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Tt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ip(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mm(n,e,t,r){return!!(ho(n)===r||r!==Xt&&ip(e,t,n))&&("**"===n.path||rp(e,n,t).matched)}function Zw(n,e,t){return 0===e.length&&!n.children[t]}const ym=!1;class sp{constructor(e){this.segmentGroup=e||null}}class ac{constructor(e){this.urlTree=e}}function op(n){return Ci(new sp(n))}function Yw(n){return Ci(new ac(n))}class gC{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=sc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Tt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Xt).pipe((0,Nt.U)(u=>this.createUrlTree(kd(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Go(u=>{if(u instanceof ac)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof sp?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Xt).pipe((0,Nt.U)(i=>this.createUrlTree(kd(i),e.queryParams,e.fragment))).pipe(Go(i=>{throw i instanceof sp?this.noMatchError(i):i}))}noMatchError(e){return new g.vHH(4002,ym)}createUrlTree(e,t,r){const i=Od(e);return new uo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Nt.U)(u=>new Tt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,hn.D)(i).pipe(hs(u=>{const c=r.children[u],f=R_(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Nt.U)(y=>({segment:y,outlet:u})))}),Ca((u,c)=>(u[c.outlet]=c.segment,u),{}),b_())}expandSegment(e,t,r,i,u,c){return(0,hn.D)(r).pipe(hs(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(Go(I=>{if(I instanceof sp)return ct(null);throw I}))),Ho(f=>!!f),Go((f,y)=>{if(rc(f))return Zw(t,i,u)?ct(new Tt([],{})):op(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return mm(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):op(t):op(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Yw(u):this.lineralizeSegments(r,u).pipe((0,ar.z)(c=>{const f=new Tt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:I,positionalParamSegments:S}=rp(t,i,u);if(!f)return op(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?Yw(M):this.lineralizeSegments(i,M).pipe((0,ar.z)(L=>this.expandSegment(e,t,r,L.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=Ma(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Nt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Tt(i,{})))):ct(new Tt(i,{}))):Kw(t,r,i,e).pipe(yr(({matched:c,consumedSegments:f,remainingSegments:y})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ar.z)(S=>{const M=S.injector??e,L=S.routes,{segmentGroup:G,slicedSegments:Z}=sc(t,f,y,L),ae=new Tt(G.segments,G.children);if(0===Z.length&&ae.hasChildren())return this.expandChildren(M,L,ae).pipe((0,Nt.U)(ut=>new Tt(f,ut)));if(0===L.length&&0===Z.length)return ct(new Tt(f,{}));const be=ho(r)===u;return this.expandSegment(M,ae,L,Z,be?Xt:u,!0).pipe((0,Nt.U)(yt=>new Tt(f.concat(yt.segments),yt.children)))})):op(t)))}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function P_(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ct(!0):ct(i.map(c=>{const f=Mu(c,n);return Hs(function sC(n){return n&&nc(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(ic(),O_())}(e,t,r).pipe((0,ar.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,mi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function pC(n){return Ci(Rt(ym,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ct(r);if(i.numberOfChildren>1||!i.children[Xt])return Ci(new g.vHH(4e3,ym));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new uo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return jr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return jr(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new Tt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new g.vHH(4001,ym);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Jw{}class ap{constructor(e,t,r,i,u,c,f,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=y}recognize(){const e=sc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe((0,Nt.U)(t=>{if(null===t)return null;const r=new Xl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $r(r,t),u=new Qf(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Yf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,hn.D)(Object.keys(r.children)).pipe(hs(i=>{const u=r.children[i],c=R_(t,i);return this.processSegmentGroup(e,c,u,i)}),Ca((i,u)=>i&&u?(i.push(...u),i):null),function Lf(n,e=!1){return(0,Pn.e)((t,r)=>{let i=0;t.subscribe((0,F.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),Vl(null),b_(),(0,Nt.U)(i=>{if(null===i)return null;const u=Xw(i);return function yC(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,hn.D)(t).pipe(hs(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),Ho(c=>!!c),Go(c=>{if(rc(c))return Zw(r,i,u)?ct([]):ct(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!mm(t,r,i,u))return ct(null);let c;if("**"===t.path){const f=i.length>0?ps(i).parameters:{},y=eE(r)+i.length;c=ct({snapshot:new Xl(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nE(t),ho(t),t.component??t._loadedComponent??null,t,L_(r),y,V_(t),y),consumedSegments:[],remainingSegments:[]})}else c=Kw(r,t,i,e).pipe((0,Nt.U)(({matched:f,consumedSegments:y,remainingSegments:I,parameters:S})=>{if(!f)return null;const M=eE(r)+y.length;return{snapshot:new Xl(y,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nE(t),ho(t),t.component??t._loadedComponent??null,t,L_(r),M,V_(t),M),consumedSegments:y,remainingSegments:I}}));return c.pipe(yr(f=>{if(null===f)return ct(null);const{snapshot:y,consumedSegments:I,remainingSegments:S}=f;e=t._injector??e;const M=t._loadedInjector??e,L=function Yd(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:Z}=sc(r,I,S,L.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution);if(0===Z.length&&G.hasChildren())return this.processChildren(M,L,G).pipe((0,Nt.U)(be=>null===be?null:[new $r(y,be)]));if(0===L.length&&0===Z.length)return ct([new $r(y,[])]);const ae=ho(t)===u;return this.processSegment(M,L,G,Z,ae?Xt:u).pipe((0,Nt.U)(be=>null===be?null:[new $r(y,be)]))}))}}function up(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Xw(n){const e=[],t=new Set;for(const r of n){if(!up(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Xw(r.children);e.push(new $r(r.value,i))}return e.filter(r=>!t.has(r))}function L_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function nE(n){return n.data||{}}function V_(n){return n.resolve||{}}function iE(n){return"string"==typeof n.title||null===n.title}function $_(n){return yr(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,Nt.U)(()=>e)):ct(e)})}let sE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Xt);return r}getResolvedTitleForRoute(t){return t.data[Dd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(oE)},providedIn:"root"}),n})(),oE=(()=>{class n extends sE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ml))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wC{}class Qd extends class EC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vm=new g.OlP("",{providedIn:"root",factory:()=>({})}),uE=new g.OlP("ROUTES");let lE=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Hs(t.loadComponent()).pipe((0,mi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),bd(()=>{this.componentLoaders.delete(t)})),i=new kf(r,()=>new ei.x).pipe(Da());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Nt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,I,S=!1;Array.isArray(f)?I=f:(y=f.create(t).injector,I=Uf(y.get(uE,[],g.XFs.Self|g.XFs.Optional)));return{routes:I.map(Bw),injector:y}}),bd(()=>{this.childrenLoaders.delete(r)})),c=new kf(u,()=>new ei.x).pipe(Da());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Hs(t()).pipe((0,ar.z)(r=>r instanceof g.YKP||Array.isArray(r)?ct(r):(0,hn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cE{}class PM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function OM(n){throw n}function dE(n,e,t){return e.parse("/")}const IC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function fE(){const n=(0,g.f3M)(Bf),e=(0,g.f3M)(Zo),t=(0,g.f3M)(Se),r=(0,g.f3M)(g.zs3),i=(0,g.f3M)(g.Sil),u=(0,g.f3M)(uE,{optional:!0})??[],c=(0,g.f3M)(vm,{optional:!0})??{},f=(0,g.f3M)(oE),y=(0,g.f3M)(sE,{optional:!0}),I=(0,g.f3M)(cE,{optional:!0}),S=(0,g.f3M)(wC,{optional:!0}),M=new En(null,n,e,t,r,i,Uf(u));return I&&(M.urlHandlingStrategy=I),S&&(M.routeReuseStrategy=S),M.titleStrategy=y??f,function bC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let En=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ei.x,this.errorHandler=OM,this.malformedUriErrorHandler=dE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new PM,this.routeReuseStrategy=new Qd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(lE),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Ko(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new om(L)),this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const M=c.get(g.R0b);this.isNgZoneEnabled=M instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Td(){return new uo(new Tt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zd(this.currentUrlTree,this.rootComponentType),this.transitions=new $n({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ds(i=>0!==i.id),(0,Nt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),yr(i=>{let u=!1,c=!1;return ct(i).pipe((0,mi.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),yr(f=>{const y=this.browserUrlTree.toString(),I=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return H_(f.source)&&(this.browserUrlTree=f.extractedUrl),ct(f).pipe(yr(M=>{const L=this.transitions.getValue();return r.next(new jd(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?Nr.E:Promise.resolve(M)}),function Qw(n,e,t,r){return yr(i=>function F_(n,e,t,r,i){return new gC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Nt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mi.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},i.urlAfterRedirects=M.urlAfterRedirects}),function rE(n,e,t,r,i,u){return(0,ar.z)(c=>function mC(n,e,t,r,i,u,c="emptyOnly",f="legacy"){return new ap(n,e,t,r,i,c,f,u).recognize().pipe(yr(y=>null===y?function RM(n){return new fi.y(e=>e.error(n))}(new Jw):ct(y)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,Nt.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mi.b)(M=>{if(i.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new Wf(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:Z,restoredState:ae,extras:be}=f,We=new jd(L,this.serializeUrl(G),Z,ae);r.next(We);const yt=zd(G,this.rootComponentType).snapshot;return ct(i={...f,targetSnapshot:yt,urlAfterRedirects:G,extras:{...be,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),Nr.E}),(0,mi.b)(f=>{const y=new Kl(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,Nt.U)(f=>i={...f,guards:pm(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function Hw(n,e){return(0,ar.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?ct({...t,guardsResult:!0}):function Gw(n,e,t,r){return(0,hn.D)(n).pipe((0,ar.z)(i=>function dC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(f=>{const y=Xf(e)??i,I=Mu(f,y);return Hs(function uC(n){return n&&nc(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):y.runInContext(()=>I(n,e,t,r))).pipe(Ho())})).pipe(ic()):ct(!0)}(i.component,i.route,t,e,r)),Ho(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ar.z)(f=>f&&function $w(n){return"boolean"==typeof n}(f)?function cC(n,e,t,r){return(0,hn.D)(e).pipe(hs(i=>Ut(function qw(n,e){return null!==n&&e&&e(new am(n)),ct(!0)}(i.route.parent,r),function zw(n,e){return null!==n&&e&&e(new Kf(n)),ct(!0)}(i.route,r),function xM(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function rC(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Rr(()=>ct(c.guards.map(y=>{const I=Xf(c.node)??t,S=Mu(y,I);return Hs(function aC(n){return n&&nc(n.canActivateChild)}(S)?S.canActivateChild(r,n):I.runInContext(()=>S(r,n))).pipe(Ho())})).pipe(ic())));return ct(u).pipe(ic())}(n,i.path,t),function N_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const i=r.map(u=>Rr(()=>{const c=Xf(e)??t,f=Mu(u,c);return Hs(function oC(n){return n&&nc(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(Ho())}));return ct(i).pipe(ic())}(n,i.route,t))),Ho(i=>!0!==i,!0))}(r,u,n,e):ct(f)),(0,Nt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,mi.b)(f=>{if(i.guardsResult=f.guardsResult,co(f.guardsResult))throw et(0,f.guardsResult);const y=new Zl(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),ds(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),$_(f=>{if(f.guards.canActivateChecks.length)return ct(f).pipe((0,mi.b)(y=>{const I=new Yl(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(I)}),yr(y=>{let I=!1;return ct(y).pipe(function U_(n,e){return(0,ar.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ct(t);let u=0;return(0,hn.D)(i).pipe(hs(c=>function B_(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!iE(i)&&(u[Dd]=i.title),function _C(n,e,t,r){const i=function j_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ct({});const u={};return(0,hn.D)(i).pipe((0,ar.z)(c=>function lp(n,e,t,r){const i=Xf(e)??r,u=Mu(n,i);return Hs(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Ho(),(0,mi.b)(f=>{u[c]=f}))),zg(1),function kw(n){return(0,Nt.U)(()=>n)}(u),Go(c=>rc(c)?Nr.E:Ci(c)))}(u,n,e,r).pipe((0,Nt.U)(c=>(n._resolvedData=c,n.data=Yf(n,t).resolve,i&&iE(i)&&(n.data[Dd]=i.title),null)))}(c.route,r,n,e)),(0,mi.b)(()=>u++),zg(1),(0,ar.z)(c=>u===i.length?ct(t):Nr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mi.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,mi.b)(y=>{const I=new sm(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(I)}))}),$_(f=>{const y=I=>{const S=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,mi.b)(M=>{I.component=M}),(0,Nt.U)(()=>{})));for(const M of I.children)S.push(...y(M));return S};return X(y(f.targetSnapshot.root)).pipe(Vl(),Ll(1))}),$_(()=>this.afterPreactivation()),(0,Nt.U)(f=>{const y=function A(n,e,t){const r=N(n,e._root,t?t._root:void 0);return new Zf(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:y}}),(0,mi.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Nt.U)(r=>(new nC(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,mi.b)({next(){u=!0},complete(){u=!0}}),bd(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Go(f=>{if(c=!0,vr(f)){Dt(f)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new ms(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(y),Dt(f)){const I=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||H_(i.source)};this.scheduleNavigation(I,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new $d(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(f))}catch(I){i.reject(I)}}return Nr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const f={...u};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Bw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,I=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),A_(I,this.currentUrlTree,t,M,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=co(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function DC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...IC}:!1===r?{...hE}:r,co(t))return Kg(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Kg(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let f,y,I;c?(f=c.resolve,y=c.reject,I=c.promise):I=new Promise((L,G)=>{f=L,y=G});const S=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:S,targetPageId:M,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:f,reject:y,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new ms(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return fE()},providedIn:"root"}),n})();function H_(n){return"imperative"!==n}let wm=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ei.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(En),g.Y36(ys),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class z_{}let TC=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(ds(t=>t instanceof Hn),hs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,f=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,hn.D)(i).pipe((0,ot.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const u=i.pipe((0,ar.z)(c=>null===c?ct(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,hn.D)([u,c]).pipe((0,ot.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(En),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(z_),g.LFG(lE))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $t=new g.OlP("");let q_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ql&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ql(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Jd(n,e){return{\u0275kind:n,\u0275providers:e}}function Em(n){return[{provide:uE,multi:!0,useValue:n}]}function W_(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(En),i=n.get(gE);1===n.get(K_)&&r.initialNavigation(),n.get(xu,null,g.XFs.Optional)?.setUpPreloading(),n.get($t,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const gE=new g.OlP("",{factory:()=>new ei.x}),K_=new g.OlP("",{providedIn:"root",factory:()=>1});const xu=new g.OlP("");function MC(n){return Jd(0,[{provide:xu,useExisting:TC},{provide:z_,useExisting:n}])}const xC=new g.OlP("ROUTER_FORROOT_GUARD"),BM=[Se,{provide:Bf,useClass:Jg},{provide:En,useFactory:fE},Zo,{provide:ys,useFactory:function pE(n){return n.routerState.root},deps:[En]},lE];function jM(){return new g.PXZ("Router",En)}let vE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[BM,[],Em(t),{provide:xC,useFactory:eh,deps:[[En,new g.FiY,new g.tp0]]},{provide:vm,useValue:r||{}},r?.useHash?{provide:ye,useClass:pt}:{provide:ye,useClass:Xe},{provide:$t,useFactory:()=>{const n=(0,g.f3M)(En),e=(0,g.f3M)(nu),t=(0,g.f3M)(vm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new q_(n,e,t)}},r?.preloadingStrategy?MC(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:jM},r?.initialNavigation?NC(r):[],[{provide:Z_,useFactory:W_},{provide:g.tb,multi:!0,useExisting:Z_}]]}}static forChild(t){return{ngModule:n,providers:[Em(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(xC,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Fi]}),n})();function eh(n){return"guarded"}function NC(n){return["disabled"===n.initialNavigation?Jd(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(En);return()=>{e.setUpLocationChangeListener()}}},{provide:K_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Jd(2,[{provide:K_,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(En),f=e.get(gE);(function i(u){e.get(En).events.pipe(ds(f=>f instanceof Hn||f instanceof ms||f instanceof $d),(0,Nt.U)(f=>f instanceof Hn||f instanceof ms&&(0===f.code||1===f.code)&&null),ds(f=>null!==f),Ll(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||f.closed?ct(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const Z_=new g.OlP("");var me=k(5861),PC=k(4986),yi=k(2122);function Y_(){return(0,Pn.e)((n,e)=>{let t,r=!1;n.subscribe((0,F.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function kC(n,e){return n===e}var at,Gs=k(2011),EE=(k(9800),k(3942)),Ru=k(9681),th=k(4859),uc=k(1877),ln=k(2090),FC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nu={},bm=bm||{},Ht=FC||self;function lc(){}function Yi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hp="closure_uid_"+(1e9*Math.random()>>>0),Na=0;function Q_(n,e,t){return n.call.apply(n.bind,arguments)}function IE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ti(n,e,t){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Q_:IE).apply(null,arguments)}function J_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ni(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function cc(){this.s=this.s,this.o=this.o}cc.prototype.s=!1,cc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function LC(n){Object.prototype.hasOwnProperty.call(n,hp)&&n[hp]||(n[hp]=++Na)}(this)},cc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Cm(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Yi(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ri.prototype.h=function(){this.defaultPrevented=!0};var zM=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",lc,e),Ht.removeEventListener("test",lc,e)}catch{}return n}();function Sm(n){return/^[\s\xa0]*$/.test(n)}var bE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function X_(n,e){return n<e?-1:n>e?1:0}function Tm(){var n=Ht.navigator;return n&&(n=n.userAgent)?n:""}function fo(n){return-1!=Tm().indexOf(n)}function DE(n){return DE[" "](n),n}DE[" "]=lc;var nv,n,qM=fo("Opera"),dc=fo("Trident")||fo("MSIE"),ev=fo("Edge"),tv=ev||dc,Am=fo("Gecko")&&!(-1!=Tm().toLowerCase().indexOf("webkit")&&!fo("Edge"))&&!(fo("Trident")||fo("MSIE"))&&!fo("Edge"),WM=-1!=Tm().toLowerCase().indexOf("webkit")&&!fo("Edge");function UC(){var n=Ht.document;return n?n.documentMode:void 0}e:{var CE="",SE=(n=Tm(),Am?/rv:([^\);]+)(\)|;)/.exec(n):ev?/Edge\/([\d\.]+)/.exec(n):dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):WM?/WebKit\/(\S+)/.exec(n):qM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(SE&&(CE=SE?SE[1]:""),dc){var TE=UC();if(null!=TE&&TE>parseFloat(CE)){nv=String(TE);break e}}nv=CE}var KM={};var Pu=Ht.document&&dc&&(UC()||parseInt(nv,10))||void 0;function hc(n,e){if(ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Am){e:{try{DE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hc.X.h.call(this)}}ni(hc,ri);var jC={2:"touch",3:"pen",4:"mouse"};hc.prototype.h=function(){hc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rh="closure_listenable_"+(1e6*Math.random()|0),rv=0;function ME(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++rv,this.ba=this.ea=!1}function ih(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function iv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Pa(n){const e={};for(const t in n)e[t]=n[t];return e}const sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<sv.length;u++)t=sv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Mm(n){this.src=n,this.g={},this.h=0}function xm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=fp(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(ih(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ov(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Mm.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=ov(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new ME(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var av="closure_lm_"+(1e6*Math.random()|0),sh={};function fc(n,e,t,r,i){if(r&&r.once)return Nm(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)fc(n,e[u],t,r,i);return null}return t=yp(t),n&&n[rh]?n.N(e,t,nh(r)?!!r.capture:!!r,i):Rm(n,e,t,!1,r,i)}function Rm(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=nh(i)?!!i.capture:!!i,f=mp(n);if(f||(n[av]=f=new Mm(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function oh(){const e=lv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zM||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(uv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Nm(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Nm(n,e[u],t,r,i);return null}return t=yp(t),n&&n[rh]?n.O(e,t,nh(r)?!!r.capture:!!r,i):Rm(n,e,t,!0,r,i)}function gp(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)gp(n,e[u],t,r,i);else r=nh(r)?!!r.capture:!!r,t=yp(t),n&&n[rh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ov(u=n.g[e],t,r,i))&&(ih(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=mp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ov(e,t,r,i)),(t=-1<n?e[n]:null)&&Pm(t))}function Pm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[rh])xm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(uv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mp(e))?(xm(t,n),0==t.h&&(t.src=null,e[av]=null)):ih(n)}}}function uv(n){return n in sh?sh[n]:sh[n]="on"+n}function lv(n,e){if(n.ba)n=!0;else{e=new hc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Pm(n),n=t.call(r,e)}return n}function mp(n){return(n=n[av])instanceof Mm?n:null}var Om="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(n){return"function"==typeof n?n:(n[Om]||(n[Om]=function(e){return n.handleEvent(e)}),n[Om])}function ii(){cc.call(this),this.i=new Mm(this),this.P=this,this.I=null}function Si(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ri(e,n);else if(e instanceof ri)e.target=e.target||n;else{var i=e;xE(e=new ri(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=km(c,r,!0,e)&&i}if(i=km(c=e.g=n,r,!0,e)&&i,i=km(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=km(c=e.g=t[u],r,!1,e)&&i}function km(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var f=c.listener,y=c.ha||c.src;c.ea&&xm(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}ni(ii,cc),ii.prototype[rh]=!0,ii.prototype.removeEventListener=function(n,e,t,r){gp(this,n,e,t,r)},ii.prototype.M=function(){if(ii.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ih(t[r]);delete n.g[e],n.h--}}this.I=null},ii.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fm=Ht.JSON.stringify;function $C(){var n=Lm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hv,cv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new HC,n=>n.reset());class HC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _s(n){Ht.setTimeout(()=>{throw n},0)}function dv(n,e){hv||function YM(){var n=Ht.Promise.resolve(void 0);hv=function(){n.then(NE)}}(),fv||(hv(),fv=!0),Lm.add(n,e)}var fv=!1,Lm=new class RE{constructor(){this.h=this.g=null}add(e,t){const r=cv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function NE(){for(var n;n=$C();){try{n.h.call(n.g)}catch(t){_s(t)}var e=cv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fv=!1}function Vm(n,e){ii.call(this),this.h=n||1,this.g=e||Ht,this.j=ti(this.lb,this),this.l=Date.now()}function pv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function gv(n,e,t){if("function"==typeof n)t&&(n=ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function mv(n){n.g=gv(()=>{n.g=null,n.i&&(n.i=!1,mv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ni(Vm,ii),(at=Vm.prototype).ca=!1,at.R=null,at.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Si(this,"tick"),this.ca&&(pv(this),this.start()))}},at.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){Vm.X.M.call(this),pv(this),delete this.g};class GC extends cc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mv(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ah(n){cc.call(this),this.h=n,this.g={}}ni(ah,cc);var PE=[];function OE(n,e,t,r){Array.isArray(t)||(t&&(PE[0]=t.toString()),t=PE);for(var i=0;i<t.length;i++){var u=fc(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function yv(n){iv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Pm(e)},n),n.g={}}function _p(){this.g=!0}function Ou(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function WC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Fm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ah.prototype.M=function(){ah.X.M.call(this),yv(this)},ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_p.prototype.Aa=function(){this.g=!1},_p.prototype.info=function(){};var uh={},_v=null;function Um(){return _v=_v||new ii}function kE(n){ri.call(this,uh.Pa,n)}function vp(n){const e=Um();Si(e,new kE(e))}function Bm(n,e){ri.call(this,uh.STAT_EVENT,n),this.stat=e}function Li(n){const e=Um();Si(e,new Bm(e,n))}function FE(n,e){ri.call(this,uh.Qa,n),this.size=e}function ku(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}uh.Pa="serverreachability",ni(kE,ri),uh.STAT_EVENT="statevent",ni(Bm,ri),uh.Qa="timingevent",ni(FE,ri);var lh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},wp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function LE(){}function KC(){}LE.prototype.h=null;var Gm,ch={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function $m(){ri.call(this,"d")}function Hm(){ri.call(this,"c")}function dh(){}function vs(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ah(this),this.O=zm,this.T=new Vm(n=tv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ep}function Ep(){this.i=null,this.g="",this.h=!1}ni($m,ri),ni(Hm,ri),ni(dh,LE),dh.prototype.g=function(){return new XMLHttpRequest},dh.prototype.i=function(){return{}},Gm=new dh;var zm=45e3,pc={},qm={};function Ip(n,e,t){n.K=1,n.v=yc(Oa(e)),n.s=t,n.P=!0,vv(n,null)}function vv(n,e){n.F=Date.now(),Dp(n),n.A=Oa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),ws(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Ep,n.g=Ov(n.l,t?e:null,!n.s),0<n.N&&(n.L=new GC(ti(n.La,n,n.g),n.N)),OE(n.S,n.g,"readystatechange",n.ib),e=n.H?Pa(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),vp(),function zC(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var I=f[y].split("=");if(1<I.length){var S=I[0];I=I[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+I+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function VE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function UE(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bp(n,t),i==qm){4==e&&(n.o=4,Li(14),r=!1),Ou(n.j,n.m,null,"[Incomplete Response]");break}if(i==pc){n.o=4,Li(15),Ou(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ou(n.j,n.m,i,null),wv(n,i)}VE(n)&&i!=qm&&i!=pc&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Li(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pp(e),e.K=!0,Li(11))):(Ou(n.j,n.m,t,"[Invalid Chunked Response]"),gc(n),Km(n))}function bp(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qm:(t=Number(e.substring(t,r)),isNaN(t)?pc:(r+=1)+t>e.length?qm:(e=e.substr(r,t),n.C=r+t,e))}function Dp(n){n.V=Date.now()+n.O,ZC(n,n.O)}function ZC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ku(ti(n.gb,n),e)}function Wm(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Km(n){0==n.l.G||n.I||xv(n.l,n)}function gc(n){Wm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pv(n.T),yv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Vu(t.h,n)))if(!n.J&&Vu(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Op(t),ly(t)}cy(t),Li(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=ku(ti(t.cb,t),6e3));if(1>=wc(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bu(t,11)}else if((n.J||t.g==n)&&Op(t),!Sm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const S=I[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const M=I[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const Z=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.h;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Uu(u,u.h),u.h=null))}if(r.D){const ae=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.za=ae,Gn(r.F,r.D,ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Pv(r,r.H?r.ka:null,r.V),c.J){Ec(r.h,c);var f=c,y=r.J;y&&f.setTimeout(y),f.B&&(Wm(f),Dp(f)),r.g=c}else Av(r);0<t.i.length&&Rp(t)}else"stop"!=I[0]&&"close"!=I[0]||Bu(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Bu(t,7):uy(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}vp()}catch{}}function Zm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function BE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Yi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function YC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Yi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(at=vs.prototype).setTimeout=function(n){this.O=n},at.ib=function(n){n=n.target;const e=this.L;e&&3==Jo(n)?e.l():this.La(n)},at.La=function(n){try{if(n==this.g)e:{const S=Jo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||tv||this.g&&(this.h.h||this.g.fa()||ZE(this.g)))){this.I||4!=S||7==e||vp(),Wm(this);var t=this.g.aa();this.Y=t;t:if(VE(this)){var r=ZE(this.g);n="";var i=r.length,u=4==Jo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){gc(this),Km(this);var c="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function Yo(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sm(f)){var I=f;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Li(12),gc(this),Km(this);break e}Ou(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wv(this,t)}this.P?(UE(this,S,c),tv&&this.i&&3==S&&(OE(this.S,this.T,"tick",this.hb),this.T.start())):(Ou(this.j,this.m,c,null),wv(this,c)),4==S&&gc(this),this.i&&!this.I&&(4==S?xv(this.l,this):(this.i=!1,Dp(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),gc(this),Km(this)}}}catch{}},at.hb=function(){if(this.g){var n=Jo(this.g),e=this.g.fa();this.C<e.length&&(Wm(this),UE(this,n,e),this.i&&4!=n&&Dp(this))}},at.cancel=function(){this.I=!0,gc(this)},at.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function qC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(vp(),Li(17)),gc(this),this.o=2,Km(this)):ZC(this,this.V-n)};var jE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof mc){this.h=void 0!==e?e:n.h,Ym(this,n.j),this.s=n.s,this.g=n.g,Qm(this,n.m),this.l=n.l,e=n.i;var t=new ka;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$E(this,t),this.o=n.o}else n&&(t=String(n).match(jE))?(this.h=!!e,Ym(this,t[1]||"",!0),this.s=po(t[2]||""),this.g=po(t[3]||"",!0),Qm(this,t[4]),this.l=po(t[5]||"",!0),$E(this,t[6]||"",!0),this.o=po(t[7]||"")):(this.h=!!e,this.i=new ka(null,this.h))}function Oa(n){return new mc(n)}function Ym(n,e,t){n.j=t?po(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Qm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $E(n,e,t){e instanceof ka?(n.i=e,function hh(n,e){e&&!n.j&&(Qn(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Fu(this,r),ws(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Jm(e,JC)),n.i=new ka(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function yc(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function po(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Jm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Cp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Cp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Jm(e,HE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Jm(e,HE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Jm(t,"/"==t.charAt(0)?Iv:QC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Jm(t,Qo)),n.join("")};var HE=/[#\/\?@]/g,QC=/[#\?:]/g,Iv=/[#\?]/g,JC=/[#\?@]/g,Qo=/#/g;function ka(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qn(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ev(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fu(n,e){Qn(n),e=Lu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Sp(n,e){return Qn(n),e=Lu(n,e),n.g.has(e)}function ws(n,e,t){Fu(n,e),0<t.length&&(n.i=null,n.g.set(Lu(n,e),pp(t)),n.h+=t.length)}function Lu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function _c(n){this.l=n||ph,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ga&&Ht.g.Ga()&&Ht.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=ka.prototype).add=function(n,e){Qn(this),this.i=null,n=Lu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Qn(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},at.oa=function(){Qn(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},at.W=function(n){Qn(this);let e=[];if("string"==typeof n)Sp(this,n)&&(e=e.concat(this.g.get(Lu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Qn(this),this.i=null,Sp(this,n=Lu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var ph=10;function vc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wc(n){return n.h?1:n.g?n.g.size:0}function Vu(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Uu(n,e){n.g?n.g.add(e):n.h=e}function Ec(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pp(n.i)}function Xm(){}function GE(){this.g=new Xm}function zE(n,e,t){const r=t||"";try{Zm(n,function(i,u){let c=i;nh(i)&&(c=Fm(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Tp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function gh(n){this.l=n.ac||null,this.j=n.jb||!1}function Ap(n,e){ii.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ey,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_c.prototype.cancel=function(){if(this.i=bv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xm.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},Xm.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},ni(gh,LE),gh.prototype.g=function(){return new Ap(this.l,this.j)},gh.prototype.i=function(n){return function(){return n}}({}),ni(Ap,ii);var ey=0;function WE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Mp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,mh(n)}function mh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Ap.prototype).open=function(n,e){if(this.readyState!=ey)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,mh(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ht).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mp(this)),this.readyState=ey},at.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,mh(this)),this.g&&(this.readyState=3,mh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ht.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},at.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Mp(this):mh(this),3==this.readyState&&WE(this)}},at.Va=function(n){this.g&&(this.response=this.responseText=n,Mp(this))},at.Ua=function(n){this.g&&(this.response=n,Mp(this))},at.ga=function(){this.g&&Mp(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ap.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var XC=Ht.JSON.parse;function Jn(n){ii.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ty,this.K=this.L=!1}ni(Jn,ii);var ty="",Dv=/^https?$/i,eS=["POST","PUT"];function xp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ry(n),yh(n)}function ry(n){n.D||(n.D=!0,Si(n,"complete"),Si(n,"error"))}function KE(n){if(n.h&&typeof bm<"u"&&(!n.C[1]||4!=Jo(n)||2!=n.aa()))if(n.v&&4==Jo(n))gv(n.Ha,0,n);else if(Si(n,"readystatechange"),4==Jo(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(jE)[1]||null;if(!i&&Ht.self&&Ht.self.location){var u=Ht.self.location.protocol;i=u.substr(0,u.length-1)}r=!Dv.test(i?i.toLowerCase():"")}t=r}if(t)Si(n,"complete"),Si(n,"success");else{n.m=6;try{var c=2<Jo(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",ry(n)}}finally{yh(n)}}}function yh(n,e){if(n.g){iy(n);const t=n.g,r=n.C[0]?lc:null;n.g=null,n.C=null,e||Si(n,"ready");try{t.onreadystatechange=r}catch{}}}function iy(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function Jo(n){return n.g?n.g.readyState:0}function ZE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ty:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function sy(n){let e="";return iv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function oy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=sy(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function _h(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ay(n){this.Ca=0,this.i=[],this.j=new _p,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=_h("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=_h("baseRetryDelayMs",5e3,n),this.bb=_h("retryDelaySeedMs",1e4,n),this.$a=_h("forwardChannelMaxRetries",2,n),this.ta=_h("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new _c(n&&n.concurrentRequestLimit),this.Fa=new GE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function uy(n){if(Cv(n),3==n.G){var e=n.U++,t=Oa(n.F);Gn(t,"SID",n.I),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),Np(n,t),(e=new vs(n,n.j,e,void 0)).K=2,e.v=yc(Oa(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(t=Ht.navigator.sendBeacon(e.v.toString(),"")),!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ov(e.l,null),e.g.da(e.v)),e.F=Date.now(),Dp(e)}Nv(n)}function ly(n){n.g&&(Pp(n),n.g.cancel(),n.g=null)}function Cv(n){ly(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),Op(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function Rp(n){vc(n.h)||n.m||(n.m=!0,dv(n.Ja,n),n.C=0)}function Sv(n,e){var t;t=e?e.m:n.U++;const r=Oa(n.F);Gn(r,"SID",n.I),Gn(r,"RID",t),Gn(r,"AID",n.T),Np(n,r),n.o&&n.s&&oy(r,n.o,n.s),t=new vs(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Tv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Uu(n.h,t),Ip(t,r,e)}function Np(n,e){n.ia&&iv(n.ia,function(t,r){Gn(e,r,t)}),n.l&&Zm({},function(t,r){Gn(e,r,t)})}function Tv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ti(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let I=i[y].h;const S=i[y].g;if(I-=u,0>I)u=Math.max(0,i[y].h-100),f=!1;else try{zE(S,c,"req"+I+"_")}catch{r&&r(S)}}if(f){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Av(n){n.g||n.u||(n.Z=1,dv(n.Ia,n),n.A=0)}function cy(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=ku(ti(n.Ia,n),Rv(n,n.A)),n.A++,0))}function Pp(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Mv(n){n.g=new vs(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Oa(n.sa);Gn(e,"RID","rpc"),Gn(e,"SID",n.I),Gn(e,"CI",n.L?"0":"1"),Gn(e,"AID",n.T),Gn(e,"TYPE","xmlhttp"),Np(n,e),n.o&&n.s&&oy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=yc(Oa(e)),t.s=null,t.P=!0,vv(t,n)}function Op(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function xv(n,e){var t=null;if(n.g==e){Op(n),Pp(n),n.g=null;var r=2}else{if(!Vu(n.h,e))return;t=e.D,Ec(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Si(r=Um(),new FE(r,t)),Rp(n)}else Av(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function YE(n,e){return!(wc(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=ku(ti(n.Ja,n,e),Rv(n,n.C)),n.C++,0)))}(n,e)||2==r&&cy(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Bu(n,5);break;case 4:Bu(n,10);break;case 3:Bu(n,6);break;default:Bu(n,2)}}function Rv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ti(n.kb,n);t||(t=new mc("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||Ym(t,"https"),yc(t)),function qE(n,e){const t=new _p;if(Ht.Image){const r=new Image;r.onload=J_(Tp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=J_(Tp,t,r,"TestLoadImage: error",!1,e),r.onabort=J_(Tp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=J_(Tp,t,r,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Li(2);n.G=0,n.l&&n.l.va(e),Nv(n),Cv(n)}function Nv(n){if(n.G=0,n.la=[],n.l){const e=bv(n.h);(0!=e.length||0!=n.i.length)&&(Cm(n.la,e),Cm(n.la,n.i),n.h.i.length=0,pp(n.i),n.i.length=0),n.l.ua()}}function Pv(n,e,t){var r=t instanceof mc?Oa(t):new mc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Qm(r,r.m);else{var i=Ht.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new mc(null,void 0);r&&Ym(u,r),e&&(u.g=e),i&&Qm(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Gn(r,t,e),Gn(r,"VER",n.ma),Np(n,r),r}function Ov(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jn(t&&n.Da&&!n.ra?new gh({jb:!0}):n.ra)).Ka(n.H),e}function tS(){}function dy(){if(dc&&!(10<=Number(Pu)))throw Error("Environmental error: no available transport.")}function Es(n,e){ii.call(this),this.g=new ay(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Sm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zn(this)}function kv(n){$m.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function QE(){Hm.call(this),this.status=1}function zn(n){this.g=n}(at=Jn.prototype).Ka=function(n){this.L=n},at.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gm.g(),this.C=function jm(n){return n.h||(n.h=n.i())}(this.u?this.u:Gm),this.g.onreadystatechange=ti(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void xp(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Ht.FormData&&n instanceof Ht.FormData,!(0<=fp(eS,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{iy(this),0<this.B&&((this.K=function ny(n){return dc&&function ZM(){return function VC(n){var e=KM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=bE(String(nv)).split("."),t=bE("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=X_(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||X_(0==i[2].length,0==u[2].length)||X_(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.qa,this)):this.A=gv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){xp(this,u)}},at.qa=function(){typeof bm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Si(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Si(this,"complete"),Si(this,"abort"),yh(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yh(this,!0)),Jn.X.M.call(this)},at.Ha=function(){this.s||(this.F||this.v||this.l?KE(this):this.fb())},at.fb=function(){KE(this)},at.aa=function(){try{return 2<Jo(this)?this.g.status:-1}catch{return-1}},at.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),XC(e)}},at.Ea=function(){return this.m},at.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=ay.prototype).ma=8,at.G=1,at.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new vs(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Pa(u),xE(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Tv(this,i,e),Gn(t=Oa(this.F),"RID",n),Gn(t,"CVER",22),this.D&&Gn(t,"X-HTTP-Session-Id",this.D),Np(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(sy(u)))+"&"+e:this.o&&oy(t,this.o,u)),Uu(this.h,i),this.Ya&&Gn(t,"TYPE","init"),this.O?(Gn(t,"$req",e),Gn(t,"SID","null"),i.Z=!0,Ip(i,t,null)):Ip(i,t,e),this.G=2}}else 3==this.G&&(n?Sv(this,n):0==this.i.length||vc(this.h)||Sv(this))},at.Ia=function(){if(this.u=null,Mv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ku(ti(this.eb,this),n)}},at.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Li(10),ly(this),Mv(this))},at.cb=function(){null!=this.v&&(this.v=null,ly(this),cy(this),Li(19))},at.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Li(2)):(this.j.info("Failed to ping google.com"),Li(1))},(at=tS.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Ra=function(){},dy.prototype.g=function(n,e){return new Es(n,e)},ni(Es,ii),Es.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Li(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Pv(n,null,n.V),Rp(n)},Es.prototype.close=function(){uy(this.g)},Es.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Fm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Rp(e)},Es.prototype.M=function(){this.g.l=null,delete this.j,uy(this.g),delete this.g,Es.X.M.call(this)},ni(kv,$m),ni(QE,Hm),ni(zn,tS),zn.prototype.xa=function(){Si(this.g,"a")},zn.prototype.wa=function(n){Si(this.g,new kv(n))},zn.prototype.va=function(n){Si(this.g,new QE)},zn.prototype.ua=function(){Si(this.g,"b")},dy.prototype.createWebChannel=dy.prototype.g,Es.prototype.send=Es.prototype.u,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,lh.NO_ERROR=0,lh.TIMEOUT=8,lh.HTTP_ERROR=6,wp.COMPLETE="complete",KC.EventType=ch,ch.OPEN="a",ch.CLOSE="b",ch.ERROR="c",ch.MESSAGE="d",ii.prototype.listen=ii.prototype.N,Jn.prototype.listenOnce=Jn.prototype.O,Jn.prototype.getLastError=Jn.prototype.Oa,Jn.prototype.getLastErrorCode=Jn.prototype.Ea,Jn.prototype.getStatus=Jn.prototype.aa,Jn.prototype.getResponseJson=Jn.prototype.Sa,Jn.prototype.getResponseText=Jn.prototype.fa,Jn.prototype.send=Jn.prototype.da,Jn.prototype.setWithCredentials=Jn.prototype.Ka;var JE=Nu.createWebChannelTransport=function(){return new dy},nS=Nu.getStatEventTarget=function(){return Um()},Fv=Nu.ErrorCode=lh,XE=Nu.EventType=wp,rS=Nu.Event=uh,Lv=Nu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eI=Nu.FetchXmlHttpFactory=gh,Fa=Nu.WebChannel=KC,iS=Nu.XhrIo=Jn;const tI="@firebase/firestore";class Hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");let vh="9.19.0";const La=new uc.Yd("@firebase/firestore");function nI(){return La.logLevel}function Oe(n,...e){if(La.logLevel<=uc.in.DEBUG){const t=e.map(Vv);La.debug(`Firestore (${vh}): ${n}`,...t)}}function _n(n,...e){if(La.logLevel<=uc.in.ERROR){const t=e.map(Vv);La.error(`Firestore (${vh}): ${n}`,...t)}}function Xo(n,...e){if(La.logLevel<=uc.in.WARN){const t=e.map(Vv);La.warn(`Firestore (${vh}): ${n}`,...t)}}function Vv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function qe(n="Unexpected state"){const e=`FIRESTORE (${vh}) INTERNAL ASSERTION FAILED: `+n;throw _n(e),new Error(e)}function rt(n,e){n||qe()}function ze(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ln.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class iI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hr.UNAUTHENTICATED))}shutdown(){}}class Uv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kp{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let c=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Gr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const I=c;e.enqueueRetryable((0,me.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},y=I=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(I=>y(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?y(I):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Gr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new iI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Hr(e)}}class oS{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class sI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new oS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aI{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.T=t.token,new oI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hy(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class uI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hy(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Ic(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function fy(n){return n+"\0"}class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new xn(0,0))}static max(){return new It(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wh{constructor(e,t,r){void 0===t?t=0:t>e.length&&qe(),void 0===r?r=e.length-t:r>e.length-t&&qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends wh{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const lI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends wh{construct(e,t,r){return new Xn(e,t,r)}static isValidIdentifier(e){return lI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new xe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new xe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new xe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new xe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(t)}static emptyPath(){return new Xn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(sn.fromString(e))}static fromName(e){return new Ge(sn.fromString(e).popFirst(5))}static empty(){return new Ge(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new sn(e.slice()))}}class Fp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function py(n){return n.fields.find(e=>2===e.kind)}function bc(n){return n.fields.filter(e=>2!==e.kind)}Fp.UNKNOWN_ID=-1;class gy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lp(0,Is.min())}}function cI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new xn(t+1,0):new xn(t,r));return new Is(i,Ge.empty(),e)}function dI(n){return new Is(n.readTime,n.key,-1)}class Is{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Is(It.min(),Ge.empty(),-1)}static max(){return new Is(It.max(),Ge.empty(),-1)}}function Bv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const hI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ju(n){return jv.apply(this,arguments)}function jv(){return jv=(0,me.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==hI)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),jv.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const u=e.length,c=new Array(u);let f=0;for(let y=0;y<u;y++){const I=y;t(e[I]).next(S=>{c[I]=S,++f,f===u&&r(c)},S=>i(S))}})}static doWhile(e,t){return new ne((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class my{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Gr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Vp(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=yy(r.target.error);this.R.reject(new Vp(e,i))}}static open(e,t,r,i){try{return new my(t,e.transaction(i,r))}catch(u){throw new Vp(t,u)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pI(t)}}class mo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===mo.S((0,ln.z$)())&&_n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),$u(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ln.hl)())return!1;if(mo.C())return!0;const e=(0,ln.z$)(),t=mo.S(e),r=0<t&&t<10,i=mo.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,me.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Vp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new xe(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new xe(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Vp(e,f))},u.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.M(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.$(e);const y=my.open(u.db,e,c?"readonly":"readwrite",r),I=i(y).next(S=>(y.P(),S)).catch(S=>(y.abort(S),ne.reject(S))).toPromise();return I.catch(()=>{}),yield y.v,I}catch(y){const I=y,S="FirebaseError"!==I.name&&f<3;if(Oe("SimpleDb","Transaction failed with error:",I.message,"Retrying:",S),u.close(),!S)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class cS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $u(this.L.delete())}}class Vp extends xe{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Va(n){return"IndexedDbTransactionError"===n.name}class pI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$u(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),$u(this.store.add(e))}get(e){return $u(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),$u(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),$u(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ne((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,c,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=u=>{const c=yy(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new cS(f),I=t(f.primaryKey,f.value,y);if(I instanceof ne){const S=I.catch(M=>(y.done(),ne.reject(M)));r.push(S)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $u(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=yy(r.target.error);t(i)}})}let $v=!1;function yy(n){const e=mo.S((0,ln.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $v||($v=!0,setTimeout(()=>{throw r},0)),r}}return n}class gI{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Va(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ju(r)}yield t.et(6e4)}))}}class mI{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ne.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Oe("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,u)).next(f=>(Oe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=dI(u);Bv(c,r)>0&&(r=c)}),new Is(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Qi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Eh(n){return null==n}function Ih(n){return 0===n&&1/n==-1/0}function Hv(n){return"number"==typeof n&&Number.isInteger(n)&&!Ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function wr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yI(e)),e=dS(n.get(t),e);return yI(e)}function dS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function yI(n){return n+"\x01\x01"}function Vi(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&qe(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:qe()}u=c+2}return new sn(r)}const hS=["userId","batchId"];function bh(n,e){return[n,wr(e)]}function fS(n,e,t){return[n,wr(e),t]}const _I={},vI=["prefixPath","collectionGroup","readTime","documentId"],QM=["prefixPath","collectionGroup","documentId"],Pt=["collectionGroup","readTime","prefixPath","documentId"],pS=["canonicalId","targetId"],gS=["targetId","path"],mS=["path","targetId"],Dh=["collectionId","parent"],yS=["indexId","uid"],_y=["uid","sequenceNumber"],vy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lr=["indexId","uid","orderedDocumentKey"],JM=["userId","collectionPath","documentId"],wI=["userId","collectionPath","largestBatchId"],EI=["userId","collectionGroup","largestBatchId"],II=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bI=[...II,"documentOverlays"],Gv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zv=Gv,DI=[...zv,"indexConfiguration","indexState","indexEntries"];class qv extends fI{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function si(n,e){const t=ze(n);return mo.O(t.at,e)}function CI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class cr{constructor(e,t){this.comparator=e,this.root=t||Or.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wy(this.root,e,this.comparator,!1)}getReverseIterator(){return new wy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wy(this.root,e,this.comparator,!0)}}class wy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Or.RED,this.left=i??Or.EMPTY,this.right=u??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Or(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qe();const e=this.left.check();if(e!==this.right.check())throw qe();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1,Or.EMPTY=new class{constructor(){this.size=0}get key(){throw qe()}get value(){throw qe()}get color(){throw qe()}get left(){throw qe()}get right(){throw qe()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Or(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wv(this.data.getIterator())}getIteratorFrom(e){return new Wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class Wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dc(n){return n.hasNext()?n.getNext():void 0}class Ji{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new In(Xn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Up extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Up("Invalid base64 string: "+i):i}}(e);return new zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const _S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hu(n){if(rt(!!n),"string"==typeof n){let e=0;const t=_S.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gu(n){return"string"==typeof n?zr.fromBase64String(n):zr.fromUint8Array(n)}function Ey(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function TI(n){const e=n.mapValue.fields.__previous_value__;return Ey(e)?TI(e):e}function Ch(n){const e=Hu(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}class vS{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class zu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}const Cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kv={nullValue:"NULL_VALUE"};function Sh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ey(n)?4:RI(n)?9007199254740991:10:qe()}function Ua(n,e){if(n===e)return!0;const t=Sh(n);if(t!==Sh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ch(n).isEqual(Ch(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Hu(r.timestampValue),c=Hu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Gu(n.bytesValue).isEqual(Gu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return er(r.geoPointValue.latitude)===er(i.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return er(r.integerValue)===er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=er(r.doubleValue),c=er(i.doubleValue);return u===c?Ih(u)===Ih(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Ic(n.arrayValue.values||[],e.arrayValue.values||[],Ua);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(CI(u)!==CI(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!Ua(u[f],c[f])))return!1;return!0}(n,e);default:return qe()}var i}function Th(n,e){return void 0!==(n.values||[]).find(t=>Ua(t,e))}function _o(n,e){if(n===e)return 0;const t=Sh(n),r=Sh(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=er(i.integerValue||i.doubleValue),f=er(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return AI(n.timestampValue,e.timestampValue);case 4:return AI(Ch(n),Ch(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Gu(i),f=Gu(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const I=Gt(c[y],f[y]);if(0!==I)return I}return Gt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Gt(er(i.latitude),er(u.latitude));return 0!==c?c:Gt(er(i.longitude),er(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const I=_o(c[y],f[y]);if(I)return I}return Gt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Cc.mapValue&&u===Cc.mapValue)return 0;if(i===Cc.mapValue)return 1;if(u===Cc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=u.fields||{},I=Object.keys(y);f.sort(),I.sort();for(let S=0;S<f.length&&S<I.length;++S){const M=Gt(f[S],I[S]);if(0!==M)return M;const L=_o(c[f[S]],y[I[S]]);if(0!==L)return L}return Gt(f.length,I.length)}(n.mapValue,e.mapValue);default:throw qe()}}function AI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Hu(n),r=Hu(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function Ah(n){return Iy(n)}function Iy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Hu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gu(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=Iy(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${Iy(r.fields[f])}`;return u+"}"}(n.mapValue):qe();var e}function vo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zv(n){return!!n&&"integerValue"in n}function jp(n){return!!n&&"arrayValue"in n}function MI(n){return!!n&&"nullValue"in n}function xI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function by(n){return!!n&&"mapValue"in n}function Mh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wS(n){return"nullValue"in n?Kv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vo(zu.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:qe()}function $p(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vo(zu.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cc:qe()}function NI(n,e){const t=_o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Yv(n,e){const t=_o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!by(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mh(t)}setAll(e){let t=Xn.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Mh(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());by(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];by(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yo(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new oi(Mh(this.value))}}function Qv(n){const e=[];return yo(n.fields,(t,r)=>{const i=new Xn([t]);if(by(r)){const u=Qv(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Ji(e)}class Un{constructor(e,t,r,i,u,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Un(e,0,It.min(),It.min(),It.min(),oi.empty(),0)}static newFoundDocument(e,t,r,i){return new Un(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new Un(e,2,t,It.min(),It.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,It.min(),It.min(),oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ba{constructor(e,t){this.position=e,this.inclusive=t}}function PI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):_o(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Dy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ua(n.position[t],e.position[t]))return!1;return!0}class xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function OI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Jv{}class tn extends Jv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ES(e,t,r):"array-contains"===t?new UI(e,r):"in"===t?new n0(e,r):"not-in"===t?new DS(e,r):"array-contains-any"===t?new CS(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new IS(e,r):new bS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_o(t,this.value)):null!==t&&Sh(this.value)===Sh(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bn extends Jv{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new bn(e,t)}matches(e){return Rh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Rh(n){return"and"===n.op}function Hp(n){return"or"===n.op}function Xv(n){return e0(n)&&Rh(n)}function e0(n){for(const e of n.filters)if(e instanceof bn)return!1;return!0}function t0(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Ah(n.value);if(Xv(n))return n.filters.map(e=>t0(e)).join(",");{const e=n.filters.map(t=>t0(t)).join(",");return`${n.op}(${e})`}}function kI(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&Ua(t.value,r.value)):n instanceof bn?function(t,r){return r instanceof bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,c)=>i&&kI(u,r.filters[c]),!0)}(n,e):void qe();var t,r}function FI(n,e){const t=n.filters.concat(e);return bn.create(t,n.op)}function LI(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${Ah(e.value)}`:n instanceof bn?function(e){return e.op.toString()+" {"+e.getFilters().map(LI).join(" ,")+"}"}(n):"Filter";var e}class ES extends tn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class IS extends tn{constructor(e,t){super(e,"in",t),this.keys=VI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bS extends tn{constructor(e,t){super(e,"not-in",t),this.keys=VI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class UI extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jp(t)&&Th(t.arrayValue,this.value)}}class n0 extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Th(this.value.arrayValue,t)}}class DS extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Th(this.value.arrayValue,t)}}class CS extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Th(this.value.arrayValue,r))}}class BI{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.ft=null}}function r0(n,e=null,t=[],r=[],i=null,u=null,c=null){return new BI(n,e,t,r,i,u,c)}function Sc(n){const e=ze(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>t0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ah(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ah(r)).join(",")),e.ft=t}return e.ft}function Gp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dy(n.startAt,e.startAt)&&Dy(n.endAt,e.endAt)}function Nh(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ph(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function s0(n,e,t){let r=Kv,i=!0;for(const u of Ph(n,e)){let c=Kv,f=!0;switch(u.op){case"<":case"<=":c=wS(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=Kv}NI({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];NI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Cy(n,e,t){let r=Cc,i=!0;for(const u of Ph(n,e)){let c=Cc,f=!0;switch(u.op){case">=":case">":c=$p(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=Cc}Yv({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Yv({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ja{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this.dt=null,this.wt=null}}function jI(n,e,t,r,i,u,c,f){return new ja(n,e,t,r,i,u,c,f)}function qu(n){return new ja(n)}function $I(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Sy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $a(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ty(n){return null!==n.collectionGroup}function Tc(n){const e=ze(n);if(null===e.dt){e.dt=[];const t=$a(e),r=Sy(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new xh(t)),e.dt.push(new xh(Xn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new xh(Xn.keyField(),u))}}}return e.dt}function Xi(n){const e=ze(n);if(!e.wt)if("F"===e.limitType)e.wt=r0(e.path,e.collectionGroup,Tc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Tc(e))t.push(new xh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ba(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ba(e.startAt.position,e.startAt.inclusive):null;e.wt=r0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Ay(n,e){e.getFirstInequalityField(),$a(n);const t=n.filters.concat([e]);return new ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Oh(n,e,t){return new ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zp(n,e){return Gp(Xi(n),Xi(e))&&n.limitType===e.limitType}function My(n){return`${Sc(Xi(n))}|lt:${n.limitType}`}function o0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>LI(r)).join(", ")}]`),Eh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ah(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ah(r)).join(",")),`Target(${t})`}(Xi(n))}; limitType=${n.limitType})`}function kh(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Tc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=PI(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,Tc(t),r)||t.endAt&&!function(i,u,c){const f=PI(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,Tc(t),r)));var t,r}function xy(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function a0(n){return(e,t)=>{let r=!1;for(const i of Tc(n)){const u=HI(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function HI(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?_o(f,y):qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe()}}class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return SI(this.inner)}size(){return this.innerSize}}const GI=new cr(Ge.comparator);function es(){return GI}const zI=new cr(Ge.comparator);function qp(...n){let e=zI;for(const t of n)e=e.insert(t.key,t);return e}function qI(n){let e=zI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wo(){return Fh()}function SS(){return Fh()}function Fh(){return new Ha(n=>n.toString(),(n,e)=>n.isEqual(e))}const TS=new cr(Ge.comparator),AS=new In(Ge.comparator);function Yt(...n){let e=AS;for(const t of n)e=e.add(t);return e}const XM=new In(Gt);function Ry(){return XM}function WI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function KI(n){return{integerValue:""+n}}function u0(n,e){return Hv(e)?KI(e):WI(n,e)}class Ny{constructor(){this._=void 0}}function MS(n,e,t){return n instanceof Lh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Wu?YI(n,e):n instanceof Ac?Vh(n,e):function(r,i){const u=ZI(r,i),c=l0(u)+l0(r._t);return Zv(u)&&Zv(r._t)?KI(c):WI(r.serializer,c)}(n,e)}function xS(n,e,t){return n instanceof Wu?YI(n,e):n instanceof Ac?Vh(n,e):t}function ZI(n,e){return n instanceof Mc?Zv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lh extends Ny{}class Wu extends Ny{constructor(e){super(),this.elements=e}}function YI(n,e){const t=c0(e);for(const r of n.elements)t.some(i=>Ua(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ac extends Ny{constructor(e){super(),this.elements=e}}function Vh(n,e){let t=c0(e);for(const r of n.elements)t=t.filter(i=>!Ua(i,r));return{arrayValue:{values:t}}}class Mc extends Ny{constructor(e,t){super(),this.serializer=e,this._t=t}}function l0(n){return er(n.integerValue||n.doubleValue)}function c0(n){return jp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Uh{constructor(e,t){this.field=e,this.transform=t}}class RS{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function d0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Py{}function JI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ea(n.key,qn.none()):new jh(n.key,n.data,qn.none());{const t=n.data,r=oi.empty();let i=new In(Xn.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new Eo(n.key,r,new Ji(i.toArray()),qn.none())}}function NS(n,e,t){n instanceof jh?function(r,i,u){const c=r.value.clone(),f=XI(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Eo?function(r,i,u){if(!d0(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=XI(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(Io(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wp(n,e,t,r){return n instanceof jh?function(i,u,c,f){if(!d0(i.precondition,u))return c;const y=i.value.clone(),I=Oy(i.fieldTransforms,f,u);return y.setAll(I),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Eo?function(i,u,c,f){if(!d0(i.precondition,u))return c;const y=Oy(i.fieldTransforms,f,u),I=u.data;return I.setAll(Io(i)),I.setAll(y),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(c=t,d0(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function PS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=ZI(r.transform,i||null);null!=u&&(null===t&&(t=oi.empty()),t.set(r.field,u))}return t||null}function Bh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ic(t,r,(i,u)=>function QI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wu&&r instanceof Wu||t instanceof Ac&&r instanceof Ac?Ic(t.elements,r.elements,Ua):t instanceof Mc&&r instanceof Mc?Ua(t._t,r._t):t instanceof Lh&&r instanceof Lh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jh extends Py{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Eo extends Py{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Io(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function XI(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,xS(c,f,t[i]))}return r}function Oy(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,MS(u,c,e))}return r}class ea extends Py{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h0 extends Py{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class f0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&NS(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=SS();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let f=this.applyToLocalView(c,u.mutatedFields);f=t.has(i.key)?null:f;const y=JI(c,f);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,(t,r)=>Bh(t,r))&&Ic(this.baseMutations,e.baseMutations,(t,r)=>Bh(t,r))}}class p0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=TS;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new p0(e,t,r,i)}}class $h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eb{constructor(e){this.count=e}}var Er,nn;function m0(n){switch(n){default:return qe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function tb(n){if(void 0===n)return _n("GRPC error has no .code"),se.UNKNOWN;switch(n){case Er.OK:return se.OK;case Er.CANCELLED:return se.CANCELLED;case Er.UNKNOWN:return se.UNKNOWN;case Er.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Er.INTERNAL:return se.INTERNAL;case Er.UNAVAILABLE:return se.UNAVAILABLE;case Er.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Er.NOT_FOUND:return se.NOT_FOUND;case Er.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Er.ABORTED:return se.ABORTED;case Er.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Er.DATA_LOSS:return se.DATA_LOSS;default:return qe()}}(nn=Er||(Er={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class y0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return _0}static getOrCreateInstance(){return null===_0&&(_0=new y0),_0}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let _0=null;class xc{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xc(It.min(),i,Ry(),es(),Yt())}}class Rc{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rc(r,t,Yt(),Yt(),Yt())}}class Kp{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class Fy{constructor(e,t){this.targetId=e,this.Et=t}}class Ly{constructor(e,t,r=zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nb{constructor(){this.At=0,this.Rt=ib(),this.vt=zr.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=Yt(),t=Yt(),r=Yt();return this.Rt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:qe()}}),new Rc(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=ib()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class kS{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=es(),this.qt=rb(),this.Ut=new In(Gt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,u=this.Yt(r);if(u){const c=u.target;if(Nh(c))if(0===i){const f=new Ge(c.path);this.Qt(r,f,Un.newNoDocument(f,It.min()))}else rt(1===i);else{const f=this.Zt(r);f!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=y0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:f,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((u,c)=>{const f=this.Yt(c);if(f){if(u.current&&Nh(f.target)){const y=new Ge(f.target.path);null!==this.Lt.get(y)||this.te(c,y)||this.Qt(c,y,Un.newNoDocument(y,e))}u.St&&(t.set(c,u.Ct()),u.xt())}});let r=Yt();this.qt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const I=this.Yt(y);return!I||2===I.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.Lt.forEach((u,c)=>c.setReadTime(e));const i=new xc(e,t,this.Ut,this.Lt,r);return this.Lt=es(),this.qt=rb(),this.Ut=new In(Gt),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new nb,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new In(Gt),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new nb),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function rb(){return new cr(Ge.comparator)}function ib(){return new cr(Ge.comparator)}const sb={asc:"ASCENDING",desc:"DESCENDING"},v0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ob={and:"AND",or:"OR"};class ab{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FS(n,e){return Nc(n,e.toTimestamp())}function dr(n){return rt(!!n),It.fromTimestamp(function(e){const t=Hu(e);return new xn(t.seconds,t.nanos)}(n))}function Vy(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ub(n){const e=sn.fromString(n);return rt(_b(e)),e}function Hh(n,e){return Vy(n.databaseId,e.path)}function ta(n,e){const t=ub(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(lb(t))}function _i(n,e){return Vy(n.databaseId,e)}function Pc(n){const e=ub(n);return 4===e.length?sn.emptyPath():lb(e)}function Zp(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lb(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function LS(n,e,t){return{name:Hh(n,e),fields:t.value.mapValue.fields}}function VS(n,e,t){const r=ta(n,e.name),i=dr(e.updateTime),u=e.createTime?dr(e.createTime):It.min(),c=new oi({mapValue:{fields:e.fields}}),f=Un.newFoundDocument(r,i,u,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Ga(n,e){let t;if(e instanceof jh)t={update:LS(n,e.key,e.value)};else if(e instanceof ea)t={delete:Hh(n,e.key)};else if(e instanceof Eo)t={update:LS(n,e.key,e.data),updateMask:yb(e.fieldMask)};else{if(!(e instanceof h0))return qe();t={verify:Hh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Lh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ac)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mc)return{fieldPath:u.field.canonicalString(),increment:c._t};throw qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:FS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:qe()),t;var i}function E0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qn.updateTime(dr(i.updateTime)):void 0!==i.exists?qn.exists(i.exists):qn.none():qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(rt("REQUEST_TIME"===c.setToServerValue),f=new Lh):"appendMissingElements"in c?f=new Wu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Ac(c.removeAllFromArray.values||[]):"increment"in c?f=new Mc(u,c.increment):qe();const y=Xn.fromServerFormat(c.fieldPath);return new Uh(y,f)}(n,i)):[];var i;if(e.update){const i=ta(n,e.update.name),u=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ji((e.updateMask.fieldPaths||[]).map(I=>Xn.fromServerFormat(I)));return new Eo(i,u,c,t,r)}return new jh(i,u,t,r)}if(e.delete){const i=ta(n,e.delete);return new ea(i,t)}if(e.verify){const i=ta(n,e.verify);return new h0(i,t)}return qe()}function hb(n,e){return{documents:[_i(n,e.path)]}}function Uy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_i(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_i(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return BS(bn.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(I=>{return{field:bo((S=I).field),direction:b0(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.useProto3Json||Eh(I)?I:{value:I});var I,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function fb(n){let e=Pc(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const M=pb(S);return M instanceof bn&&Xv(M)?M.getFilters():[M]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new xh(Ku((M=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(S){let M;return M="object"==typeof S?S.value:S,Eh(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new Ba((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new Ba(S.values||[],!S.before)}(t.endAt)),jI(e,i,c,u,f,"F",y,I)}function pb(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ku(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ku(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ku(e.unaryFilter.field);return tn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ku(e.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return qe()}}(n):void 0!==n.fieldFilter?tn.create(Ku((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qe()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return bn.create(e.compositeFilter.filters.map(t=>pb(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return qe()}}(e.compositeFilter.op))}(n):qe();var e}function b0(n){return sb[n]}function gb(n){return v0[n]}function mb(n){return ob[n]}function bo(n){return{fieldPath:n.canonicalString()}}function Ku(n){return Xn.fromServerFormat(n.fieldPath)}function BS(n){return n instanceof tn?function(e){if("=="===e.op){if(xI(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NAN"}};if(MI(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xI(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NOT_NAN"}};if(MI(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(e.field),op:gb(e.op),value:e.value}}}(n):n instanceof bn?function(e){const t=e.getFilters().map(r=>BS(r));return 1===t.length?t[0]:{compositeFilter:{op:mb(e.op),filters:t}}}(n):qe()}function yb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _b(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class za{constructor(e,t,r,i,u=It.min(),c=It.min(),f=zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Oc{constructor(e){this.se=e}}function D0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Gh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hh(i=n.se,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Nc(i,u.version.toTimestamp()),createTime:Nc(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zh(e.version)};else{if(!e.isUnknownDocument())return qe();r.unknownDocument={path:t.path.toArray(),version:zh(e.version)}}var i,u;return r}function Gh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kc(n){const e=new xn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function qh(n,e){const t=(e.baseMutations||[]).map(u=>E0(n.se,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>E0(n.se,u)),i=xn.fromMillis(e.localWriteTimeMs);return new f0(e.batchId,i,t,r)}function Yp(n){const e=kc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kc(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(rt(1===(i=n.query).documents.length),r=Xi(qu(Pc(i.documents[0])))):r=Xi(fb(n.query)),new za(r,n.targetId,0,n.lastListenSequenceNumber,e,t,zr.fromBase64String(n.resumeToken))}function vb(n,e){const t=zh(e.snapshotVersion),r=zh(e.lastLimboFreeSnapshotVersion);let i;i=Nh(e.target)?hb(n.se,e.target):Uy(n.se,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function C0(n){const e=fb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Oh(e,e.limit,"L"):e}function By(n,e){return new $h(e.largestBatchId,E0(n.se,e.overlayMutation))}function S0(n,e){const t=e.path.lastSegment();return[n,wr(e.path.popLast()),t]}function wb(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:zh(r.readTime),documentKey:wr(r.documentKey.path),largestBatchId:r.largestBatchId}}class Eb{getBundleMetadata(e,t){return T0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return T0(e).put({bundleId:(r=t).id,createTime:zh(dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ib(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:C0(i.bundledQuery),readTime:kc(i.readTime)};var i})}saveNamedQuery(e,t){return Ib(e).put({name:(r=t).name,readTime:zh(dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function T0(n){return si(n,"bundles")}function Ib(n){return si(n,"namedQueries")}class jy{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new jy(e,t.uid||"")}getOverlay(e,t){return Wh(e).get(S0(this.userId,t)).next(r=>r?By(this.serializer,r):null)}getOverlays(e,t){const r=wo();return ne.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new $h(t,c);i.push(this.re(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(wr(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Wh(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const i=wo(),u=wr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wh(e).j("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const I=By(this.serializer,y);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=wo();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wh(e).Z({index:"collectionGroupOverlayIndex",range:f},(y,I,S)=>{const M=By(this.serializer,I);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}re(e,t){return Wh(e).put(function(r,i,u){const[c,f,y]=S0(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ga(r.se,u.mutation)}}(this.serializer,this.userId,t))}}function Wh(n){return si(n,"documentOverlays")}class Fc{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),Ih(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Gu(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?RI(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):qe()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),Ge.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function bb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function A0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=bb(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Fc.pe=new Fc;class Db{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=A0(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=A0(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Cb{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class $S{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Qp{constructor(){this.Me=new Db,this.Fe=new Cb(this.Me),this.Be=new $S(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Kh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kh(this.indexId,this.documentKey,this.arrayValue,r)}}function qa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=HS(n.arrayValue,e.arrayValue),0!==t?t:(t=HS(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function HS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ex{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){rt(e.collectionGroup===this.collectionId);const t=py(e);if(void 0!==t&&!this.ze(t))return!1;const r=bc(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const c=r[i];if(!this.je(this.Ge,c)||!this.We(this.Ue[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ue.length||!this.We(this.Ue[u++],c))return!1}return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function GS(n){var e,t;if(rt(n instanceof tn||n instanceof bn),n instanceof tn){if(n instanceof n0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>tn.create(n.field,"==",u)))||[];return bn.create(i,"or")}return n}const r=n.filters.map(i=>GS(i));return bn.create(r,n.op)}function tx(n){if(0===n.getFilters().length)return[];const e=Ab(GS(n));return rt(zS(e)),Sb(e)||Tb(e)?[e]:e.getFilters()}function Sb(n){return n instanceof tn}function Tb(n){return n instanceof bn&&Xv(n)}function zS(n){return Sb(n)||Tb(n)||function(e){if(e instanceof bn&&Hp(e)){for(const t of e.getFilters())if(!Sb(t)&&!Tb(t))return!1;return!0}return!1}(n)}function Ab(n){if(rt(n instanceof tn||n instanceof bn),n instanceof tn)return n;if(1===n.filters.length)return Ab(n.filters[0]);const e=n.filters.map(r=>Ab(r));let t=bn.create(e,n.op);return t=Jp(t),zS(t)?t:(rt(t instanceof bn),rt(Rh(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>Zh(r,i)))}function Zh(n,e){let t;return rt(n instanceof tn||n instanceof bn),rt(e instanceof tn||e instanceof bn),t=n instanceof tn?e instanceof tn?bn.create([n,e],"and"):qS(n,e):e instanceof tn?qS(e,n):function(r,i){if(rt(r.filters.length>0&&i.filters.length>0),Rh(r)&&Rh(i))return FI(r,i.getFilters());const u=Hp(r)?r:i,c=Hp(r)?i:r,f=u.filters.map(y=>Zh(y,c));return bn.create(f,"or")}(n,e),Jp(t)}function qS(n,e){if(Rh(e))return FI(e,n.getFilters());{const t=e.filters.map(r=>Zh(n,r));return bn.create(t,"or")}}function Jp(n){if(rt(n instanceof tn||n instanceof bn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return Jp(e[0]);if(e0(n))return n;const t=e.map(i=>Jp(i)),r=[];return t.forEach(i=>{i instanceof tn?r.push(i):i instanceof bn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:bn.create(r,n.op)}class $y{constructor(){this.He=new Hy}addToCollectionParentIndex(e,t){return this.He.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Is.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Hy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(sn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(sn.comparator)).toArray()}}const Xp=new Uint8Array(0);class nx{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new Hy,this.Ye=new Ha(r=>Sc(r),(r,i)=>Gp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const u={collectionId:r,parent:wr(i)};return Gy(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[fy(t),""],!1,!0);return Gy(e).j(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Vi(c.parent))}return r})}addFieldIndex(e,t){const r=zy(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=Qh(e);return u.next(f=>{c.put(wb(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=zy(e),i=Qh(e),u=Yh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Yh(e);let i=!0;const u=new Map;return ne.forEach(this.Ze(t),c=>this.Xe(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=Yt();const f=[];return ne.forEach(u,(y,I)=>{var S;Oe("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${Sc(t)}`);const M=function(ut,Ct){const qt=py(Ct);if(void 0===qt)return null;for(const Kt of Ph(ut,qt.fieldPath))switch(Kt.op){case"array-contains-any":return Kt.value.arrayValue.values||[];case"array-contains":return[Kt.value]}return null}(I,y),L=function(ut,Ct){const qt=new Map;for(const Kt of bc(Ct))for(const Dn of Ph(ut,Kt.fieldPath))switch(Dn.op){case"==":case"in":qt.set(Kt.fieldPath.canonicalString(),Dn.value);break;case"not-in":case"!=":return qt.set(Kt.fieldPath.canonicalString(),Dn.value),Array.from(qt.values())}return null}(I,y),G=function(ut,Ct){const qt=[];let Kt=!0;for(const Dn of bc(Ct)){const Ti=0===Dn.kind?s0(ut,Dn.fieldPath,ut.startAt):Cy(ut,Dn.fieldPath,ut.startAt);qt.push(Ti.value),Kt&&(Kt=Ti.inclusive)}return new Ba(qt,Kt)}(I,y),Z=function(ut,Ct){const qt=[];let Kt=!0;for(const Dn of bc(Ct)){const Ti=0===Dn.kind?Cy(ut,Dn.fieldPath,ut.endAt):s0(ut,Dn.fieldPath,ut.endAt);qt.push(Ti.value),Kt&&(Kt=Ti.inclusive)}return new Ba(qt,Kt)}(I,y),ae=this.tn(y,I,G),be=this.tn(y,I,Z),We=this.en(y,I,L),yt=this.nn(y.indexId,M,ae,G.inclusive,be,Z.inclusive,We);return ne.forEach(yt,ut=>r.H(ut,t.limit).next(Ct=>{Ct.forEach(qt=>{const Kt=Ge.fromSegments(qt.documentKey);c.has(Kt)||(c=c.add(Kt),f.push(Kt))})}))}).next(()=>f)}return ne.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:tx(bn.create(e.filters,"and")).map(r=>r0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),I=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const L=t?this.sn(t[M/I]):Xp,G=this.rn(e,L,r[M%I],i),Z=this.on(e,L,u[M%I],c),ae=f.map(be=>this.rn(e,L,be,!0));S.push(...this.createRange(G,Z,ae))}return S}rn(e,t,r,i){const u=new Kh(e,Ge.empty(),t,r);return i?u:u.qe()}on(e,t,r,i){const u=new Kh(e,Ge.empty(),t,r);return i?u.qe():u}Xe(e,t){const r=new ex(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.Qe(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ne.forEach(i,u=>this.Xe(e,u).next(c=>{c?0!==r&&c.fields.length<function(f){let y=new In(Xn.comparator),I=!1;for(const S of f.filters)for(const M of S.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?I=!0:y=y.add(M.field));for(const S of f.orderBy)S.field.isKeyField()||(y=y.add(S.field));return y.size+(I?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new Qp;for(const i of bc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Le(i.kind);Fc.pe.oe(u,c)}return r.$e()}sn(e){const t=new Qp;return Fc.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new Qp;return Fc.pe.oe(vo(this.databaseId,t),r.Le(function(i){const u=bc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new Qp);let u=0;for(const c of bc(e)){const f=r[u++];for(const y of i)if(this.an(t,c.fieldPath)&&jp(f))i=this.hn(i,c,f);else{const I=y.Le(c.kind);Fc.pe.oe(f,I)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new Qp;y.seed(f.$e()),Fc.pe.oe(c,y.Le(t.kind)),u.push(y)}return u}an(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zy(e),i=Qh(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return ne.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(I,S){const M=S?new Lp(S.sequenceNumber,new Is(kc(S.readTime),new Ge(Vi(S.documentKey)),S.largestBatchId)):Lp.empty(),L=I.fields.map(([G,Z])=>new gy(Xn.fromServerFormat(G),Z));return new Fp(I.indexId,I.collectionGroup,L,M)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=zy(e),u=Qh(e);return this.fn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,y=>u.put(wb(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ne.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,y=>this.dn(e,i,y).next(I=>{const S=this.wn(u,y);return I.isEqual(S)?ne.resolve():this._n(e,u,y,I,S)}))))})}mn(e,t,r,i){return Yh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return Yh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=Yh(e);let u=new In(qa);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(c,f)=>{u=u.add(new Kh(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}wn(e,t){let r=new In(qa);const i=this.un(t,e);if(null==i)return r;const u=py(t);if(null!=u){const c=e.data.field(u.fieldPath);if(jp(c))for(const f of c.arrayValue.values||[])r=r.add(new Kh(t.indexId,e.key,this.sn(f),i))}else r=r.add(new Kh(t.indexId,e.key,Xp,i));return r}_n(e,t,r,i,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,I,S,M){const L=f.getIterator(),G=y.getIterator();let Z=Dc(L),ae=Dc(G);for(;Z||ae;){let be=!1,We=!1;if(Z&&ae){const yt=I(Z,ae);yt<0?We=!0:yt>0&&(be=!0)}else null!=Z?We=!0:be=!0;be?(S(ae),ae=Dc(G)):We?(M(Z),Z=Dc(L)):(Z=Dc(L),ae=Dc(G))}}(i,u,qa,f=>{c.push(this.mn(e,t,r,f))},f=>{c.push(this.gn(e,t,r,f))}),ne.waitFor(c)}fn(e){let t=1;return Qh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>qa(c,f)).filter((c,f,y)=>!f||0!==qa(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=qa(c,e),y=qa(c,t);if(0===f)i[0]=e.qe();else if(f>0&&y<0)i.push(c),i.push(c.qe());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2){if(this.yn(i[c],i[c+1]))return[];u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Xp,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Xp,[]]))}return u}yn(e,t){return qa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WS)}getMinOffset(e,t){return ne.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||qe())).next(WS)}}function Gy(n){return si(n,"collectionParents")}function Yh(n){return si(n,"indexEntries")}function zy(n){return si(n,"indexConfiguration")}function Qh(n){return si(n,"indexState")}function WS(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Bv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Is(e.readTime,e.documentKey,t)}const Mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xb(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Z({range:c},(S,M,L)=>(f++,L.delete()));u.push(y.next(()=>{rt(1===f)}));const I=[];for(const S of t.mutations){const M=fS(e,S.key.path,t.batchId);u.push(i.delete(M)),I.push(S.key)}return ne.waitFor(u).next(()=>I)}function Lc(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw qe();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class qy{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new qy(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vc(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=eg(e),c=Vc(e);return c.add({}).next(f=>{rt("number"==typeof f);const y=new f0(f,t,r,i),I=function(L,G,Z){const ae=Z.baseMutations.map(We=>Ga(L.se,We)),be=Z.mutations.map(We=>Ga(L.se,We));return{userId:G,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ae,mutations:be}}(this.serializer,this.userId,y),S=[];let M=new In((L,G)=>Gt(L.canonicalString(),G.canonicalString()));for(const L of i){const G=fS(this.userId,L.key.path,f);M=M.add(L.key.path.popLast()),S.push(c.put(I)),S.push(u.put(G,_I))}return M.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.pn[f]=y.keys()}),ne.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return Vc(e).get(t).next(r=>r?(rt(r.userId===this.userId),qh(this.serializer,r)):null)}In(e,t){return this.pn[t]?ne.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Vc(e).Z({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(rt(f.batchId>=r),u=qh(this.serializer,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vc(e).j("userMutationsIndex",t).next(r=>r.map(i=>qh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=bh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return eg(e).Z({range:i},(c,f,y)=>{const[I,S,M]=c,L=Vi(S);if(I===this.userId&&t.path.isEqual(L))return Vc(e).get(M).next(G=>{if(!G)throw qe();rt(G.userId===this.userId),u.push(qh(this.serializer,G))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Gt);const i=[];return t.forEach(u=>{const c=bh(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=eg(e).Z({range:f},(I,S,M)=>{const[L,G,Z]=I,ae=Vi(G);L===this.userId&&u.path.isEqual(ae)?r=r.add(Z):M.done()});i.push(y)}),ne.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=bh(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new In(Gt);return eg(e).Z({range:c},(y,I,S)=>{const[M,L,G]=y,Z=Vi(L);M===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add(G)):S.done()}).next(()=>this.Tn(e,f))}Tn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Vc(e).get(u).next(c=>{if(null===c)throw qe();rt(c.userId===this.userId),r.push(qh(this.serializer,c))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xb(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return eg(e).Z({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=Vi(u[1]);i.push(y)}else f.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return KS(e,this.userId,t)}An(e){return Rb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KS(n,e,t){const r=bh(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return eg(n).Z({range:u,Y:!0},(f,y,I)=>{const[S,M,L]=f;S===e&&M===i&&(c=!0),I.done()}).next(()=>c)}function Vc(n){return si(n,"mutations")}function eg(n){return si(n,"documentMutations")}function Rb(n){return si(n,"mutationQueues")}class Uc{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Uc(0)}static bn(){return new Uc(-1)}}class ZS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Uc(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>It.fromTimestamp(new xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tg(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return tg(e).Z((c,f)=>{const y=Yp(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>ne.waitFor(u)).next(()=>i)}forEachTarget(e,t){return tg(e).Z((r,i)=>{const u=Yp(i);t(u)})}Pn(e){return Nb(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}Vn(e,t){return Nb(e).put("targetGlobalKey",t)}Sn(e,t){return tg(e).put(vb(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return tg(e).Z({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const I=Yp(f);Gp(t,I.target)&&(u=I,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Wa(e);return t.forEach(c=>{const f=wr(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=Wa(e);return ne.forEach(t,u=>{const c=wr(u.path);return ne.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Wa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Wa(e);let u=Yt();return i.Z({range:r,Y:!0},(c,f,y)=>{const I=Vi(c[1]),S=new Ge(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=wr(t.path),i=IDBKeyRange.bound([r],[fy(r)],!1,!0);let u=0;return Wa(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([c,f],y,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}ne(e,t){return tg(e).get(t).next(r=>r?Yp(r):null)}}function tg(n){return si(n,"targets")}function Nb(n){return si(n,"targetGlobal")}function Wa(n){return si(n,"targetDocuments")}function M0([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class rx{constructor(e){this.Cn=e,this.buffer=new In(M0),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();M0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Do{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Va(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ju(r)}yield t.$n(3e5)}))}}class YS{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(Qi.ct);const r=new rx(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Mb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mb):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,u,c,f,y,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),nI()<=uc.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(I-y)+`ms\nTotal Duration: ${I-S}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class x0{constructor(e,t){this.db=e,this.garbageCollector=new YS(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return Wy(e,r)}removeReference(e,t,r){return Wy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Wy(e,t)}Kn(e,t){return function(r,i){let u=!1;return Rb(r).X(c=>KS(r,c,i).next(f=>(f&&(u=!0),ne.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Un(e,(c,f)=>{if(f<=t){const y=this.Kn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,It.min()),Wa(e).delete([0,wr(c.path)])))});i.push(y)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Wy(e,t)}Un(e,t){const r=Wa(e);let i,u=Qi.ct;return r.Z({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:I})=>{0===c?(u!==Qi.ct&&t(new Ge(Vi(i)),u),u=I,i=y):u=Qi.ct}).next(()=>{u!==Qi.ct&&t(new Ge(Vi(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wy(n,e){return Wa(n).put((r=n.currentSequenceNumber,{targetId:0,path:wr(e.path),sequenceNumber:r}));var r}class bs{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QS{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ka(e).put(r)}removeEntry(e,t,r){return Ka(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Gh(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return Ka(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Jh(t))},(i,u)=>{r=this.Qn(t,u)}).next(()=>r)}zn(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return Ka(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Jh(t))},(i,u)=>{r={document:this.Qn(t,u),size:Lc(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.jn(e,t,(i,u)=>{const c=this.Qn(i,u);r=r.insert(i,c)}).next(()=>r)}Wn(e,t){let r=es(),i=new cr(Ge.comparator);return this.jn(e,t,(u,c)=>{const f=this.Qn(u,c);r=r.insert(u,f),i=i.insert(u,Lc(c))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return ne.resolve();let i=new In(Ob);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Jh(i.first()),Jh(i.last())),c=i.getIterator();let f=c.getNext();return Ka(e).Z({index:"documentKeyIndex",range:u},(y,I,S)=>{const M=Ge.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;f&&Ob(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,I),f=c.hasNext()?c.getNext():null),f?S.G(Jh(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),Gh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ka(e).j(IDBKeyRange.bound(c,f,!0)).next(y=>{let I=es();for(const S of y){const M=this.Qn(Ge.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);M.isFoundDocument()&&(kh(t,M)||i.has(M.key))&&(I=I.insert(M.key,M))}return I})}getAllFromCollectionGroup(e,t,r,i){let u=es();const c=R0(t,r),f=R0(t,Is.max());return Ka(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,I,S)=>{const M=this.Qn(Ge.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new JS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Pb(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Gn(e,t){return Pb(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function jS(n,e){let t;if(e.document)t=VS(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=kc(e.noDocument.readTime);t=Un.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return qe();{const r=Ge.fromSegments(e.unknownDocument.path),i=kc(e.unknownDocument.version);t=Un.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new xn(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Un.newInvalidDocument(e)}}function Ky(n){return new QS(n)}class JS extends bs{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Ha(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new In((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Yn.get(u);if(t.push(this.Jn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=D0(this.Jn.serializer,c);i=i.add(u.path.popLast()),r+=Lc(y)-f.size,t.push(this.Jn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=D0(this.Jn.serializer,c.convertToNoDocument(It.min()));t.push(this.Jn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Jn.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((u,c)=>{this.Yn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Pb(n){return si(n,"remoteDocumentGlobal")}function Ka(n){return si(n,"remoteDocumentsV14")}function Jh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function R0(n,e){const t=e.documentKey.path.toArray();return[n,Gh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ob(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Gt(t[u],r[u]),i)return i;return i=Gt(t.length,r.length),i||(i=Gt(t[t.length-2],r[r.length-2]),i||Gt(t[t.length-1],r[r.length-1]))}class kb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class N0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Wp(r.mutation,i,Ji.empty(),xn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=wo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=qp();return u.forEach((f,y)=>{c=c.insert(f,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let u=es();const c=Fh(),f=Fh();return t.forEach((y,I)=>{const S=r.get(I.key);i.has(I.key)&&(void 0===S||S.mutation instanceof Eo)?u=u.insert(I.key,I):void 0!==S?(c.set(I.key,S.mutation.getFieldMask()),Wp(S.mutation,I,S.mutation.getFieldMask(),xn.now())):c.set(I.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((I,S)=>c.set(I,S)),t.forEach((I,S)=>{var M;return f.set(I,new kb(S,null!==(M=c.get(I))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Fh();let i=new cr((c,f)=>c-f),u=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(y=>{const I=t.get(y);if(null===I)return;let S=r.get(y)||Ji.empty();S=f.applyToLocalView(I,S),r.set(y,S);const M=(i.get(f.batchId)||Yt()).add(y);i=i.insert(f.batchId,M)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),I=y.key,S=y.value,M=SS();S.forEach(L=>{if(!u.has(L)){const G=JI(t.get(L),r.get(L));null!==G&&M.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,I,M))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ty(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ne.resolve(wo());let f=-1,y=u;return c.next(I=>ne.forEach(I,(S,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),u.get(S)?ne.resolve():this.remoteDocumentCache.getEntry(e,S).next(L=>{y=y.insert(S,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,y,I,Yt())).next(S=>({batchId:f,changes:qI(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=qp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=qp();return this.indexManager.getCollectionParents(e,i).next(c=>ne.forEach(c,f=>{const y=(I=t,S=f.child(i),new ja(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(I=>{I.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((f,y)=>{const I=y.getKey();null===u.get(I)&&(u=u.insert(I,Un.newInvalidDocument(I)))});let c=qp();return u.forEach((f,y)=>{const I=i.get(f);void 0!==I&&Wp(I.mutation,y,Ji.empty(),xn.now()),kh(t,y)&&(c=c.insert(f,y))}),c})}}class XS{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return ne.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:dr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:C0(r.bundledQuery),readTime:dr(r.readTime)}),ne.resolve();var r}}class Fb{constructor(){this.overlays=new cr(Ge.comparator),this.ts=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wo();return ne.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.re(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ts.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=wo(),u=t.length+1,c=new Ge(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,I=y.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new cr((I,S)=>I-S);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=wo(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const f=wo(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((I,S)=>f.set(I,S)),!(f.size()>=i)););return ne.resolve(f)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $h(t,r));let u=this.ts.get(t);void 0===u&&(u=Yt(),this.ts.set(t,u)),this.ts.set(t,u.add(r.key))}}class P0{constructor(){this.es=new In(kr.ns),this.ss=new In(kr.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new kr(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new kr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new Ge(new sn([])),r=new kr(t,e),i=new kr(t,e+1),u=[];return this.ss.forEachInRange([r,i],c=>{this.us(c),u.push(c.key)}),u}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new Ge(new sn([])),r=new kr(t,e),i=new kr(t,e+1);let u=Yt();return this.ss.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new kr(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kr{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return Ge.comparator(e.key,t.key)||Gt(e.ds,t.ds)}static rs(e,t){return Gt(e.ds,t.ds)||Ge.comparator(e.key,t.key)}}class Zu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new In(kr.ns)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new f0(u,t,r,i);this.mutationQueue.push(c);for(const f of i)this._s=this._s.add(new kr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),u=i<0?0:i;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kr(t,0),i=new kr(t,Number.POSITIVE_INFINITY),u=[];return this._s.forEachInRange([r,i],c=>{const f=this.gs(c.ds);u.push(f)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Gt);return t.forEach(i=>{const u=new kr(i,0),c=new kr(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([u,c],f=>{r=r.add(f.ds)})}),ne.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new kr(new Ge(u),0);let f=new In(Gt);return this._s.forEachWhile(y=>{const I=y.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(f=f.add(y.ds)),!0)},c),ne.resolve(this.ps(f))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return ne.forEach(t.mutations,i=>{const u=new kr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new kr(t,0),i=this._s.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Lb{constructor(e){this.Ts=e,this.docs=new cr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Un.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=es();const c=t.path,f=new Ge(c.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:I,value:{document:S}}=y.getNext();if(!c.isPrefixOf(I.path))break;I.path.length>c.length+1||Bv(dI(S),r)<=0||(i.has(S.key)||kh(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,r,i){qe()}Es(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new O0(this)}getSize(e){return ne.resolve(this.size)}}class O0 extends bs{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class Za{constructor(e){this.persistence=e,this.As=new Ha(t=>Sc(t),Gp),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Rs=0,this.vs=new P0,this.targetCount=0,this.bs=Uc.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),ne.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Sn(t),ne.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.As.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.As.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(u).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.vs.containsKey(t))}}class Vb{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Qi(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new Za(this),this.indexManager=new $y,this.remoteDocumentCache=new Lb(r=>this.referenceDelegate.Cs(r)),this.serializer=new Oc(t),this.xs=new XS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new Zu(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new ix(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(u=>this.referenceDelegate.ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Os(e,t){return ne.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class ix extends fI{constructor(e){super(),this.currentSequenceNumber=e}}class Zy{constructor(e){this.persistence=e,this.$s=new P0,this.Ms=null}static Fs(e){return new Zy(e)}get Bs(){if(this.Ms)return this.Ms;throw qe()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),ne.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Bs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Bs,r=>{const i=Ge.fromPath(r);return this.Ls(e,i).next(u=>{u||t.removeEntry(i,It.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return ne.or([()=>ne.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class eT{constructor(e){this.serializer=e}M(e,t,r,i){const u=new my("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hS,{unique:!0}),f.createObjectStore("documentMutations"),Ub(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Ub(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").j().next(I=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hS,{unique:!0});const S=y.store("mutations"),M=I.map(L=>S.put(L));return ne.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Us(u)))),r<7&&i>=7&&(c=c.next(()=>this.Ks(u))),r<8&&i>=8&&(c=c.next(()=>this.Gs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Qs(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:JM});y.createIndex("collectionPathOverlayIndex",wI,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",EI,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:vI});y.createIndex("documentKeyIndex",QM),y.createIndex("collectionGroupIndex",Pt)}(e)).next(()=>this.zs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.js(e,u))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:yS}).createIndex("sequenceNumberIndex",_y,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:vy}).createIndex("documentKeyIndex",lr,{unique:!1})}(e))),c}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Lc(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ne.forEach(f,y=>{rt(y.userId===u.userId);const I=qh(this.serializer,y);return xb(e,u.userId,I).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,f)=>{const y=new sn(c),I=[0,wr(y)];u.push(t.get(I).next(S=>S?ne.resolve():t.put({targetId:0,path:wr(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(u))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:Dh});const r=t.store("collectionParents"),i=new Hy,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:wr(y)})}};return t.store("remoteDocuments").Z({Y:!0},(c,f)=>{const y=new sn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([c,f,y],I)=>{const S=Vi(f);return u(S.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Yp(i),c=vb(this.serializer,u);return t.put(c)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(I=c,I.document?new Ge(sn.fromString(I.document.name).popFirst(5)):I.noDocument?Ge.fromSegments(I.noDocument.path):I.unknownDocument?Ge.fromSegments(I.unknownDocument.path):qe()).path.toArray();var I;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(S))}).next(()=>ne.waitFor(i))}js(e,t){const r=t.store("mutations"),i=Ky(this.serializer),u=new Vb(Zy.Fs,this.serializer.se);return r.j().next(c=>{const f=new Map;return c.forEach(y=>{var I;let S=null!==(I=f.get(y.userId))&&void 0!==I?I:Yt();qh(this.serializer,y).keys().forEach(M=>S=S.add(M)),f.set(y.userId,S)}),ne.forEach(f,(y,I)=>{const S=new Hr(I),M=jy.ie(this.serializer,S),L=u.getIndexManager(S),G=qy.ie(S,this.serializer,L,u.referenceDelegate);return new N0(i,G,M,L).recalculateAndSaveOverlaysForDocumentKeys(new qv(t,Qi.ct),y).next()})})}}function Ub(n){n.createObjectStore("targetDocuments",{keyPath:gS}).createIndex("documentTargetsIndex",mS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pS,{unique:!0}),n.createObjectStore("targetGlobal")}const k0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yy{constructor(e,t,r,i,u,c,f,y,I,S,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=u,this.window=c,this.document=f,this.Hs=I,this.Js=S,this.Ys=M,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=L=>Promise.resolve(),!Yy.D())throw new xe(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x0(this,i),this.si=t+"main",this.serializer=new Oc(y),this.ii=new mo(this.si,this.Ys,new eT(this.serializer)),this.Ds=new ZS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ky(this.serializer),this.xs=new Eb,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===S&&_n("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(se.FAILED_PRECONDITION,k0);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Qi(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ng(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Va(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return Qy(e).get("owner").next(t=>ne.resolve(this._i(t)))}mi(e){return ng(e).delete(this.clientId)}gi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=si(r,"clientMetadata");return i.j().next(u=>{const c=e.pi(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return ne.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?ne.resolve(!0):Qy(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new xe(se.FAILED_PRECONDITION,k0);return!1}}return!(!this.networkEnabled||!this.inForeground)||ng(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new qv(t,Qi.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>ng(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return qy.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nx(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return jy.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Ys)?DI:14===c?zv:13===c?Gv:12===c?bI:11===c?II:void qe();var c;let f;return this.ii.runTransaction(e,i,u,y=>(f=new qv(y,this.Vs?this.Vs.next():Qi.ct),"readwrite-primary"===t?this.li(f).next(I=>!!I||this.fi(f)).next(I=>{if(!I)throw _n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new xe(se.FAILED_PRECONDITION,hI);return r(f)}).next(I=>this.wi(f).next(()=>I)):this.Pi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Pi(e){return Qy(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(se.FAILED_PRECONDITION,k0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qy(e).put("owner",t)}static D(){return mo.D()}di(e){const t=Qy(e);return t.get("owner").next(r=>this._i(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(_n(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,ln.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _n("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){_n("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qy(n){return si(n,"owner")}function ng(n){return si(n,"clientMetadata")}function F0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Jy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=Yt(),i=Yt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Jy(e,t.fromCache,r,i)}}class tT{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(u=>u||this.ki(e,t,i,r)).next(u=>u||this.Oi(e,t))}Ni(e,t){if($I(t))return ne.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Oh(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Yt(...u);return this.xi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const I=this.$i(t,f);return this.Mi(t,I,c,y.readTime)?this.Ni(e,Oh(t,null,"F")):this.Fi(e,I,t,y)}))})))}ki(e,t,r,i){return $I(t)||i.isEqual(It.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(u=>{const c=this.$i(t,u);return this.Mi(t,c,r,i)?this.Oi(e,t):(nI()<=uc.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),o0(t)),this.Fi(e,c,t,cI(i,-1)))})}$i(e,t){let r=new In(a0(e));return t.forEach((i,u)=>{kh(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Oi(e,t){return nI()<=uc.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",o0(t)),this.xi.getDocumentsMatchingQuery(e,t,Is.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class L0{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new cr(Gt),this.qi=new Ha(u=>Sc(u),Gp),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N0(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function V0(n,e,t,r){return new L0(n,e,t,r)}function U0(n,e){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,me.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=Yt();for(const I of i){c.push(I.batchId);for(const S of I.mutations)y=y.add(S.key)}for(const I of u){f.push(I.batchId);for(const S of I.mutations)y=y.add(S.key)}return t.localDocuments.getDocuments(r,y).next(I=>({Qi:I,removedBatchIds:c,addedBatchIds:f}))})})}),Xy.apply(this,arguments)}function Bb(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Ki.newChangeBuffer({trackRemovals:!0});return function(c,f,y,I){const S=y.batch,M=S.keys();let L=ne.resolve();return M.forEach(G=>{L=L.next(()=>I.getEntry(f,G)).next(Z=>{const ae=y.docVersions.get(G);rt(null!==ae),Z.version.compareTo(ae)<0&&(S.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),I.addEntry(Z)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(f,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Yt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(f=f.add(c.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function B0(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function e_(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const f=[];e.targetChanges.forEach((S,M)=>{const L=i.get(M);if(!L)return;f.push(t.Ds.removeMatchingKeys(u,S.removedDocuments,M).next(()=>t.Ds.addMatchingKeys(u,S.addedDocuments,M)));let G=L.withSequenceNumber(u.currentSequenceNumber);var Z,ae,be;e.targetMismatches.has(M)?G=G.withResumeToken(zr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):S.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(S.resumeToken,r)),i=i.insert(M,G),ae=G,be=S,(0===(Z=L).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0)&&f.push(t.Ds.updateTargetData(u,G))});let y=es(),I=Yt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),f.push(rg(u,c,e.documentUpdates).next(S=>{y=S.zi,I=S.ji})),!r.isEqual(It.min())){const S=t.Ds.getLastRemoteSnapshotVersion(u).next(M=>t.Ds.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(S)}return ne.waitFor(f).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,I)).next(()=>y)}).then(u=>(t.Li=i,u))}function rg(n,e,t){let r=Yt(),i=Yt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=es();return t.forEach((f,y)=>{const I=u.get(f);y.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(It.min())?(e.removeEntry(f,y.readTime),c=c.insert(f,y)):!I.isValidDocument()||y.version.compareTo(I.version)>0||0===y.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(y),c=c.insert(f,y)):Oe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",I.version," Watch version:",y.version)}),{zi:c,ji:i}})}function jb(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xh(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(u=>u?(i=u,ne.resolve(i)):t.Ds.allocateTargetId(r).next(c=>(i=new za(e,c,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Bc(n,e,t){return t_.apply(this,arguments)}function t_(){return t_=(0,me.Z)(function*(n,e,t){const r=ze(n),i=r.Li.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Va(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),t_.apply(this,arguments)}function n_(n,e,t){const r=ze(n);let i=It.min(),u=Yt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,I){const S=ze(f),M=S.qi.get(I);return void 0!==M?ne.resolve(S.Li.get(M)):S.Ds.getTargetData(y,I)}(r,c,Xi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.Bi.getDocumentsMatchingQuery(c,e,t?i:It.min(),t?u:Yt())).next(f=>(rT(r,xy(e),f),{documents:f,Wi:u})))}function $b(n,e){const t=ze(n),r=ze(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(c=>c?c.target:null))}function nT(n,e){const t=ze(n),r=t.Ui.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,cI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rT(t,e,i),i))}function rT(n,e,t){let r=n.Ui.get(e)||It.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ui.set(e,r)}function j0(){return j0=(0,me.Z)(function*(n,e,t,r){const i=ze(n);let u=Yt(),c=es();for(const I of t){const S=e.Hi(I.metadata.name);I.document&&(u=u.add(S));const M=e.Ji(I);M.setReadTime(e.Yi(I.metadata.readTime)),c=c.insert(S,M)}const f=i.Ki.newChangeBuffer({trackRemovals:!0}),y=yield Xh(i,(I=r,Xi(qu(sn.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>rg(I,f,c).next(S=>(f.apply(I),S)).next(S=>i.Ds.removeMatchingKeysForTargetId(I,y.targetId).next(()=>i.Ds.addMatchingKeys(I,u,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,S.zi,S.ji)).next(()=>S.zi)))}),j0.apply(this,arguments)}function iT(n,e){return $0.apply(this,arguments)}function $0(){return $0=(0,me.Z)(function*(n,e,t=Yt()){const r=yield Xh(n,Xi(C0(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=dr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.xs.saveNamedQuery(u,e);const f=r.withResumeToken(zr.EMPTY_BYTE_STRING,c);return i.Li=i.Li.insert(f.targetId,f),i.Ds.updateTargetData(u,f).next(()=>i.Ds.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Ds.addMatchingKeys(u,t,r.targetId)).next(()=>i.xs.saveNamedQuery(u,e))})}),$0.apply(this,arguments)}function sT(n,e){return`firestore_clients_${n}_${e}`}function oT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gb(n,e){return`firestore_targets_${n}_${e}`}class H0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new xe(i.error.code,i.error.message))),c?new H0(e,t,i.state,u):(_n("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class r_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new xe(r.error.code,r.error.message))),u?new r_(e,r.state,i):(_n("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class i_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Ry();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Hv(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new i_(e,u):(_n("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ef{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ef(t.clientId,t.onlineState):(_n("SharedClientState",`Failed to parse online state: ${e}`),null)}}class G0{constructor(){this.activeTargetIds=Ry()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z0{constructor(e,t,r,i,u){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new cr(Gt),this.started=!1,this.ur=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.cr=sT(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new G0),this.hr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const u=e.getItem(sT(e.persistenceKey,i));if(u){const c=i_.Zi(i,u);c&&(e.rr=e.rr.insert(c.clientId,c))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Gb(this.persistenceKey,e));if(r){const i=r_.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gb(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void _n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(u){let c=Qi.ct;if(null!=u)try{const f=JSON.parse(u);rt("number"==typeof f),c=f}catch(f){_n("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Qi.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Or(u)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new H0(this.currentUser,e,t,r),u=oT(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Xi())}Tr(e){const t=oT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=Gb(this.persistenceKey,e),u=new r_(e,t,r);this.setItem(i,u.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return i_.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return H0.Zi(new Hr(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return r_.Zi(i,t)}gr(e){return ef.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),u=this.pr(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Fr(c,f).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=Ry();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class q0{constructor(){this.Br=new G0,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new G0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jc{qr(e){}shutdown(){}}class W0{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tf=null;function ig(){return null===tf?tf=268435456+Math.round(2147483648*Math.random()):tf++,"0x"+tf.toString(16)}const aT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K0{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const ai="WebChannelConnection";class s_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,u){const c=ig(),f=this.ao(e,t);Oe("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const y={};return this.ho(y,i,u),this.lo(e,f,y,r).then(I=>(Oe("RestConnection",`Received RPC '${e}' ${c}: `,I),I),I=>{throw Xo("RestConnection",`RPC '${e}' ${c} failed with error: `,I,"url: ",f,"request:",r),I})}fo(e,t,r,i,u,c){return this.co(e,t,r,i,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+vh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ao(e,t){return`${this.ro}/v1/${t}:${aT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const u=ig();return new Promise((c,f)=>{const y=new iS;y.setWithCredentials(!0),y.listenOnce(XE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Fv.NO_ERROR:const S=y.getResponseJson();Oe(ai,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),c(S);break;case Fv.TIMEOUT:Oe(ai,`RPC '${e}' ${u} timed out`),f(new xe(se.DEADLINE_EXCEEDED,"Request time out"));break;case Fv.HTTP_ERROR:const M=y.getStatus();if(Oe(ai,`RPC '${e}' ${u} failed with status:`,M,"response text:",y.getResponseText()),M>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const G=L?.error;if(G&&G.status&&G.message){const Z=function(ae){const be=ae.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(be)>=0?be:se.UNKNOWN}(G.status);f(new xe(Z,G.message))}else f(new xe(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new xe(se.UNAVAILABLE,"Connection failed."));break;default:qe()}}finally{Oe(ai,`RPC '${e}' ${u} completed.`)}});const I=JSON.stringify(i);Oe(ai,`RPC '${e}' ${u} sending request:`,i),y.send(t,"POST",I,r,15)})}wo(e,t,r){const i=ig(),u=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=JE(),f=nS(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new eI({})),this.ho(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const I=u.join("");Oe(ai,`Creating RPC '${e}' stream ${i}: ${I}`,y);const S=c.createWebChannel(I,y);let M=!1,L=!1;const G=new K0({Wr:ae=>{L?Oe(ai,`Not sending because RPC '${e}' stream ${i} is closed:`,ae):(M||(Oe(ai,`Opening RPC '${e}' stream ${i} transport.`),S.open(),M=!0),Oe(ai,`RPC '${e}' stream ${i} sending:`,ae),S.send(ae))},Hr:()=>S.close()}),Z=(ae,be,We)=>{ae.listen(be,yt=>{try{We(yt)}catch(ut){setTimeout(()=>{throw ut},0)}})};return Z(S,Fa.EventType.OPEN,()=>{L||Oe(ai,`RPC '${e}' stream ${i} transport opened.`)}),Z(S,Fa.EventType.CLOSE,()=>{L||(L=!0,Oe(ai,`RPC '${e}' stream ${i} transport closed`),G.so())}),Z(S,Fa.EventType.ERROR,ae=>{L||(L=!0,Xo(ai,`RPC '${e}' stream ${i} transport errored:`,ae),G.so(new xe(se.UNAVAILABLE,"The operation could not be completed")))}),Z(S,Fa.EventType.MESSAGE,ae=>{var be;if(!L){const We=ae.data[0];rt(!!We);const yt=We,ut=yt.error||(null===(be=yt[0])||void 0===be?void 0:be.error);if(ut){Oe(ai,`RPC '${e}' stream ${i} received error:`,ut);const Ct=ut.status;let qt=function(Dn){const Ti=Er[Dn];if(void 0!==Ti)return tb(Ti)}(Ct),Kt=ut.message;void 0===qt&&(qt=se.INTERNAL,Kt="Unknown error status: "+Ct+" with message "+ut.message),L=!0,G.so(new xe(qt,Kt)),S.close()}else Oe(ai,`RPC '${e}' stream ${i} received:`,We),G.io(We)}}),Z(f,rS.STAT_EVENT,ae=>{ae.stat===Lv.PROXY?Oe(ai,`RPC '${e}' stream ${i} detected buffering proxy`):ae.stat===Lv.NOPROXY&&Oe(ai,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{G.no()},0),G}}function uT(){return typeof window<"u"?window:null}function Z0(){return typeof document<"u"?document:null}function o_(n){return new ab(n,!0)}class zb{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Y0{constructor(e,t,r,i,u,c,f,y){this.Ws=e,this.bo=r,this.Po=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new zb(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,me.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,me.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(_n(t.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new xe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,me.Z)(function*(){e.state=0,e.start()}))}Go(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lT extends Y0{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function db(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:qe(),i=e.targetChange.targetIds||[],u=function(y,I){return y.useProto3Json?(rt(void 0===I||"string"==typeof I),zr.fromBase64String(I||"")):(rt(void 0===I||I instanceof Uint8Array),zr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const I=void 0===y.code?se.UNKNOWN:tb(y.code);return new xe(I,y.message||"")}(c);t=new Ly(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ta(n,r.document.name),u=dr(r.document.updateTime),c=r.document.createTime?dr(r.document.createTime):It.min(),f=new oi({mapValue:{fields:r.document.fields}}),y=Un.newFoundDocument(i,u,c,f);t=new Kp(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=ta(n,r.document),u=r.readTime?dr(r.readTime):It.min(),c=Un.newNoDocument(i,u);t=new Kp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ta(n,r.document);t=new Kp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return qe();{const r=e.filter,u=new eb(r.count||0);t=new Fy(r.targetId,u)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?dr(u.readTime):It.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=Zp(this.serializer),t.addTarget=function(i,u){let c;const f=u.target;return c=Nh(f)?{documents:hb(i,f)}:{query:Uy(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=w0(i,u.resumeToken):u.snapshotVersion.compareTo(It.min())>0&&(c.readTime=Nc(i,u.snapshotVersion.toTimestamp())),c}(this.serializer,e);const r=function US(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.Fo(t)}}class cT extends Y0{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function I0(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,i){let u=dr(r.updateTime?r.updateTime:i);return u.isEqual(It.min())&&(u=dr(i)),new RS(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.Zo(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Zp(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ga(this.serializer,r))};this.Fo(t)}}class dT extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(se.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.fo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(se.UNKNOWN,u.toString())})}terminate(){this.eu=!0}}class qb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(_n(t),this.ru=!1):Oe("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class Wb{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=u,this._u.qr(f=>{r.enqueueAndForget((0,me.Z)(function*(){var y;Yu(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,me.Z)(function*(I){const S=ze(I);S.du.add(4),yield $c(S),S.mu.set("Unknown"),S.du.delete(4),yield sg(S)}),function(I){return y.apply(this,arguments)})(c))}))}),this.mu=new qb(r,i)}}function sg(n){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,me.Z)(function*(n){if(Yu(n))for(const e of n.wu)yield e(!0)}),Q0.apply(this,arguments)}function $c(n){return og.apply(this,arguments)}function og(){return og=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),og.apply(this,arguments)}function J0(n,e){const t=ze(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Zb(t)?X0(t):Y(t).No()&&ag(t,e))}function nf(n,e){const t=ze(n),r=Y(t);t.fu.delete(e),r.No()&&Kb(t,e),0===t.fu.size&&(r.No()?r.$o():Yu(t)&&t.mu.set("Unknown"))}function ag(n,e){n.gu.Ot(e.targetId),Y(n).jo(e)}function Kb(n,e){n.gu.Ot(e),Y(n).Wo(e)}function X0(n){n.gu=new kS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Y(n).start(),n.mu.ou()}function Zb(n){return Yu(n)&&!Y(n).xo()&&n.fu.size>0}function Yu(n){return 0===ze(n).du.size}function Yb(n){n.gu=void 0}function fT(n){return ew.apply(this,arguments)}function ew(){return ew=(0,me.Z)(function*(n){n.fu.forEach((e,t)=>{ag(n,e)})}),ew.apply(this,arguments)}function sx(n,e){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,me.Z)(function*(n,e){Yb(n),Zb(n)?(n.mu.au(e),X0(n)):n.mu.set("Unknown")}),Qb.apply(this,arguments)}function ox(n,e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,me.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof Ly&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.fu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.fu.delete(f),i.gu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tw(n,r)}else if(e instanceof Kp?n.gu.Kt(e):e instanceof Fy?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(It.min()))try{const r=yield B0(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.gu.Xt(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const I=i.fu.get(y);I&&i.fu.set(y,I.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i.fu.get(f);if(!y)return;i.fu.set(f,y.withResumeToken(zr.EMPTY_BYTE_STRING,y.snapshotVersion)),Kb(i,f);const I=new za(y.target,f,1,y.sequenceNumber);ag(i,I)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield tw(n,r)}var r}),Jb.apply(this,arguments)}function tw(n,e,t){return nw.apply(this,arguments)}function nw(){return nw=(0,me.Z)(function*(n,e,t){if(!Va(e))throw e;n.du.add(1),yield $c(n),n.mu.set("Offline"),t||(t=()=>B0(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield sg(n)}))}),nw.apply(this,arguments)}function pT(n,e){return e().catch(t=>tw(n,t,e))}function ug(n){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,me.Z)(function*(n){const e=ze(n),t=ge(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;ax(e);)try{const i=yield jb(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,ux(e,i)}catch(i){yield tw(e,i)}gT(e)&&s(e)}),Xb.apply(this,arguments)}function ax(n){return Yu(n)&&n.lu.length<10}function ux(n,e){n.lu.push(e);const t=ge(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function gT(n){return Yu(n)&&!ge(n).xo()&&n.lu.length>0}function s(n){ge(n).start()}function o(n){return a.apply(this,arguments)}function a(){return a=(0,me.Z)(function*(n){ge(n).tu()}),a.apply(this,arguments)}function l(n){return d.apply(this,arguments)}function d(){return d=(0,me.Z)(function*(n){const e=ge(n);for(const t of n.lu)e.Yo(t.mutations)}),d.apply(this,arguments)}function m(n,e,t){return v.apply(this,arguments)}function v(){return v=(0,me.Z)(function*(n,e,t){const r=n.lu.shift(),i=p0.from(r,e,t);yield pT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ug(n)}),v.apply(this,arguments)}function E(n,e){return b.apply(this,arguments)}function b(){return b=(0,me.Z)(function*(n,e){var t;e&&ge(n).Jo&&(yield(t=(0,me.Z)(function*(r,i){if(m0(u=i.code)&&u!==se.ABORTED){const c=r.lu.shift();ge(r).Oo(),yield pT(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ug(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),gT(n)&&s(n)}),b.apply(this,arguments)}function T(n,e){return R.apply(this,arguments)}function R(){return R=(0,me.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Yu(t);t.du.add(3),yield $c(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield sg(t)}),R.apply(this,arguments)}function O(n,e){return H.apply(this,arguments)}function H(){return H=(0,me.Z)(function*(n,e){const t=ze(n);e?(t.du.delete(2),yield sg(t)):e||(t.du.add(2),yield $c(t),t.mu.set("Unknown"))}),H.apply(this,arguments)}function Y(n){return n.yu||(n.yu=function(e,t,r){const i=ze(e);return i.nu(),new lT(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:fT.bind(null,n),Zr:sx.bind(null,n),zo:ox.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.yu.Oo(),Zb(n)?X0(n):n.mu.set("Unknown")):(yield n.yu.stop(),Yb(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function ge(n){return n.pu||(n.pu=function(e,t,r){const i=ze(e);return i.nu(),new cT(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:o.bind(null,n),Zr:E.bind(null,n),Xo:l.bind(null,n),Zo:m.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Oo(),yield ug(n)):(yield n.pu.stop(),n.lu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class Fe{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new Fe(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $e(n,e){if(_n("AsyncQueue",`${e}: ${n}`),Va(n))return new xe(se.UNAVAILABLE,`${e}: ${n}`);throw n}class it{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=qp(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new it(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new it;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class At{constructor(){this.Iu=new cr(Ge.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):qe():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Te{constructor(e,t,r,i,u,c,f,y,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Te(e,t,it.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Ft{constructor(){this.Eu=void 0,this.listeners=[]}}class gn{constructor(){this.queries=new Ha(e=>My(e),zp),this.onlineState="Unknown",this.Au=new Set}}function On(n,e){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,me.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new Ft),i)try{u.Eu=yield t.onListen(r)}catch(c){const f=$e(c,`Initialization of query '${o0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Ru(t.onlineState),u.Eu&&e.vu(u.Eu)&&dg(t)}),Ya.apply(this,arguments)}function lg(n,e){return cg.apply(this,arguments)}function cg(){return cg=(0,me.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),cg.apply(this,arguments)}function rw(n,e){const t=ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.vu(i)&&(r=!0);c.Eu=i}}r&&dg(t)}function iw(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function dg(n){n.Au.forEach(e=>{e.next()})}class hg{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Te(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Te.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class sw{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class u_{constructor(e){this.serializer=e}Hi(e){return ta(this.serializer,e)}Ji(e){return e.metadata.exists?VS(this.serializer,e.document,!1):Un.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return dr(e)}}class ow{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lx(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=sn.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new u_(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.Hi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Yt()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function Hb(n,e,t,r){return j0.apply(this,arguments)}(e.localStore,new u_(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield iT(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function lx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cx{constructor(e){this.key=e}}class dx{constructor(e){this.key=e}}class hx{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Yt(),this.mutatedKeys=Yt(),this.Ku=a0(e),this.Gu=new it(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new At,i=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const L=i.get(S),G=kh(this.query,M)?M:null,Z=!!L&&this.mutatedKeys.has(L.key),ae=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let be=!1;L&&G?L.data.isEqual(G.data)?Z!==ae&&(r.track({type:3,doc:G}),be=!0):this.Wu(L,G)||(r.track({type:2,doc:G}),be=!0,(y&&this.Ku(G,y)>0||I&&this.Ku(G,I)<0)&&(f=!0)):!L&&G?(r.track({type:0,doc:G}),be=!0):L&&!G&&(r.track({type:1,doc:L}),be=!0,(y||I)&&(f=!0)),be&&(G?(c=c.add(G),u=ae?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Gu:c,ju:r,Mi:f,mutatedKeys:u}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.ju.Tu();u.sort((I,S)=>function(M,L){const G=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe()}};return G(M)-G(L)}(I.type,S.type)||this.Ku(I.doc,S.doc)),this.Hu(r);const c=t?this.Ju():[],f=0===this.Uu.size&&this.current?1:0,y=f!==this.qu;return this.qu=f,0!==u.length||y?{snapshot:new Te(this.query,e.Gu,i,u,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:c}:{Yu:c}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new At,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=Yt(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new dx(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new cx(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=Yt();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Te.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class eO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tO{constructor(e){this.key=e,this.ec=!1}}class nO{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Ha(f=>My(f),zp),this.ic=new Map,this.rc=new Set,this.oc=new cr(Ge.comparator),this.uc=new Map,this.cc=new P0,this.ac={},this.hc=new Map,this.lc=Uc.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function rO(n,e){return mT.apply(this,arguments)}function mT(){return mT=(0,me.Z)(function*(n,e){const t=UT(n);let r,i;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.tc();else{const c=yield Xh(t.localStore,Xi(e));t.isPrimaryClient&&J0(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield yT(t,e,r,"current"===f,c.resumeToken)}return i}),mT.apply(this,arguments)}function yT(n,e,t,r,i){return _T.apply(this,arguments)}function _T(){return _T=(0,me.Z)(function*(n,e,t,r,i){n.dc=(M,L,G)=>{return(Z=(0,me.Z)(function*(ae,be,We,yt){let ut=be.view.zu(We);ut.Mi&&(ut=yield n_(ae.localStore,be.query,!1).then(({documents:Kt})=>be.view.zu(Kt,ut)));const Ct=yt&&yt.targetChanges.get(be.targetId),qt=be.view.applyChanges(ut,ae.isPrimaryClient,Ct);return AT(ae,be.targetId,qt.Yu),qt.snapshot}),function(ae,be,We,yt){return Z.apply(this,arguments)})(n,M,L,G);var Z};const u=yield n_(n.localStore,e,!0),c=new hx(e,u.Wi),f=c.zu(u.documents),y=Rc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=c.applyChanges(f,n.isPrimaryClient,y);AT(n,t,I.Yu);const S=new eO(e,t,c);return n.sc.set(e,S),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),I.snapshot}),_T.apply(this,arguments)}function iO(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,me.Z)(function*(n,e){const t=ze(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(u=>!zp(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Bc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),nf(t.remoteStore,r.targetId),l_(t,r.targetId)}).catch(ju))):(l_(t,r.targetId),yield Bc(t.localStore,r.targetId,!0))}),vT.apply(this,arguments)}function wT(){return wT=(0,me.Z)(function*(n,e,t){const r=BT(n);try{const i=yield function(u,c){const f=ze(u),y=xn.now(),I=c.reduce((L,G)=>L.add(G.key),Yt());let S,M;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=es(),Z=Yt();return f.Ki.getEntries(L,I).next(ae=>{G=ae,G.forEach((be,We)=>{We.isValidDocument()||(Z=Z.add(be))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,G)).next(ae=>{S=ae;const be=[];for(const We of c){const yt=PS(We,S.get(We.key).overlayedDocument);null!=yt&&be.push(new Eo(We.key,yt,Qv(yt.value.mapValue),qn.exists(!0)))}return f.mutationQueue.addMutationBatch(L,y,be,c)}).next(ae=>{M=ae;const be=ae.applyToLocalDocumentSet(S,Z);return f.documentOverlayCache.saveOverlays(L,ae.batchId,be)})}).then(()=>({batchId:M.batchId,changes:qI(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.ac[u.currentUser.toKey()];y||(y=new cr(Gt)),y=y.insert(c,f),u.ac[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Hc(r,i.changes),yield ug(r.remoteStore)}catch(i){const u=$e(i,"Failed to persist write");t.reject(u)}}),wT.apply(this,arguments)}function fx(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,me.Z)(function*(n,e){const t=ze(n);try{const r=yield e_(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.uc.get(u);c&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?rt(c.ec):i.removedDocuments.size>0&&(rt(c.ec),c.ec=!1))}),yield Hc(t,r,e)}catch(r){yield ju(r)}}),ET.apply(this,arguments)}function px(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((u,c)=>{const f=c.view.Ru(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=ze(u);f.onlineState=c;let y=!1;f.queries.forEach((I,S)=>{for(const M of S.listeners)M.Ru(c)&&(y=!0)}),y&&dg(f)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oO(n,e,t){return IT.apply(this,arguments)}function IT(){return IT=(0,me.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),u=i&&i.key;if(u){let c=new cr(Ge.comparator);c=c.insert(u,Un.newNoDocument(u,It.min()));const f=Yt().add(u),y=new xc(It.min(),new Map,new In(Gt),c,f);yield fx(r,y),r.oc=r.oc.remove(u),r.uc.delete(e),MT(r)}else yield Bc(r.localStore,e,!1).then(()=>l_(r,e,t)).catch(ju)}),IT.apply(this,arguments)}function aO(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,me.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield Bb(t.localStore,e);TT(t,r,null),ST(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Hc(t,i)}catch(i){yield ju(i)}}),bT.apply(this,arguments)}function uO(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,me.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(u,c){const f=ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let I;return f.mutationQueue.lookupMutationBatch(y,c).next(S=>(rt(null!==S),I=S.keys(),f.mutationQueue.removeMutationBatch(y,S))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,I,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,I)).next(()=>f.localDocuments.getDocuments(y,I))})}(r.localStore,e);TT(r,e,t),ST(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Hc(r,i)}catch(i){yield ju(i)}}),DT.apply(this,arguments)}function CT(){return CT=(0,me.Z)(function*(n,e){const t=ze(n);Yu(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=$e(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),CT.apply(this,arguments)}function ST(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function TT(n,e,t){const r=ze(n);let i=r.ac[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function l_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||gx(n,r)})}function gx(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(nf(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),MT(n))}function AT(n,e,t){for(const r of t)r instanceof cx?(n.cc.addReference(r.key,e),cO(n,r)):r instanceof dx?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||gx(n,r.key)):qe()}function cO(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.rc.add(r),MT(n))}function MT(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(sn.fromString(e)),r=n.lc.next();n.uc.set(r,new tO(t)),n.oc=n.oc.insert(t,r),J0(n.remoteStore,new za(Xi(qu(t.path)),r,2,Qi.ct))}}function Hc(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,me.Z)(function*(n,e,t){const r=ze(n),i=[],u=[],c=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,y)=>{c.push(r.dc(y,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,I?.fromCache?"not-current":"current"),I){i.push(I);const S=Jy.Di(y.targetId,I);u.push(S)}}))}),yield Promise.all(c),r.nc.zo(i),yield(f=(0,me.Z)(function*(y,I){const S=ze(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ne.forEach(I,L=>ne.forEach(L.Vi,G=>S.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>ne.forEach(L.Si,G=>S.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!Va(M))throw M;Oe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const L=M.targetId;if(!M.fromCache){const G=S.Li.get(L),ae=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);S.Li=S.Li.insert(L,ae)}}}),function(y,I){return f.apply(this,arguments)})(r.localStore,u))}),xT.apply(this,arguments)}function dO(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,me.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield U0(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(f=>{f.reject(new xe(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hc(t,r.Qi)}var i}),RT.apply(this,arguments)}function hO(n,e){const t=ze(n),r=t.uc.get(e);if(r&&r.ec)return Yt().add(r.key);{let i=Yt();const u=t.ic.get(e);if(!u)return i;for(const c of u){const f=t.sc.get(c);i=i.unionWith(f.view.Qu)}return i}}function fO(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,me.Z)(function*(n,e){const t=ze(n),r=yield n_(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&AT(t,e.targetId,i.Yu),i}),NT.apply(this,arguments)}function pO(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e){const t=ze(n);return nT(t.localStore,e).then(r=>Hc(t,r))}),PT.apply(this,arguments)}function gO(n,e,t,r){return OT.apply(this,arguments)}function OT(){return OT=(0,me.Z)(function*(n,e,t,r){const i=ze(n),u=yield function(c,f){const y=ze(c),I=ze(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.In(S,f).next(M=>M?y.localDocuments.getDocuments(S,M):ne.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield ug(i.remoteStore):"acknowledged"===t||"rejected"===t?(TT(i,e,r||null),ST(i,e),f=e,ze(ze(i.localStore).mutationQueue).En(f)):qe(),yield Hc(i,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),OT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n,e){const t=ze(n);if(UT(t),BT(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mx(t,r.toArray());t.fc=!0,yield O(t.remoteStore,!0);for(const u of i)J0(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(l_(t,c),Bc(t.localStore,c,!0))),nf(t.remoteStore,c)}),yield i,yield mx(t,r),function(u){const c=ze(u);c.uc.forEach((f,y)=>{nf(c.remoteStore,y)}),c.cc.ls(),c.uc=new Map,c.oc=new cr(Ge.comparator)}(t),t.fc=!1,yield O(t.remoteStore,!1)}}),kT.apply(this,arguments)}function mx(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n,e,t){const r=ze(n),i=[],u=[];for(const c of e){let f;const y=r.ic.get(c);if(y&&0!==y.length){f=yield Xh(r.localStore,Xi(y[0]));for(const I of y){const S=r.sc.get(I),M=yield fO(r,S);M.snapshot&&u.push(M.snapshot)}}else{const I=yield $b(r.localStore,c);f=yield Xh(r.localStore,I),yield yT(r,yx(I),c,!1,f.resumeToken)}i.push(f)}return r.nc.zo(u),i}),FT.apply(this,arguments)}function yx(n){return jI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yO(n){const e=ze(n);return ze(ze(e.localStore).persistence).bi()}function _O(n,e,t,r){return LT.apply(this,arguments)}function LT(){return LT=(0,me.Z)(function*(n,e,t,r){const i=ze(n);if(i.fc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=i.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield nT(i.localStore,xy(u[0])),f=xc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,zr.EMPTY_BYTE_STRING);yield Hc(i,c,f);break}case"rejected":yield Bc(i.localStore,e,!0),l_(i,e,r);break;default:qe()}}),LT.apply(this,arguments)}function vO(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n,e,t){const r=UT(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const u=yield $b(r.localStore,i),c=yield Xh(r.localStore,u);yield yT(r,yx(u),c.targetId,!1,c.resumeToken),J0(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield Bc(r.localStore,i,!1).then(()=>{nf(r.remoteStore,i),l_(r,i)}).catch(ju))}}),VT.apply(this,arguments)}function UT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oO.bind(null,e),e.nc.zo=rw.bind(null,e.eventManager),e.nc.wc=iw.bind(null,e.eventManager),e}function BT(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uO.bind(null,e),e}class eD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=o_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return V0(this.persistence,new tT,e.initialUser,this.serializer)}createPersistence(e){return new Vb(Zy.Fs,this.serializer)}createSharedClientState(e){return new q0}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jT extends eD{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield BT(r.mc.syncEngine),yield ug(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return V0(this.persistence,new tT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Do(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new mI(t,this.persistence);return new gI(e.asyncQueue,r)}createPersistence(e){const t=F0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new Yy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uT(),Z0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new q0}}class _x extends jT{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof z0&&(r.sharedClientState.syncEngine={$r:gO.bind(null,i),Mr:_O.bind(null,i),Fr:vO.bind(null,i),bi:yO.bind(null,i),Or:pO.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var u=(0,me.Z)(function*(c){yield function mO(n,e){return kT.apply(this,arguments)}(r.mc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=uT();if(!z0.D(t))throw new xe(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=F0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new z0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class c_{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>px(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=dO.bind(null,r.syncEngine),yield O(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gn}createDatastore(e){const t=o_(e.databaseInfo.databaseId),r=new s_(e.databaseInfo);return new dT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>px(this.syncEngine,f,0),c=W0.D()?new W0:new jc,new Wb(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,I){const S=new nO(r,i,u,c,f,y);return I&&(S.fc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield $c(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vx(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class EO{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const u=yield e.vc(i);return new sw(JSON.parse(u),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,me.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const f=ze(u),y=Zp(f.serializer)+"/documents",I={documents:c.map(G=>Hh(f.serializer,G))},S=yield f.fo("BatchGetDocuments",y,I,c.length),M=new Map;S.forEach(G=>{const Z=function cb(n,e){return"found"in e?function(t,r){rt(!!r.found);const i=ta(t,r.found.name),u=dr(r.found.updateTime),c=r.found.createTime?dr(r.found.createTime):It.min(),f=new oi({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(i,u,c,f)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const i=ta(t,r.missing),u=dr(r.readTime);return Un.newNoDocument(i,u)}(n,e):qe()}(f.serializer,G);M.set(Z.key.toString(),Z)});const L=[];return c.forEach(G=>{const Z=M.get(G.toString());rt(!!Z),L.push(Z)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ea(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new h0(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=ze(i),f=Zp(c.serializer)+"/documents",y={writes:u.map(I=>Ga(c.serializer,I))};yield c.co("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qe();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new xe(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bO{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Vc=r.maxAttempts,this.Co=new zb(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,me.Z)(function*(){const t=new IO(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Cc(u)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!Eh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!m0(t)}return!1}}class DO{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Hr.UNAUTHENTICATED,this.clientId=uI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(f){Oe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$e(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function nD(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield U0(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),$T.apply(this,arguments)}function HT(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield zT(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>T(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>T(e.remoteStore,u)),n._onlineComponents=e}),GT.apply(this,arguments)}function wx(n){return"FirebaseError"===n.name?n.code===se.FAILED_PRECONDITION||n.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function zT(n){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!wx(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),yield nD(n,new eD)}}else Oe("FirestoreClient","Using default OfflineComponentProvider"),yield nD(n,new eD);return n._offlineComponents}),qT.apply(this,arguments)}function rD(n){return WT.apply(this,arguments)}function WT(){return WT=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe("FirestoreClient","Using user provided OnlineComponentProvider"),yield HT(n,n._uninitializedComponentsProvider._online)):(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield HT(n,new c_))),n._onlineComponents}),WT.apply(this,arguments)}function Ex(n){return zT(n).then(e=>e.persistence)}function iD(n){return zT(n).then(e=>e.localStore)}function KT(n){return rD(n).then(e=>e.remoteStore)}function ZT(n){return rD(n).then(e=>e.syncEngine)}function d_(n){return YT.apply(this,arguments)}function YT(){return YT=(0,me.Z)(function*(n){const e=yield rD(n),t=e.eventManager;return t.onListen=rO.bind(null,e.syncEngine),t.onUnlisten=iO.bind(null,e.syncEngine),t}),YT.apply(this,arguments)}function bx(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,f,y){const I=new tD({next:M=>{u.enqueueAndForget(()=>lg(i,S));const L=M.docs.has(c);!L&&M.fromCache?y.reject(new xe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&f&&"server"===f.source?y.reject(new xe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new hg(qu(c.path),I,{includeMetadataChanges:!0,xu:!0});return On(i,S)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}function Dx(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,f,y){const I=new tD({next:M=>{u.enqueueAndForget(()=>lg(i,S)),M.fromCache&&"server"===f.source?y.reject(new xe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new hg(c,I,{includeMetadataChanges:!0,xu:!0});return On(i,S)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}const Cx=new Map;function QT(n,e,t){if(!t)throw new xe(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Sx(n,e,t,r){if(!0===e&&!0===r)throw new xe(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tx(n){if(!Ge.isDocumentKey(n))throw new xe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ax(n){if(Ge.isDocumentKey(n))throw new xe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":qe()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sD(n);throw new xe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Mx(n,e){if(e<=0)throw new xe(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new sS;switch(t.type){case"firstParty":return new sI(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Cx.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),Cx.delete(e),t.terminate())}(this),Promise.resolve()}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class Qu extends Ui{constructor(e,t,r){super(e,t,qu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new Ge(e))}withConverter(e){return new Qu(this.firestore,e,this._path)}}function Nx(n,e,...t){if(n=(0,ln.m9)(n),QT("collection","path",e),n instanceof aw){const r=sn.fromString(e,...t);return Ax(r),new Qu(n,null,r)}{if(!(n instanceof tr||n instanceof Qu))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return Ax(r),new Qu(n.firestore,null,r)}}function oD(n,e,...t){if(n=(0,ln.m9)(n),1===arguments.length&&(e=uI.A()),QT("doc","path",e),n instanceof aw){const r=sn.fromString(e,...t);return Tx(r),new tr(n,null,new Ge(r))}{if(!(n instanceof tr||n instanceof Qu))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return Tx(r),new tr(n.firestore,n instanceof Qu?n.converter:null,new Ge(r))}}function Px(n,e){return n=(0,ln.m9)(n),e=(0,ln.m9)(e),(n instanceof tr||n instanceof Qu)&&(e instanceof tr||e instanceof Qu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JT(n,e){return n=(0,ln.m9)(n),e=(0,ln.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&zp(n._query,e._query)&&n.converter===e.converter}class OO{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new zb(this,"async_queue_retry"),this.qc=()=>{const t=Z0();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=Z0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=Z0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Gr;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,me.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Va(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,_n("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=Fe.createAndSchedule(this,e,t,r,u=>this.Qc(u));return this.$c.push(i),i}Uc(){this.Mc&&qe()}verifyOperationInProgress(){}zc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function XT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class kO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends aw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OO,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ox(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||Ox(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ox(n){var e,t,r;const i=n._freezeSettings(),u=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vS(n._databaseId,f,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,I.useFetchStreams));var f,I;n._firestoreClient=new DO(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function kx(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield nD(n,t),yield HT(n,e),r.resolve()}catch(i){const u=i;if(!wx(u))throw u;Xo("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function Fx(n){if(n._initialized||n._terminated)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ju(zr.fromBase64String(e))}catch(t){throw new xe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ju(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fg{constructor(e){this._methodName=e}}class aD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const qO=/^__.*__$/;class WO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new jh(e,this.data,t,this.fieldTransforms)}}class Lx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe()}}class uD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Jc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new uD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return dD(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Vx(this.Yc)&&qO.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class KO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||o_(e)}ua(e,t,r,i=!1){return new uD({Yc:e,methodName:t,oa:r,path:Xn.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pg(n){const e=n._freezeSettings(),t=o_(n._databaseId);return new KO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lD(n,e,t,r,i,u={}){const c=n.ua(u.merge||u.mergeFields?2:0,e,t,i);rA("Data must be an object, but it was:",c,r);const f=jx(r,c);let y,I;if(u.merge)y=new Ji(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const L=cw(e,M,t);if(!c.contains(L))throw new xe(se.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Hx(S,L)||S.push(L)}y=new Ji(S),I=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,I=c.fieldTransforms;return new WO(new oi(f),y,I)}class lw extends fg{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lw}}function Ux(n,e,t){return new uD({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eA extends fg{_toFieldTransform(e){return new Uh(e.path,new Lh)}isEqual(e){return e instanceof eA}}class ZO extends fg{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Ux(this,e,!0),r=this.ca.map(u=>gg(u,t)),i=new Wu(r);return new Uh(e.path,i)}isEqual(e){return this===e}}class YO extends fg{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Ux(this,e,!0),r=this.ca.map(u=>gg(u,t)),i=new Ac(r);return new Uh(e.path,i)}isEqual(e){return this===e}}class QO extends fg{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Mc(e.serializer,u0(e.serializer,this.aa));return new Uh(e.path,t)}isEqual(e){return this===e}}function tA(n,e,t,r){const i=n.ua(1,e,t);rA("Data must be an object, but it was:",i,r);const u=[],c=oi.empty();yo(r,(y,I)=>{const S=cD(e,y,t);I=(0,ln.m9)(I);const M=i.na(S);if(I instanceof lw)u.push(S);else{const L=gg(I,M);null!=L&&(u.push(S),c.set(S,L))}});const f=new Ji(u);return new Lx(c,f,i.fieldTransforms)}function nA(n,e,t,r,i,u){const c=n.ua(1,e,t),f=[cw(e,r,t)],y=[i];if(u.length%2!=0)throw new xe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)f.push(cw(e,u[L])),y.push(u[L+1]);const I=[],S=oi.empty();for(let L=f.length-1;L>=0;--L)if(!Hx(I,f[L])){const G=f[L];let Z=y[L];Z=(0,ln.m9)(Z);const ae=c.na(G);if(Z instanceof lw)I.push(G);else{const be=gg(Z,ae);null!=be&&(I.push(G),S.set(G,be))}}const M=new Ji(I);return new Lx(S,M,c.fieldTransforms)}function Bx(n,e,t,r=!1){return gg(t,n.ua(r?4:3,e))}function gg(n,e){if($x(n=(0,ln.m9)(n)))return rA("Unsupported field value:",e,n),jx(n,e);if(n instanceof fg)return function(t,r){if(!Vx(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=gg(c,r.sa(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ln.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return u0(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=xn.fromDate(t);return{timestampValue:Nc(r.serializer,i)}}if(t instanceof xn){const i=new xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Nc(r.serializer,i)}}if(t instanceof aD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ju)return{bytesValue:w0(r.serializer,t._byteString)};if(t instanceof tr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ia(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${sD(t)}`)}(n,e)}function jx(n,e){const t={};return SI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(n,(r,i)=>{const u=gg(i,e.Xc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function $x(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof aD||n instanceof Ju||n instanceof tr||n instanceof fg)}function rA(n,e,t){if(!$x(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sD(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function cw(n,e,t){if((e=(0,ln.m9)(e))instanceof Gc)return e._internalPath;if("string"==typeof e)return cD(n,e);throw dD("Field path arguments must be of type string or ",n,!1,void 0,t)}const JO=new RegExp("[~\\*/\\[\\]]");function cD(n,e,t){if(e.search(JO)>=0)throw dD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch{throw dD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new xe(se.INVALID_ARGUMENT,f+n+y)}function Hx(n,e){return n.some(t=>t.isEqual(e))}class dw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class XO extends dw{data(){return super.data()}}function hD(n,e){return"string"==typeof e?cD(n,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}function Gx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iA{}class hw extends iA{}function rf(n,e,...t){let r=[];e instanceof iA&&r.push(e),r=r.concat(t),function(i){const u=i.filter(f=>f instanceof h_).length,c=i.filter(f=>f instanceof fw).length;if(u>1||u>0&&c>0)throw new xe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fw extends hw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fw(e,t,r)}_apply(e){const t=this._parse(e);return Kx(e._query,t),new Ui(e.firestore,e.converter,Ay(e._query,t))}_parse(e){const t=pg(e.firestore);return function(i,u,c,f,y,I,S){let M;if(y.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){Wx(S,I);const L=[];for(const G of S)L.push(qx(f,i,G));M={arrayValue:{values:L}}}else M=qx(f,i,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||Wx(S,I),M=Bx(c,"where",S,"in"===I||"not-in"===I);return tn.create(y,I,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class h_ extends iA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new h_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const c=i.getFlattenedFilters();for(const f of c)Kx(u,f),u=Ay(u,f)}(e._query,t),new Ui(e.firestore,e.converter,Ay(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sA extends hw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sA(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new xh(i,u);return function(f,y){if(null===Sy(f)){const I=$a(f);null!==I&&Zx(0,I,y.field)}}(r,c),c}(e._query,this._field,this._direction);return new Ui(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new ja(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fD extends hw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new fD(e,t,r)}_apply(e){return new Ui(e.firestore,e.converter,Oh(e._query,this._limit,this._limitType))}}class pD extends hw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pD(e,t,r)}_apply(e){const t=zx(e,this.type,this._docOrFields,this._inclusive);return new Ui(e.firestore,e.converter,(i=t,new ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class gD extends hw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gD(e,t,r)}_apply(e){const t=zx(e,this.type,this._docOrFields,this._inclusive);return new Ui(e.firestore,e.converter,(i=t,new ja((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function zx(n,e,t,r){if(t[0]=(0,ln.m9)(t[0]),t[0]instanceof dw)return function(i,u,c,f,y){if(!f)throw new xe(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const S of Tc(i))if(S.field.isKeyField())I.push(vo(u,f.key));else{const M=f.data.field(S.field);if(Ey(M))throw new xe(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=S.field.canonicalString();throw new xe(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(M)}return new Ba(I,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=pg(n.firestore);return function(u,c,f,y,I,S){const M=u.explicitOrderBy;if(I.length>M.length)throw new xe(se.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<I.length;G++){const Z=I[G];if(M[G].field.isKeyField()){if("string"!=typeof Z)throw new xe(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Z}`);if(!Ty(u)&&-1!==Z.indexOf("/"))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Z}' contains a slash.`);const ae=u.path.child(sn.fromString(Z));if(!Ge.isDocumentKey(ae))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const be=new Ge(ae);L.push(vo(c,be))}else{const ae=Bx(f,y,Z);L.push(ae)}}return new Ba(L,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function qx(n,e,t){if("string"==typeof(t=(0,ln.m9)(t))){if(""===t)throw new xe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ty(e)&&-1!==t.indexOf("/"))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vo(n,new Ge(r))}if(t instanceof tr)return vo(n,t._key);throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sD(t)}.`)}function Wx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kx(n,e){if(e.isInequality()){const r=$a(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new xe(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=Sy(n);null!==u&&Zx(0,i,u)}const t=function(r,i){for(const u of r)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Zx(n,e,t){if(!t.isEqual(e))throw new xe(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class oA{convertValue(e,t="none"){switch(Sh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qe()}}convertObject(e,t){const r={};return yo(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new aD(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=TI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ch(e));default:return null}}convertTimestamp(e){const t=Hu(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);rt(_b(r));const i=new zu(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||_n(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function mD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u1 extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class mg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zc extends dw{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pw extends zc{data(e={}){return super.data(e)}}class sf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pw(this._firestore,this._userDataWriter,r.key,r,new mg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new pw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new mg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new pw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new mg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,I=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:c1(c.type),doc:f,oldIndex:y,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe()}}function Qx(n,e){return n instanceof zc&&e instanceof zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sf&&e instanceof sf&&n._firestore===e._firestore&&JT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class af extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function Jx(n,e,t){n=cn(n,tr);const r=cn(n.firestore,nr),i=mD(n.converter,e,t);return f_(r,[lD(pg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qn.none())])}function Xx(n,e,t,...r){n=cn(n,tr);const i=cn(n.firestore,nr),u=pg(i);let c;return c="string"==typeof(e=(0,ln.m9)(e))||e instanceof Gc?nA(u,"updateDoc",n._key,e,t,r):tA(u,"updateDoc",n._key,e),f_(i,[c.toMutation(n._key,qn.exists(!0))])}function eR(n,...e){var t,r,i;n=(0,ln.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||XT(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(XT(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,I,S;if(n instanceof tr)I=cn(n.firestore,nr),S=qu(n._key.path),y={next:M=>{e[c]&&e[c](aA(I,n,M))},error:e[c+1],complete:e[c+2]};else{const M=cn(n,Ui);I=cn(M.firestore,nr),S=M._query;const L=new af(I);y={next:G=>{e[c]&&e[c](new sf(I,L,M,G))},error:e[c+1],complete:e[c+2]},Gx(n._query)}return function(M,L,G,Z){const ae=new tD(Z),be=new hg(L,ae,G);return M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return On(yield d_(M),be)})),()=>{ae.yc(),M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return lg(yield d_(M),be)}))}}(qr(I),S,f,y)}function f_(n,e){return function(t,r){const i=new Gr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function sO(n,e,t){return wT.apply(this,arguments)}(yield ZT(t),r,i)})),i.promise}(qr(n),e)}function aA(n,e,t){const r=t.docs.get(e._key),i=new af(n);return new zc(n,i,e._key,r,new mg(t.hasPendingWrites,t.fromCache),e.converter)}const S1={maxAttempts:5};class tR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pg(e)}set(e,t,r){this._verifyNotCommitted();const i=uf(e,this._firestore),u=mD(i.converter,t,r),c=lD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=uf(e,this._firestore);let c;return c="string"==typeof(t=(0,ln.m9)(t))||t instanceof Gc?nA(this._dataReader,"WriteBatch.update",u._key,t,r,i):tA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uf(e,this._firestore);return this._mutations=this._mutations.concat(new ea(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uf(n,e){if((n=(0,ln.m9)(n)).firestore!==e)throw new xe(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class T1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pg(e)}get(e){const t=uf(e,this._firestore),r=new u1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return qe();const u=i[0];if(u.isFoundDocument())return new dw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new dw(this._firestore,r,t._key,null,t.converter);throw qe()})}set(e,t,r){const i=uf(e,this._firestore),u=mD(i.converter,t,r),c=lD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=uf(e,this._firestore);let c;return c="string"==typeof(t=(0,ln.m9)(t))||t instanceof Gc?nA(this._dataReader,"Transaction.update",u._key,t,r,i):tA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uf(e,this._firestore),r=new af(this._firestore);return super.get(e).then(i=>new zc(this._firestore,r,t._key,i._document,new mg(!1,!1),t.converter))}}function uA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rR(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function iR(){if(!function Bp(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){vh=Ru.SDK_VERSION,(0,Ru._registerComponent)(new th.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new nr(new kp(t.getProvider("auth-internal")),new aI(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new xe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(f.options.projectId,y)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Ru.registerVersion)(tI,"3.10.0",n),(0,Ru.registerVersion)(tI,"3.10.0","esm2017")}();class gw{constructor(e){this._delegate=e}static fromBase64String(e){return iR(),new gw(Ju.fromBase64String(e))}static fromUint8Array(e){return rR(),new gw(Ju.fromUint8Array(e))}toBase64(){return iR(),this._delegate.toBase64()}toUint8Array(){return rR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lA(n){return function F1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class L1{enableIndexedDbPersistence(e,t){return function LO(n,e){Fx(n=cn(n,nr));const t=qr(n);if(t._uninitializedComponentsProvider)throw new xe(se.FAILED_PRECONDITION,"SDK cache is already specified.");Xo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new c_;return kx(t,i,new jT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VO(n){Fx(n=cn(n,nr));const e=qr(n);if(e._uninitializedComponentsProvider)throw new xe(se.FAILED_PRECONDITION,"SDK cache is already specified.");Xo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new c_;return kx(e,r,new _x(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UO(n){if(n._initialized&&!n._terminated)throw new xe(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!mo.D())return Promise.resolve();const i=r+"main";yield mo.delete(i)}),function(r){return t.apply(this,arguments)})(F0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Rx(n,e,t,r={}){var i;const u=(n=cn(n,aw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Xo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Hr.MOCK_USER;else{c=(0,ln.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new xe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Hr(y)}n._authCredentials=new Uv(new iI(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function jO(n){return function CO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Ex(n),t=yield KT(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.du.delete(0),sg(i)}(t)}))}(qr(n=cn(n,nr)))}(this._delegate)}disableNetwork(){return function $O(n){return function SO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Ex(n),t=yield KT(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=ze(i);u.du.add(0),yield $c(u),u.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=cn(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Sx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BO(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function lO(n,e){return CT.apply(this,arguments)}(yield ZT(e),t)})),t.promise}(qr(n=cn(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function v1(n,e){return function MO(n,e){const t=new tD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield d_(n),i=t,ze(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield d_(n),i=t,void ze(r).Au.delete(i);var r,i}))}}(qr(n=cn(n,nr)),XT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new p_(this,Nx(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new na(this,oD(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function PO(n,e){if(n=cn(n,aw),QT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new ja(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function A1(n,e,t){n=cn(n,nr);const r=Object.assign(Object.assign({},S1),t);return function(i){if(i.maxAttempts<1)throw new xe(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const f=new Gr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const y=yield function Ix(n){return rD(n).then(e=>e.datastore)}(i);new bO(i.asyncQueue,y,c,u,f).run()})),f.promise}(qr(n),i=>e(new T1(n,i)),r)}(this._delegate,t=>e(new oR(this,t)))}batch(){return qr(this._delegate),new aR(new tR(this._delegate,e=>f_(this._delegate,e)))}loadBundle(e){return function HO(n,e){const t=qr(n=cn(n,nr)),r=new kO;return function xO(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,I){if(y instanceof Uint8Array)return vx(y,I);if(y instanceof ArrayBuffer)return vx(new Uint8Array(y),I);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new EO(y,c);var y}(t,o_(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function wO(n,e,t){const r=ze(n);var i;(i=(0,me.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(L,G){const Z=ze(L),ae=dr(G.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",be=>Z.xs.getBundleMetadata(be,G.id)).then(be=>!!be&&be.createTime.compareTo(ae)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=y).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(lx(y));const I=new ow(y,u.localStore,c.serializer);let S=yield c._c();for(;S;){const L=yield I.$u(S);L&&f._updateProgress(L),S=yield c._c()}const M=yield I.complete();return yield Hc(u,M.Bu,void 0),yield function(L,G){const Z=ze(L);return Z.persistence.runTransaction("Save bundle","readwrite",ae=>Z.xs.saveBundleMetadata(ae,G))}(u.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Fu)}catch(y){return Xo("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var L}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ZT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GO(n,e){return function RO(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.xs.getNamedQuery(u,r))}(yield iD(n),e)}))}(qr(n=cn(n,nr)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class yD extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new gw(new Ju(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return na.forKey(t,this.firestore,null)}}class oR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yD(e)}get(e){const t=_g(e);return this._delegate.get(t).then(r=>new mw(this._firestore,new zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_g(e);return r?(uA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=_g(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=_g(e);return this._delegate.delete(t),this}}class aR{constructor(e){this._delegate=e}set(e,t,r){const i=_g(e);return r?(uA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=_g(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=_g(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new yg(e,new yD(e),t),i.set(t,u)),u}}yg.INSTANCES=new WeakMap;class na{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new na(t,new tr(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new na(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new p_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new p_(this.firestore,Nx(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ln.m9)(e))instanceof tr&&Px(this._delegate,e)}set(e,t){t=uA("DocumentReference.set",t);try{return t?Jx(this._delegate,e,t):Jx(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Xx(this._delegate,e):Xx(this._delegate,e,t,...r)}catch(i){throw Ds(i,"updateDoc()","DocumentReference.update()")}}delete(){return function y1(n){return f_(cn(n.firestore,nr),[new ea(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=uR(e),r=lR(e,i=>new mw(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return eR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function h1(n){n=cn(n,tr);const e=cn(n.firestore,nr),t=qr(e),r=new af(e);return function TO(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const f=yield function(y,I){const S=ze(y);return S.persistence.runTransaction("read document","readonly",M=>S.localDocuments.getDocument(M,I))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new xe(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=$e(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield iD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new zc(e,r,n._key,i,new mg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function f1(n){n=cn(n,tr);const e=cn(n.firestore,nr);return bx(qr(e),n._key,{source:"server"}).then(t=>aA(e,n,t))}(this._delegate):function d1(n){n=cn(n,tr);const e=cn(n.firestore,nr);return bx(qr(e),n._key).then(t=>aA(e,n,t))}(this._delegate),t.then(r=>new mw(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new na(this.firestore,this._delegate.withConverter(e?yg.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function uR(n){for(const e of n)if("object"==typeof e&&!lA(e))return e;return{}}function lR(n,e){var t,r;let i;return i=lA(n[0])?n[0]:lA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new na(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Qx(this._delegate,e._delegate)}}class yw extends mw{data(e){const t=this._delegate.data(e);return function go(n,e){n||qe()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yD(e)}where(e,t,r){try{return new Cs(this.firestore,rf(this._delegate,function e1(n,e,t){const r=e,i=hD("where",n);return fw._create(i,r,t)}(e,t,r)))}catch(i){throw Ds(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,rf(this._delegate,function t1(n,e="asc"){const t=e,r=hD("orderBy",n);return sA._create(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,rf(this._delegate,function n1(n){return Mx("limit",n),fD._create("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,rf(this._delegate,function r1(n){return Mx("limitToLast",n),fD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,rf(this._delegate,function i1(...n){return pD._create("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,rf(this._delegate,function s1(...n){return pD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,rf(this._delegate,function o1(...n){return gD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,rf(this._delegate,function a1(...n){return gD._create("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return JT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function g1(n){n=cn(n,Ui);const e=cn(n.firestore,nr),t=qr(e),r=new af(e);return function AO(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const f=yield n_(i,u,!0),y=new hx(u,f.Wi),I=y.zu(f.documents),S=y.applyChanges(I,!1);c.resolve(S.snapshot)}catch(f){const y=$e(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield iD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new sf(e,r,n,i))}(this._delegate):"server"===e?.source?function m1(n){n=cn(n,Ui);const e=cn(n.firestore,nr),t=qr(e),r=new af(e);return Dx(t,n._query,{source:"server"}).then(i=>new sf(e,r,n,i))}(this._delegate):function p1(n){n=cn(n,Ui);const e=cn(n.firestore,nr),t=qr(e),r=new af(e);return Gx(n._query),Dx(t,n._query).then(i=>new sf(e,r,n,i))}(this._delegate),t.then(r=>new cA(this.firestore,new sf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uR(e),r=lR(e,i=>new cA(this.firestore,new sf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return eR(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?yg.getInstance(this.firestore,e):null))}}class U1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new U1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new yw(this._firestore,r))})}isEqual(e){return Qx(this._delegate,e._delegate)}}class p_ extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new na(this.firestore,e):null}doc(e){try{return new na(this.firestore,void 0===e?oD(this._delegate):oD(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function _1(n,e){const t=cn(n.firestore,nr),r=oD(n),i=mD(n.converter,e);return f_(t,[lD(pg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new na(this.firestore,t))}isEqual(e){return Px(this._delegate,e._delegate)}withConverter(e){return new p_(this.firestore,this._delegate.withConverter(e?yg.getInstance(this.firestore,e):null))}}function _g(n){return cn(n,tr)}class dA{constructor(...e){this._delegate=new Gc(...e)}static documentId(){return new dA(Xn.keyField().canonicalString())}isEqual(e){return(e=(0,ln.m9)(e))instanceof Gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class vg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function x1(){return new eA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vg(e)}static delete(){const e=function M1(){return new lw("deleteField")}();return e._methodName="FieldValue.delete",new vg(e)}static arrayUnion(...e){const t=function R1(...n){return new ZO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new vg(t)}static arrayRemove(...e){const t=function N1(...n){return new YO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new vg(t)}static increment(e){const t=function P1(n){return new QO("increment",n)}(e);return t._methodName="FieldValue.increment",new vg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const B1={Firestore:sR,GeoPoint:aD,Timestamp:xn,Blob:gw,Transaction:oR,WriteBatch:aR,DocumentReference:na,DocumentSnapshot:mw,Query:Cs,QueryDocumentSnapshot:yw,QuerySnapshot:cA,CollectionReference:p_,FieldPath:dA,FieldValue:vg,setLogLevel:function V1(n){!function rI(n){La.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function $1(n){(function j1(n,e){n.INTERNAL.registerComponent(new th.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},B1)))})(n,(e,t)=>new sR(e,t,new L1)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(EE.Z);var H1=k(6451),_D=k(5363),G1=k(6063);class z1 extends ei.x{constructor(e=1/0,t=1/0,r=G1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var q1=k(3099);function cR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,q1.B)({connector:()=>new z1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function dR(n,e){return(0,$s.m)(e)?yr(()=>n,e):yr(()=>n)}var hA=k(9468);k(259);const pA=new Map,fR={activated:!1,tokenObservers:[]},Q1={initialized:!1,enabled:!1};function Bi(n){return pA.get(n)||Object.assign({},fR)}function wD(){return Q1}class rk{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new ln.BH,yield function ik(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ln.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ss=new ln.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gR(n){if(!Bi(n).activated)throw Ss.create("use-before-activation",{appName:n.name})}function yA(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw Ss.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==c.status)throw Ss.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw Ss.create("fetch-parse-error",{originalErrorMessage:M?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw Ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const I=1e3*Number(y[1]),S=Date.now();return{token:f.token,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),_A.apply(this,arguments)}function uk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _w="firebase-app-check-store";let bD=null;function yR(){return bD||(bD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ss.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_w,{keyPath:"compositeKey"})}}catch(t){e(Ss.create("storage-open",{originalErrorMessage:t?.message}))}}),bD)}function vA(){return vA=(0,me.Z)(function*(n,e){const r=(yield yR()).transaction(_w,"readwrite"),u=r.objectStore(_w).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var I;f(Ss.create("storage-set",{originalErrorMessage:null===(I=y.target.error)||void 0===I?void 0:I.message}))}})}),vA.apply(this,arguments)}const vw=new uc.Yd("@firebase/app-check");function IA(n,e){return(0,ln.hl)()?function hk(n,e){return function _R(n,e){return vA.apply(this,arguments)}(function wR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ER(){return wD().enabled}function IR(){return DA.apply(this,arguments)}function DA(){return DA=(0,me.Z)(function*(){const n=wD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),DA.apply(this,arguments)}const _k={error:"UNKNOWN_ERROR"};function vk(n){return ln.US.encodeString(JSON.stringify(n),!1)}function DD(n){return CA.apply(this,arguments)}function CA(){return CA=(0,me.Z)(function*(n,e=!1){const t=n.app;gR(t);const r=Bi(t);let u,i=r.token;if(i&&!g_(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(g_(y)?i=y:yield IA(t,void 0))}if(!e&&i&&g_(i))return{token:i.token};let f,c=!1;if(ER()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yA(uk(t,yield IR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const y=yield r.exchangeTokenPromise;return yield IA(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Bi(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?vw.warn(y.message):vw.error(y),u=y}return i?u?f=g_(i)?{token:i.token,internalError:u}:CR(u):(f={token:i.token},r.token=i,yield IA(t,i)):f=CR(u),c&&DR(t,f),f}),CA.apply(this,arguments)}function TA(n,e){const t=Bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bR(n){const{app:e}=n,t=Bi(e);let r=t.tokenRefresher;r||(r=function wk(n){const{app:e}=n;return new rk((0,me.Z)(function*(){let r;if(r=Bi(e).token?yield DD(n,!0):yield DD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DR(n,e){const t=Bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function g_(n){return n.expireTimeMillis-Date.now()>0}function CR(n){return{token:vk(_k),error:n}}class Ek{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Bi(this.app);for(const t of e)TA(this.app,t.next);return Promise.resolve()}}const PR="app-check-internal";!function kk(){(0,Ru._registerComponent)(new th.wA("app-check",n=>function Ik(n,e){return new Ek(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PR).initialize()})),(0,Ru._registerComponent)(new th.wA(PR,n=>function bk(n){return{getToken:e=>DD(n,e),addTokenListener:e=>function SA(n,e,t,r){const{app:i}=n,u=Bi(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&g_(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),bR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>bR(n))}(n,"INTERNAL",e),removeTokenListener:e=>TA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ru.registerVersion)("@firebase/app-check","0.6.4")}();class RA{constructor(){return(0,yi.vb)("app-check")}}typeof window<"u"&&window;var Bk=k(9260);const kR=new g.OlP("angularfire2.auth.use-emulator"),FR=new g.OlP("angularfire2.auth.settings"),LR=new g.OlP("angularfire2.auth.tenant-id"),VR=new g.OlP("angularfire2.auth.langugage-code"),UR=new g.OlP("angularfire2.auth.use-device-language"),BR=new g.OlP("angularfire.auth.persistence"),jR=(n,e,t,r,i,u,c,f)=>(0,Gs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[I,S]of Object.entries(c))y.settings[I]=S;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let $R=(()=>{class n{constructor(t,r,i,u,c,f,y,I,S,M,L,G){const Z=new ei.x,ae=ct(void 0).pipe((0,_D.Q)(c.outsideAngular),yr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9800)))),(0,Nt.U)(()=>(0,Gs.on)(t,u,r)),(0,Nt.U)(be=>jR(be,u,f,I,S,M,y,L)),cR({bufferSize:1,refCount:!1}));if(Ar(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{ae.pipe(Ho()).subscribe();const We=ae.pipe(yr(Ct=>Ct.getRedirectResult().then(qt=>qt,()=>null)),yi.iC,cR({bufferSize:1,refCount:!1})),yt=ae.pipe(yr(Ct=>new fi.y(qt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onAuthStateChanged(Kt=>qt.next(Kt),Kt=>qt.error(Kt),()=>qt.complete()))})))),ut=ae.pipe(yr(Ct=>new fi.y(qt=>({unsubscribe:u.runOutsideAngular(()=>Ct.onIdTokenChanged(Kt=>qt.next(Kt),Kt=>qt.error(Kt),()=>qt.complete()))}))));this.authState=We.pipe(dR(yt),(0,hA.R)(c.outsideAngular),(0,_D.Q)(c.insideAngular)),this.user=We.pipe(dR(ut),(0,hA.R)(c.outsideAngular),(0,_D.Q)(c.insideAngular)),this.idToken=this.user.pipe(yr(Ct=>Ct?(0,hn.D)(Ct.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(yr(Ct=>Ct?(0,hn.D)(Ct.getIdTokenResult()):ct(null))),this.credential=(0,H1.T)(We,Z,this.authState.pipe(ds(Ct=>!Ct))).pipe((0,Nt.U)(Ct=>Ct?.user?Ct:null),(0,hA.R)(c.outsideAngular),(0,_D.Q)(c.insideAngular))}return(0,Gs.pX)(this,ae,u,{spy:{apply:(be,We,yt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&yt.then(ut=>Z.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Gs.Dh),g.LFG(Gs.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(yi.HU),g.LFG(kR,8),g.LFG(FR,8),g.LFG(LR,8),g.LFG(VR,8),g.LFG(UR,8),g.LFG(BR,8),g.LFG(RA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function HR(n,e){return function $k(n,e=PC.z){return new fi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function PA(n,e){return HR(n,e).pipe((0,Nt.U)(t=>({payload:t,type:"query"})))}function SD(n,e){return PA(n,e).pipe(Id(void 0),Y_(),(0,Nt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),I=t?.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function GR(n,e,t){return SD(n,t).pipe(Ca((r,i)=>function Gk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function zk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return OA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return OA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function OC(n,e=js.y){return n=n??kC,(0,Pn.e)((t,r)=>{let i,u=!0;t.subscribe((0,F.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function OA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function zR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class qR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=SD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Nt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Id(void 0),Y_(),ds(([r,i])=>i.length>0||!r),(0,Nt.U)(([r,i])=>i),yi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ca((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zR(e);return GR(this.query,t,this.afs.schedulers.outsideAngular).pipe(yi.iC)}valueChanges(e={}){return PA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yi.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(yi.iC)}add(e){return this.ref.add(e)}doc(e){return new WR(this.ref.doc(e),this.afs)}}class WR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=YR(r,t);return new qR(i,u,this.afs)}snapshotChanges(){return function Hk(n,e){return HR(n,e).pipe(Id(void 0),Y_(),(0,Nt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(yi.iC)}}class qk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ds(t=>t.length>0),yi.iC):SD(this.query,this.afs.schedulers.outsideAngular).pipe(yi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ca((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zR(e);return GR(this.query,t,this.afs.schedulers.outsideAngular).pipe(yi.iC)}valueChanges(e={}){return PA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yi.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(yi.iC)}}const KR=new g.OlP("angularfire2.enableFirestorePersistence"),ZR=new g.OlP("angularfire2.firestore.persistenceSettings"),Wk=new g.OlP("angularfire2.firestore.settings"),Kk=new g.OlP("angularfire2.firestore.use-emulator");function YR(n,e=(t=>t)){return{query:e(n),ref:n}}let QR=(()=>{class n{constructor(t,r,i,u,c,f,y,I,S,M,L,G,Z,ae,be,We,yt){this.schedulers=y;const ut=(0,Gs.on)(t,f,r),Ct=S;M&&jR(ut,f,L,Z,ae,be,G,We),[this.firestore,this.persistenceEnabled$]=(0,Gs.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const qt=f.runOutsideAngular(()=>ut.firestore());if(u&&qt.settings(u),Ct&&qt.useEmulator(...Ct),i&&!Ar(c)){const Kt=()=>{try{return(0,hn.D)(qt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Dn){return typeof console<"u"&&console.warn(Dn),ct(!1)}};return[qt,f.runOutsideAngular(Kt)]}return[qt,ct(!1)]},[u,Ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=YR(i,r),f=this.schedulers.ngZone.run(()=>u);return new qR(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new qk(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new WR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Gs.Dh),g.LFG(Gs.xv,8),g.LFG(KR,8),g.LFG(Wk,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(yi.HU),g.LFG(ZR,8),g.LFG(Kk,8),g.LFG($R,8),g.LFG(kR,8),g.LFG(FR,8),g.LFG(LR,8),g.LFG(VR,8),g.LFG(UR,8),g.LFG(BR,8),g.LFG(RA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zk=(()=>{class n{constructor(){Bk.Z.registerVersion("angularfire",yi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KR,useValue:!0},{provide:ZR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[QR]}),n})(),kA=(()=>{class n{constructor(t){this.db=t}getAllUsers(){return new Promise(t=>{this.db.collection("Users").valueChanges({idField:"id"}).subscribe(r=>t(r))})}addNewUser(t,r,i){this.db.collection("Users").doc(t).set({username:r,score:i})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(QR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yk(n,e){if(1&n&&(g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA()()),2&n){const t=e.$implicit,r=e.index;g.xp6(2),g.Oqu(r+1),g.xp6(2),g.Oqu(t.username),g.xp6(2),g.Oqu(t.score)}}let Qk=(()=>{class n{constructor(t){this.firebaseService=t}ngOnInit(){this.getUsers().then()}getUsers(){var t=this;return(0,me.Z)(function*(){t.players=yield t.firebaseService.getAllUsers(),t.players.sort((r,i)=>i.score-r.score),t.players=t.players.slice(0,10)})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(kA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-leaderboard"]],decls:14,vars:1,consts:[[1,"container"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h1"),g._uU(2,"Best players"),g.qZA(),g.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),g._uU(7,"Rank"),g.qZA(),g.TgZ(8,"th"),g._uU(9,"Username"),g.qZA(),g.TgZ(10,"th"),g._uU(11,"Score"),g.qZA()()(),g.TgZ(12,"tbody"),g.YNc(13,Yk,7,3,"tr",1),g.qZA()()()),2&t&&(g.xp6(13),g.Q6J("ngForOf",r.players))},dependencies:[Ns],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;color:#fff}table[_ngcontent-%COMP%]{background-color:#f9dfdc;color:#1b262c;width:50%;text-align:center;padding:20px;margin-top:50px;margin-bottom:150px;border-radius:20px;font-size:20px}@media (max-width: 1280px){table[_ngcontent-%COMP%]{width:80%}}"]}),n})(),Jk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:0,consts:[[1,"container"],[1,"menu"],["routerLink","/game",1,"button-start"],["routerLink","/game2",1,"button-start"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"button",2),g._uU(3,"START"),g.qZA(),g.TgZ(4,"button",3),g._uU(5,"START V2"),g.qZA()(),g._UZ(6,"app-leaderboard"),g.qZA())},dependencies:[wm,Qk],styles:[".container[_ngcontent-%COMP%]{background-color:#000}.menu[_ngcontent-%COMP%]{border-bottom:2px solid blue;height:70px;display:flex;justify-content:center;padding:20px;gap:20px}.button-start[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background-color:#ecdbba;border-radius:40em;border-style:none;box-shadow:#ff6314b5 0 -6px 8px inset;box-sizing:border-box;color:#000;cursor:pointer;display:inline-block;font-family:-apple-system,sans-serif;font-size:1.2rem;font-weight:700;letter-spacing:-.24px;margin:0;outline:none;padding:1rem 1.3rem;text-align:center;text-decoration:none;transition:all .15s;user-select:none;-webkit-user-select:none;touch-action:manipulation}.button-start[_ngcontent-%COMP%]:hover{background-color:#ffa372;box-shadow:#ff6314b5 0 -6px 8px inset;transform:scale(1.125)}.button-start[_ngcontent-%COMP%]:active{transform:scale(1.025)}@media (min-width: 768px){.button-start[_ngcontent-%COMP%]{font-size:1.5rem;padding:.75rem 2rem}}"]}),n})(),JR=(()=>{class n{constructor(){this.map=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,4,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,4,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,1,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,2,2,2,0,1,0,1,0,0,0,0],[1,2,2,2,1,1,1,0,2,3,6,0,1,1,1,2,1,2,1],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[2,2,2,0,1,0,1,1,1,2,1,1,1,0,1,0,2,2,2],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,4,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,4,0],[0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,5,1,1,1,0],[0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0],[0,1,1,2,2,2,1,1,2,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xk=(()=>{class n{constructor(t){this.services=t,this.wall=0,this.isGameFinished=!1,this.gameFinished$=new ei.x,this.ghostMove=2,this.isGhostMoving=!1,this.ghostSpeed=100,this.isBlueGhostMoving=!1,this.ghostBleMove=2,this.storedValueBlue=1,this.storedValuePink=2,this.gameMap=t.map;let r=this.gameMap;for(let i=0;i<r.length;i++)for(let u=0;u<r[i].length;u++)3===r[i][u]&&(this.initGhostX=i,this.initGhostY=u),6===r[i][u]&&(this.initGhostBlueX=i,this.initGhostBlueY=u)}moveGhostRandomly(){let t=this.initGhostX,r=this.initGhostY,i=this.initGhostX,u=this.initGhostY,c=Math.floor(4*Math.random())+1;switch(this.ghostMove){case 1:t--;break;case 2:r++;break;case 3:t++;break;case 4:r--}let f=this.gameMap[t][r];f==this.wall||6===f?this.changeGhostDirection(c):5==f?(clearInterval(this.slowMovementIntervalG),clearInterval(this.movementIntervalForBlue),this.isGhostMoving=!1,this.isBlueGhostMoving=!1,this.setIsGameFinished(!0)):(this.initGhostX=t,this.initGhostY=r,this.ghostMoved(t,r,i,u))}moveBlueGhostRandomly(){let t=this.initGhostBlueX,r=this.initGhostBlueY,i=this.initGhostBlueX,u=this.initGhostBlueY,c=Math.floor(4*Math.random())+1;switch(this.ghostBleMove){case 1:t--;break;case 2:r++;break;case 3:t++;break;case 4:r--}let f=this.gameMap[t][r];f==this.wall||3===f?this.changeBlueGhostDirection(c):5==f?(clearInterval(this.slowMovementIntervalG),clearInterval(this.movementIntervalForBlue),this.isGhostMoving=!1,this.isBlueGhostMoving=!1,this.setIsGameFinished(!0)):(this.initGhostBlueX=t,this.initGhostBlueY=r,this.ghostBlueMoved(t,r,i,u))}ghostMoved(t,r,i,u){this.gameMap[i][u]=this.storedValuePink;const c=this.gameMap[t][r];this.gameMap[t][r]=3,this.storedValuePink=c}ghostBlueMoved(t,r,i,u){this.gameMap[i][u]=this.storedValueBlue;const c=this.gameMap[t][r];this.gameMap[t][r]=6,this.storedValueBlue=c}startGhostMovement(){this.isGhostMoving||(this.isGhostMoving=!0,this.slowMovementIntervalG=setInterval(()=>{this.moveGhostRandomly()},this.ghostSpeed))}startBlueGhostMovement(){this.isBlueGhostMoving||(this.isBlueGhostMoving=!0,this.movementIntervalForBlue=setInterval(()=>{this.moveBlueGhostRandomly()},this.ghostSpeed))}changeGhostDirection(t){this.ghostMove=t,this.getGhostNumber(),this.startGhostMovement()}getGhostNumber(){return this.ghostMove}changeBlueGhostDirection(t){this.ghostBleMove=t,this.startBlueGhostMovement()}setIsGameFinished(t){this.isGameFinished=t,this.gameFinished$.next(t)}getIsGameFinished(){return this.isGameFinished}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(JR))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),wg=(()=>{class n extends XR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Xu=new g.OlP("NgValueAccessor"),nF={provide:Xu,useExisting:(0,g.Gpc)(()=>ww),multi:!0},iF=new g.OlP("CompositionEventMode");let ww=(()=>{class n extends XR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rF(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(iF,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([nF]),g.qOj]}),n})();const ns=new g.OlP("NgValidators"),cf=new g.OlP("NgAsyncValidators");function iN(n){return function lf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function TD(n){return null}function cN(n){return null!=n}function dN(n){return(0,g.QGY)(n)?(0,hn.D)(n):n}function hN(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function fN(n,e){return e.map(t=>t(n))}function pN(n){return n.map(e=>function aF(n){return!n.validate}(e)?e:t=>e.validate(t))}function FA(n){return null!=n?function gN(n){if(!n)return null;const e=n.filter(cN);return 0==e.length?null:function(t){return hN(fN(t,e))}}(pN(n)):null}function LA(n){return null!=n?function mN(n){if(!n)return null;const e=n.filter(cN);return 0==e.length?null:function(t){return function eF(...n){const e=(0,Bs.jO)(n),{args:t,keys:r}=kl(n),i=new fi.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let y=c,I=c;for(let S=0;S<c;S++){let M=!1;(0,Et.Xf)(t[S]).subscribe((0,F.x)(u,L=>{M||(M=!0,I--),f[S]=L},()=>y--,void 0,()=>{(!y||!M)&&(I||u.next(r?x(r,f):f),u.complete())}))}});return e?i.pipe(C(e)):i}(fN(t,e).map(dN)).pipe((0,Nt.U)(hN))}}(pN(n)):null}function yN(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VA(n){return n?Array.isArray(n)?n:[n]:[]}function AD(n,e){return Array.isArray(n)?n.includes(e):n===e}function wN(n,e){const t=VA(e);return VA(n).forEach(i=>{AD(t,i)||t.push(i)}),t}function EN(n,e){return VA(e).filter(t=>!AD(n,t))}class IN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ts extends IN{get formDirective(){return null}get path(){return null}}class df extends IN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bN{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let UA=(()=>{class n extends bN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(df,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),BA=(()=>{class n extends bN{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ts,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const Ew="VALID",xD="INVALID",m_="PENDING",Iw="DISABLED";function GA(n){return(RD(n)?n.validators:n)||null}function CN(n){return Array.isArray(n)?FA(n):n||null}function zA(n,e){return(RD(e)?e.asyncValidators:n)||null}function SN(n){return Array.isArray(n)?LA(n):n||null}function RD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class MN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=CN(this._rawValidators),this._composedAsyncValidatorFn=SN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ew}get invalid(){return this.status===xD}get pending(){return this.status==m_}get disabled(){return this.status===Iw}get enabled(){return this.status!==Iw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=CN(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=SN(e)}addValidators(e){this.setValidators(wN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(EN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(EN(e,this._rawAsyncValidators))}hasValidator(e){return AD(this._rawValidators,e)}hasAsyncValidator(e){return AD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=m_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Iw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ew,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ew||this.status===m_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Iw:Ew}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=m_,this._hasOwnPendingAsyncValidator=!0;const t=dN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Iw:this.errors?xD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(m_)?m_:this._anyControlsHaveStatus(xD)?xD:Ew}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){RD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class qA extends MN{constructor(e,t,r){super(GA(t),zA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function AN(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function TN(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function bw(n,e){WA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function mF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xN(n,e)})}(n,e),function _F(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function yF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function OD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WA(n,e){const t=function _N(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(yN(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function vN(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(yN(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();OD(e._rawValidators,i),OD(e._rawAsyncValidators,i)}function xN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const bF={provide:Ts,useExisting:(0,g.Gpc)(()=>Cw)},Dw=(()=>Promise.resolve())();let Cw=(()=>{class n extends Ts{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new qA({},FA(t),LA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dw.then(()=>{const r=this._findContainer(t.path),i=new qA({});(function RN(n,e){WA(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Dw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function PN(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ns,10),g.Y36(cf,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([bF]),g.qOj]}),n})();function ON(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function kN(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const FN=class extends MN{constructor(e=null,t,r){super(GA(t),zA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),RD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=kN(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ON(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ON(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){kN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},SF={provide:df,useExisting:(0,g.Gpc)(()=>FD)},UN=(()=>Promise.resolve())();let FD=(()=>{class n extends df{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new FN,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ZA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===ww?t=u:function EF(n){return Object.getPrototypeOf(n.constructor)===wg}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function KA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){UN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,g.D6c)(r);UN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ND(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ts,9),g.Y36(ns,10),g.Y36(cf,10),g.Y36(Xu,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([SF]),g.qOj,g.TTD]}),n})(),YA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),jN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),Eg=(()=>{class n{constructor(){this._validator=TD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):TD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const GF={provide:ns,useExisting:(0,g.Gpc)(()=>Sw),multi:!0};let Sw=(()=>{class n extends Eg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=t=>iN}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([GF]),g.qOj]}),n})(),YF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[jN]}),n})(),QF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[YF]}),n})();function XF(n,e){1&n&&(g.TgZ(0,"div",1),g._UZ(1,"div",2),g.TgZ(2,"div",3),g.Hsn(3),g.qZA()())}const eL=["*"];let sP=(()=>{class n{constructor(){this.username="",this.visible=!1}ngOnInit(){}submit(){}show(){this.visible=!0}hide(){this.visible=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-popup-dialog"]],inputs:{visible:"visible"},ngContentSelectors:eL,decls:1,vars:1,consts:[["class","modal-container",4,"ngIf"],[1,"modal-container"],[1,"modal-backdrop"],[1,"modal-dialog"]],template:function(t,r){1&t&&(g.F$t(),g.YNc(0,XF,4,0,"div",0)),2&t&&g.Q6J("ngIf",r.visible)},dependencies:[pr],styles:[".modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.modal-dialog[_ngcontent-%COMP%]{background-color:#ecdbba;color:#000;margin:50px;padding:40px 70px}"]}),n})();const tL=["modal"],nL=function(n,e,t,r,i,u,c){return{pacman:n,wall:e,coin:t,road:r,ghostPink:i,"bonus-coin":u,"ghost-blue":c}},rL=function(n){return{"background-image":n}};function iL(n,e){if(1&n&&g._UZ(0,"div",12),2&n){const t=e.$implicit,r=g.oxw(2);g.Q6J("ngClass",g.Hh0(2,nL,5===t,0===t,1===t,2===t,3===t,4===t,6===t))("ngStyle",g.VKq(10,rL,5===t?1===r.pacmanMove?"url(/assets/images/pacman-up.png)":2===r.pacmanMove?"url(/assets/images/pacman-right.png)":3===r.pacmanMove?"url(/assets/images/pacman-down.png)":4===r.pacmanMove?"url(/assets/images/pacman-left.png)":5===r.pacmanMove?"url(/assets/images/pacman-die-1.png)":"":3===t?1===r.getGhostNumber()?"url(/assets/images/pink-ghost-up.png)":2===r.getGhostNumber()?"url(/assets/images/pink-ghost-right.png)":3===r.getGhostNumber()?"url(/assets/images/pink-ghost-down.png)":4===r.getGhostNumber()?"url(/assets/images/pink-ghost-left.png)":"":""))}}function sL(n,e){if(1&n&&(g.TgZ(0,"div",10),g.YNc(1,iL,1,12,"div",11),g.qZA()),2&n){const t=e.$implicit;g.xp6(1),g.Q6J("ngForOf",t)}}let oL=(()=>{class n{constructor(t,r,i,u){this.services=t,this.ghostService=r,this.router=i,this.firebaseService=u,this.title="Pacman Game",this.totalScore=0,this.gameStarted=!1,this.eatCoin=10,this.eatBigCoin=40,this.lives=3,this.secondLive=!1,this.thirdLive=!1,this.gameOver=!1,this.wall=0,this.coin=1,this.road=2,this.ghost=3,this.bigCoin=4,this.pacman=5,this.pacmanMove=2,this.isMoving=!1,this.slowMovementSpeed=200,this.arrLives=[],this.username="",document.title=this.title,this.gameMap=t.map}ngOnInit(){this.initializeComponent(),this.ghostService.startGhostMovement(),this.ghostService.startBlueGhostMovement()}initializeComponent(){let t=this.gameMap;for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)5===t[r][i]&&(this.initPacmanX=r,this.initPacmanY=i);this.isLevelFinished=this.ghostService.getIsGameFinished(),this.levelFinishedSubscription=this.ghostService.gameFinished$.subscribe(r=>{r&&(console.log(this.lives),this.lives--,this.lives>0?(this.pacmanMove=5,this.respawnPacman()):setTimeout(()=>{this.showModal()},1e3))})}respawnPacman(){this.startPocmanMovement()}getGhostNumber(){return this.ghostService.getGhostNumber()}movePacman(){let t=this.initPacmanX,r=this.initPacmanY,i=this.initPacmanX,u=this.initPacmanY;switch(this.pacmanMove){case 1:t--;break;case 2:r++;break;case 3:t++;break;case 4:r--}r>18&&(console.log(r),r=0),r<0&&(r=18);let c=this.gameMap[t][r];c==this.wall?this.stopPacman():(this.initPacmanX=t,this.initPacmanY=r,this.pacmanMoved(t,r,i,u),this.scoreUpdate(c))}startPocmanMovement(){this.isMoving||(this.isMoving=!0,this.firstMovementInterval=setInterval(()=>{this.movePacman()},this.slowMovementSpeed))}changeDirection(t){this.pacmanMove=t,this.stopPacman(),this.startPocmanMovement()}stopPacman(){clearInterval(this.firstMovementInterval),this.isMoving=!1}controlKeyboardEvent(t){switch(t.keyCode){case 37:this.changeDirection(4),this.gameStarted=!0,this.ghostService.startGhostMovement(),this.ghostService.startBlueGhostMovement();break;case 38:this.changeDirection(1),this.gameStarted=!0,this.ghostService.startGhostMovement(),this.ghostService.startBlueGhostMovement();break;case 39:this.changeDirection(2),this.gameStarted=!0,this.ghostService.startGhostMovement(),this.ghostService.startBlueGhostMovement();break;case 40:this.changeDirection(3),this.gameStarted=!0,this.ghostService.startGhostMovement(),this.ghostService.startBlueGhostMovement();break;default:this.stopPacman()}}pacmanMoved(t,r,i,u){this.gameMap[t][r]=5,this.gameMap[i][u]=2}scoreUpdate(t){t==this.coin?this.totalScore=this.totalScore+this.eatCoin:t==this.bigCoin&&(this.totalScore=this.totalScore+this.eatBigCoin)}showModal(){this.modal.show()}submit(){this.modal.hide();let t=Math.random().toString();this.router.navigate(["/"]),this.firebaseService.addNewUser(t,this.username,this.totalScore)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(JR),g.Y36(Xk),g.Y36(En),g.Y36(kA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-pacman-game"]],viewQuery:function(t,r){if(1&t&&g.Gf(tL,5),2&t){let i;g.iGM(i=g.CRH())&&(r.modal=i.first)}},hostBindings:function(t,r){1&t&&g.NdJ("keydown",function(u){return r.controlKeyboardEvent(u)},!1,g.Jf7)},decls:17,vars:4,consts:[[1,"main-container"],[2,"color","#FFFFFF"],["modal",""],["form","ngForm"],[1,"form-style"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled","click"],[1,"game-section"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","block",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"block",3,"ngClass","ngStyle"]],template:function(t,r){if(1&t&&(g.TgZ(0,"div",0)(1,"h1",1),g._uU(2),g.qZA(),g.TgZ(3,"app-popup-dialog",null,2)(5,"h2"),g._uU(6,"Save your score!"),g.qZA(),g.TgZ(7,"form",null,3)(9,"div",4)(10,"label",5),g._uU(11,"Username:"),g.qZA(),g.TgZ(12,"input",6),g.NdJ("ngModelChange",function(u){return r.username=u}),g.qZA()(),g.TgZ(13,"button",7),g.NdJ("click",function(){return r.submit()}),g._uU(14,"Continue"),g.qZA()()(),g.TgZ(15,"section",8),g.YNc(16,sL,2,1,"div",9),g.qZA()()),2&t){const i=g.MAs(8);g.xp6(2),g.hij("Total Score ",r.totalScore,""),g.xp6(10),g.Q6J("ngModel",r.username),g.xp6(1),g.Q6J("disabled",i.invalid),g.xp6(3),g.Q6J("ngForOf",r.gameMap)}},dependencies:[dn,Ns,Qc,YA,ww,UA,BA,Sw,FD,Cw,sP],styles:[".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#000;padding:80px}.game-section[_ngcontent-%COMP%]{background-image:url(sprite-sheet.v2.9f9c0f4b1c730ec3.png);background-repeat:no-repeat;background-size:100% 100%}.block[_ngcontent-%COMP%]{width:25px;height:25px;display:inline-block;margin:-2px -2px -2px 2px}.pacman[_ngcontent-%COMP%]{background-image:url(pacman-right.5312f6248c33e32b.png);background-size:100% 100%;background-repeat:no-repeat}.coin[_ngcontent-%COMP%]{background-image:url(coin.7be70e53fca66510.png);background-size:25% 25%;background-repeat:no-repeat;background-position:center}.bonus-coin[_ngcontent-%COMP%]{background-image:url(coin.7be70e53fca66510.png);background-size:60% 60%;background-repeat:no-repeat;background-position:center}.wall[_ngcontent-%COMP%]{background-size:100% 100%;background-repeat:no-repeat}.road[_ngcontent-%COMP%]{background-size:100% 100%}.ghostPink[_ngcontent-%COMP%]{background-image:url(pink-ghost-right.7afcfe916e2fb55e.png);background-size:100% 100%;background-repeat:no-repeat}.ghost-blue[_ngcontent-%COMP%]{background-image:url(ghost_blue.160cd2a08eb90403.png);background-size:100% 100%;background-repeat:no-repeat}.ghost-orange[_ngcontent-%COMP%]{background-image:url(ghost_orange.58cf199f90380d79.png);background-size:100% 100%;background-repeat:no-repeat}.form-style[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:1rem;border:1px solid #ccc;border-radius:5px;box-shadow:0 2px 4px #0003}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}input[type=text][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:.5rem 1rem;cursor:pointer;margin:15px 0}button[_ngcontent-%COMP%]:hover{background-color:#0069d9}button[_ngcontent-%COMP%]:disabled{background-color:#0069d92b}"]}),n})();class aL{constructor({velocity:e,position:t,pressedKey:r,radius:i}){this.radius=40,this.position=t,this.velocity=e,this.pressedKey=r,this.radius=i}draw(e){e.beginPath(),e.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),e.fillStyle="yellow",e.fill(),e.closePath()}update(e){this.draw(e),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y}}const uL=["canvasPacman"],lL=["modal"],cL=[{path:"home",component:Jk},{path:"game",component:oL},{path:"game2",component:(()=>{class n{constructor(t,r){this.router=t,this.firebaseService=r,this.spriteImage=new Image,this.canvasWidth=window.innerWidth,this.canvasHeight=window.innerHeight,this.elRadius=1,this.chrBoundaryWide=8,this.chrBoundaryThick=8,this.arrayLeft=37,this.arrayUp=38,this.arrayRight=39,this.arrayDown=40,this.totalScore=0,this.username="",this.gameOver=!1,this.pacman=new aL({position:{x:300,y:300},velocity:{x:0,y:0},pressedKey:-1,radius:this.elRadius}),this.contours={},this.spriteImage.src="assets/media/png/sprite-sheet.png",this.canvasWidth>this.canvasHeight?this.canvasWidth=this.canvasHeight:this.canvasHeight=this.canvasWidth}OnKeyDown(t){this.pacman.pressedKey=t.keyCode}OnKeyUp(t){this.pacman.pressedKey=-1}ngOnInit(){this.cCtx=this.canvasRef.nativeElement.getContext("2d"),this.canvasRef.nativeElement.width=this.canvasWidth,this.canvasRef.nativeElement.height=this.canvasHeight,this.elRadius=Math.floor(.017*this.canvasWidth),this.pacman.radius=this.elRadius,this.chrBoundaryWide=Math.floor(.8*this.pacman.radius),this.modifyImage(),this.animate(),this.gameOver&&this.showModal()}modifyImage(){this.spriteImage.onload=()=>{this.cCtx.drawImage(this.spriteImage,0,0,225,250,.2*this.canvasWidth,.2*this.canvasWidth,.6*this.canvasWidth,.6*this.canvasWidth),this.imageData=this.cCtx.getImageData(0,0,this.canvasWidth,this.canvasHeight);for(let t=0;t<this.imageData.data.length;t+=4){let r=this.imageData.data[t],i=this.imageData.data[t+1],u=this.imageData.data[t+2];u>r&&u>i&&u-r>20&&u-i>20?(this.imageData.data[t]=255,this.imageData.data[t+1]=255,this.imageData.data[t+2]=255):(this.imageData.data[t]=0,this.imageData.data[t+1]=0,this.imageData.data[t+2]=0)}for(let t=0;t<this.canvasWidth;t+=2){this.contours[t]=[];for(let r=0;r<this.canvasWidth;r+=4)255===this.imageData.data[4*(r*this.canvasWidth+t)]&&this.contours[t].push(r)}Object.keys(this.contours).forEach(t=>{this.contours[+t].forEach(r=>{this.drawPoint(+t,r,"pink")})})}}animate(){switch(requestAnimationFrame(()=>this.animate()),this.cCtx.clearRect(0,0,.6*this.canvasWidth,.6*this.canvasWidth),this.cCtx.drawImage(this.spriteImage,0,0,225,250,.2*this.canvasWidth,.2*this.canvasWidth,.6*this.canvasWidth,.6*this.canvasWidth),this.pacman.pressedKey){case this.arrayLeft:this.pacman.velocity.x=this.collisionXDetection(-1,-1)?0:-5;break;case this.arrayUp:this.pacman.velocity.y=this.collisionYDetection(-1,-1)?0:-5;break;case this.arrayRight:this.pacman.velocity.x=this.collisionXDetection(1,1)?0:5;break;case this.arrayDown:this.pacman.velocity.y=this.collisionYDetection(1,1)?0:5;break;default:this.pacman.velocity.x=0,this.pacman.velocity.y=0}this.pacman.update(this.cCtx)}collisionXDetection(t,r){let i=!1;for(let u=1;u<this.chrBoundaryThick;u++){if(i)return!0;for(let c=-this.chrBoundaryWide;c<this.chrBoundaryWide;c++){const f=t*this.pacman.radius,y=u*r;if(this.drawPoint(this.pacman.position.x+f+y,this.pacman.position.y+c,"red"),this.contours[this.pacman.position.x+f+y]&&this.contours[this.pacman.position.x+f+y].indexOf(this.pacman.position.y+c)>-1){i=!0;break}}}return!1}collisionYDetection(t,r){let i=!1;for(let u=1;u<this.chrBoundaryThick;u++){if(i)return!0;for(let c=-this.chrBoundaryWide;c<this.chrBoundaryWide;c++){const f=t*this.pacman.radius,y=u*r;if(this.drawPoint(this.pacman.position.x+c,this.pacman.position.y+f+y,"red"),this.contours[this.pacman.position.x+c]&&this.contours[this.pacman.position.x+c].indexOf(this.pacman.position.y+f+y)>-1){this.contours[this.pacman.position.x+c].indexOf(this.pacman.position.y+f+y),i=!0;break}}}return!1}drawPoint(t,r,i){this.cCtx.beginPath(),this.cCtx.arc(t,r,2,0,2*Math.PI),this.cCtx.fillStyle=i,this.cCtx.fill(),this.cCtx.closePath()}showModal(){this.modal.show()}submit(){this.modal.hide();let t=Math.random().toString();this.router.navigate(["/"]),this.firebaseService.addNewUser(t,this.username,this.totalScore)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(En),g.Y36(kA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-game-version2"]],viewQuery:function(t,r){if(1&t&&(g.Gf(uL,7),g.Gf(lL,5)),2&t){let i;g.iGM(i=g.CRH())&&(r.canvasRef=i.first),g.iGM(i=g.CRH())&&(r.modal=i.first)}},hostBindings:function(t,r){1&t&&g.NdJ("keydown",function(u){return r.OnKeyDown(u)},!1,g.Jf7)("keyup",function(u){return r.OnKeyUp(u)},!1,g.Jf7)},decls:17,vars:3,consts:[[1,"main-container"],[2,"color","#FFFFFF"],["modal",""],["form","ngForm"],[1,"form-style"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled","click"],[1,"canvas_pacman"],["canvasPacman",""]],template:function(t,r){if(1&t&&(g.TgZ(0,"div",0)(1,"h1",1),g._uU(2),g.qZA(),g.TgZ(3,"app-popup-dialog",null,2)(5,"h2"),g._uU(6,"Save your score!"),g.qZA(),g.TgZ(7,"form",null,3)(9,"div",4)(10,"label",5),g._uU(11,"Username:"),g.qZA(),g.TgZ(12,"input",6),g.NdJ("ngModelChange",function(u){return r.username=u}),g.qZA()(),g.TgZ(13,"button",7),g.NdJ("click",function(){return r.submit()}),g._uU(14,"Continue"),g.qZA()()()(),g._UZ(15,"canvas",8,9)),2&t){const i=g.MAs(8);g.xp6(2),g.hij("Total Score ",r.totalScore,""),g.xp6(10),g.Q6J("ngModel",r.username),g.xp6(1),g.Q6J("disabled",i.invalid)}},dependencies:[YA,ww,UA,BA,Sw,FD,Cw,sP],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1 0 auto;background-color:#000}.form-style[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:1rem;border:1px solid #ccc;border-radius:5px;box-shadow:0 2px 4px #0003}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}input[type=text][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:.5rem 1rem;cursor:pointer;margin:15px 0}button[_ngcontent-%COMP%]:hover{background-color:#0069d9}button[_ngcontent-%COMP%]:disabled{background-color:#738ba4c4}"]}),n})()},{path:"",redirectTo:"home",pathMatch:"full"}];let dL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[vE.forRoot(cL),vE]}),n})(),hL=(()=>{class n{constructor(){this.title="pocman-game"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[tc]}),n})();class oP{}const qc="*";function aP(n,e=null){return{type:2,steps:n,options:e}}function uP(n){return{type:6,styles:n,offset:null}}function lP(n){Promise.resolve().then(n)}class Tw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){lP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?lP(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function dP(n){return new g.vHH(3e3,!1)}function KL(){return typeof window<"u"&&typeof window.document<"u"}function rM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function hf(n){switch(n.length){case 0:return new Tw;case 1:return n[0];default:return new cP(n)}}function hP(n,e,t,r,i=new Map,u=new Map){const c=[],f=[];let y=-1,I=null;if(r.forEach(S=>{const M=S.get("offset"),L=M==y,G=L&&I||new Map;S.forEach((Z,ae)=>{let be=ae,We=Z;if("offset"!==ae)switch(be=e.normalizePropertyName(be,c),We){case"!":We=i.get(ae);break;case qc:We=u.get(ae);break;default:We=e.normalizeStyleValue(ae,be,We,c)}G.set(be,We)}),L||f.push(G),I=G,y=M}),c.length)throw function FL(n){return new g.vHH(3502,!1)}();return f}function iM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&sM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&sM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&sM(t,"destroy",n)))}}function sM(n,e,t){const u=oM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function oM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Co(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function fP(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let aM=(n,e)=>!1,pP=(n,e,t)=>[],gP=null;function uM(n){const e=n.parentNode||n.host;return e===gP?null:e}(rM()||typeof Element<"u")&&(KL()?(gP=(()=>document.documentElement)(),aM=(n,e)=>{for(;e;){if(e===n)return!0;e=uM(e)}return!1}):aM=(n,e)=>n.contains(e),pP=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ig=null,mP=!1;const yP=aM,_P=pP;let vP=(()=>{class n{validateStyleProperty(t){return function YL(n){Ig||(Ig=function QL(){return typeof document<"u"?document.body:null}()||{},mP=!!Ig.style&&"WebkitAppearance"in Ig.style);let e=!0;return Ig.style&&!function ZL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ig.style,!e&&mP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ig.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return yP(t,r)}getParentElement(t){return uM(t)}query(t,r,i){return _P(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new Tw(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),lM=(()=>{class n{}return n.NOOP=new vP,n})();const cM="ng-enter",LD="ng-leave",VD="ng-trigger",UD=".ng-trigger",EP="ng-animating",dM=".ng-animating";function Wc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:hM(parseFloat(e[1]),e[2])}function hM(n,e){return"s"===e?1e3*n:n}function BD(n,e,t){return n.hasOwnProperty("duration")?n:function eV(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(dP()),{duration:0,delay:0,easing:""};i=hM(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=hM(parseFloat(y),f[4]));const I=f[5];I&&(c=I)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function pL(){return new g.vHH(3100,!1)}()),f=!0),u<0&&(e.push(function gL(){return new g.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,dP())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Aw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function IP(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function ff(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function DP(n,e,t){return t?e+":"+t+";":""}function CP(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=DP(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=DP(0,iV(t),n.style[t]));n.setAttribute("style",e)}function el(n,e,t){n.style&&(e.forEach((r,i)=>{const u=pM(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),rM()&&CP(n))}function bg(n,e){n.style&&(e.forEach((t,r)=>{const i=pM(r);n.style[i]=""}),rM()&&CP(n))}function Mw(n){return Array.isArray(n)?1==n.length?n[0]:aP(n):n}const fM=new RegExp("{{\\s*(.+?)\\s*}}","g");function SP(n){let e=[];if("string"==typeof n){let t;for(;t=fM.exec(n);)e.push(t[1]);fM.lastIndex=0}return e}function xw(n,e,t){const r=n.toString(),i=r.replace(fM,(u,c)=>{let f=e[c];return null==f&&(t.push(function yL(n){return new g.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function jD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const rV=/-+([a-z0-9])/g;function pM(n){return n.replace(rV,(...e)=>e[1].toUpperCase())}function iV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function So(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _L(n){return new g.vHH(3004,!1)}()}}function TP(n,e){return window.getComputedStyle(n)[e]}function cV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function dV(n,e,t){if(":"==n[0]){const y=function hV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function NL(n){return new g.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function RL(n){return new g.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(AP(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(AP(c,i))}(r,t,e)):t.push(n),t}const zD=new Set(["true","1"]),qD=new Set(["false","0"]);function AP(n,e){const t=zD.has(n)||qD.has(n),r=zD.has(e)||qD.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?zD.has(n):qD.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?zD.has(e):qD.has(e)),c&&f}}const fV=new RegExp("s*:selfs*,?","g");function gM(n,e,t,r){return new pV(n).build(e,t,r)}class pV{constructor(e){this._driver=e}build(e,t,r){const i=new yV(t);return this._resetContextStyleTimingState(i),So(this,Mw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function wL(){return new g.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,I=y.name;I.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=I}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function EL(){return new g.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{SP(y).forEach(I=>{c.hasOwnProperty(I)||u.add(I)})})}),u.size&&(jD(u.values()),t.errors.push(function IL(n,e){return new g.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=So(this,Mw(e.animation),t);return{type:1,matchers:cV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Dg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>So(this,r,t)),options:Dg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=So(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Dg(e.options)}}visitAnimate(e,t){const r=function vV(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return mM(BD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=mM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=BD(t,e);return mM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:uP({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const I={};r.easing&&(I.easing=r.easing),c=uP(I)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===qc?r.push(f):t.errors.push(new g.vHH(3002,!1)):r.push(IP(f));let u=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!u))for(let y of f.values())if(y.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,y)=>{const I=t.collectedStyles.get(t.currentQuerySelector),S=I.get(y);let M=!0;S&&(u!=i&&u>=S.startTime&&i<=S.endTime&&(t.errors.push(function DL(n,e,t,r,i){return new g.vHH(3010,!1)}()),M=!1),u=S.startTime),M&&I.set(y,{startTime:u,endTime:i}),t.options&&function nV(n,e,t){const r=e.params||{},i=SP(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function mL(n){return new g.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function CL(){return new g.vHH(3011,!1)}()),r;let u=0;const c=[];let f=!1,y=!1,I=0;const S=e.steps.map(We=>{const yt=this._makeStyleAst(We,t);let ut=null!=yt.offset?yt.offset:function _V(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(yt.styles),Ct=0;return null!=ut&&(u++,Ct=yt.offset=ut),y=y||Ct<0||Ct>1,f=f||Ct<I,I=Ct,c.push(Ct),yt});y&&t.errors.push(function SL(){return new g.vHH(3012,!1)}()),f&&t.errors.push(function TL(){return new g.vHH(3200,!1)}());const M=e.steps.length;let L=0;u>0&&u<M?t.errors.push(function AL(){return new g.vHH(3202,!1)}()):0==u&&(L=1/(M-1));const G=M-1,Z=t.currentTime,ae=t.currentAnimateTimings,be=ae.duration;return S.forEach((We,yt)=>{const ut=L>0?yt==G?1:L*yt:c[yt],Ct=ut*be;t.currentTime=Z+ae.delay+Ct,ae.duration=Ct,this._validateStyleAst(We,t),We.offset=ut,r.styles.push(We)}),r}visitReference(e,t){return{type:8,animation:So(this,Mw(e.animation),t),options:Dg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Dg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Dg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function gV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(fV,"")),n=n.replace(/@\*/g,UD).replace(/@\w+/g,t=>UD+"-"+t.slice(1)).replace(/:animating/g,dM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Co(t.collectedStyles,t.currentQuerySelector,new Map);const f=So(this,Mw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Dg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ML(){return new g.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:BD(e.timings,t.errors,!0);return{type:12,animation:So(this,Mw(e.animation),t),timings:r,options:null}}}class yV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Dg(n){return n?(n=Aw(n)).params&&(n.params=function mV(n){return n?Aw(n):null}(n.params)):n={},n}function mM(n,e,t){return{duration:n,delay:e,easing:t}}function yM(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class WD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const IV=new RegExp(":enter","g"),DV=new RegExp(":leave","g");function _M(n,e,t,r,i,u=new Map,c=new Map,f,y,I=[]){return(new CV).buildKeyframes(n,e,t,r,i,u,c,f,y,I)}class CV{buildKeyframes(e,t,r,i,u,c,f,y,I,S=[]){I=I||new WD;const M=new vM(e,t,I,i,u,S,[]);M.options=y;const L=y.delay?Wc(y.delay):0;M.currentTimeline.delayNextStep(L),M.currentTimeline.setStyles([c],null,M.errors,y),So(this,r,M);const G=M.timelines.filter(Z=>Z.containsAnimation());if(G.length&&f.size){let Z;for(let ae=G.length-1;ae>=0;ae--){const be=G[ae];if(be.element===t){Z=be;break}}Z&&!Z.allowOnlyTimelineStyles()&&Z.setStyles([f],null,M.errors,y)}return G.length?G.map(Z=>Z.buildKeyframes()):[yM(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const c="number"==typeof u?u:Wc(xw(u,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Wc(r.duration):null,f=null!=r.delay?Wc(r.delay):null;return 0!==c&&e.forEach(y=>{const I=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),So(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=KD);const c=Wc(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>So(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Wc(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),So(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return BD(t.params?xw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?Wc(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=KD);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((I,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,I);u&&M.delayNextStep(u),I===t.element&&(y=M.currentTimeline),So(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;So(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const KD={};class vM{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=KD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new ZD(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Wc(r.duration)),null!=r.delay&&(i.delay=Wc(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=xw(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new vM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=KD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new SV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(IV,"."+this._enterClassName)).replace(DV,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),f.push(...I)}return!u&&0==f.length&&c.push(function xL(n){return new g.vHH(3014,!1)}()),f}}class ZD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ZD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||qc),this._currentKeyframe.set(t,qc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function TV(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,qc)}else ff(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of c){const I=xw(y,u,r);this._pendingStyles.set(f,I),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??qc),this._updateStyle(f,I)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const I=ff(f,new Map,this._backFill);I.forEach((S,M)=>{"!"===S?e.add(M):S===qc&&t.add(M)}),r||I.set("offset",y/this.duration),i.push(I)});const u=e.size?jD(e.values()):[],c=t.size?jD(t.values()):[];if(r){const f=i[0],y=new Map(f);f.set("offset",0),y.set("offset",1),i=[f,y]}return yM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class SV extends ZD{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=ff(e[0]);y.set("offset",0),u.push(y);const I=ff(e[0]);I.set("offset",RP(f)),u.push(I);const S=e.length-1;for(let M=1;M<=S;M++){let L=ff(e[M]);const G=L.get("offset");L.set("offset",RP((t+G*r)/c)),u.push(L)}r=c,t=0,i="",e=u}return yM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function RP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class wM{}const AV=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class MV extends wM{normalizePropertyName(e,t){return pM(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(AV.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function vL(n,e){return new g.vHH(3005,!1)}())}return c+u}}function NP(n,e,t,r,i,u,c,f,y,I,S,M,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:I,postStyleProps:S,totalTime:M,errors:L}}const EM={};class PP{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function xV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,f,y,I,S){const M=[],L=this.ast.options&&this.ast.options.params||EM,Z=this.buildStyles(r,f&&f.params||EM,M),ae=y&&y.params||EM,be=this.buildStyles(i,ae,M),We=new Set,yt=new Map,ut=new Map,Ct="void"===i,qt={params:RV(ae,L),delay:this.ast.options?.delay},Kt=S?[]:_M(e,t,this.ast.animation,u,c,Z,be,qt,I,M);let Dn=0;if(Kt.forEach(Kc=>{Dn=Math.max(Kc.duration+Kc.delay,Dn)}),M.length)return NP(t,this._triggerName,r,i,Ct,Z,be,[],[],yt,ut,Dn,M);Kt.forEach(Kc=>{const Zc=Kc.element,ZP=Co(yt,Zc,new Set);Kc.preStyleProps.forEach(Cg=>ZP.add(Cg));const Nw=Co(ut,Zc,new Set);Kc.postStyleProps.forEach(Cg=>Nw.add(Cg)),Zc!==t&&We.add(Zc)});const Ti=jD(We.values());return NP(t,this._triggerName,r,i,Ct,Z,be,Kt,Ti,yt,ut,Dn)}}function RV(n,e){const t=Aw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class NV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Aw(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,f)=>{c&&(c=xw(c,i,t));const y=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,y,c,t),r.set(y,c)})}),r}}class OV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new NV(i.style,i.options&&i.options.params||{},r))}),OP(this.states,"true","1"),OP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new PP(e,i,this.states))}),this.fallbackTransition=function kV(n,e,t){return new PP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function OP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const FV=new WD;class LV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=gM(this._driver,t,r,[]);if(r.length)throw function LL(n){return new g.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=hP(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const f=new Map;if(u?(c=_M(this._driver,t,u,cM,LD,new Map,new Map,r,FV,i),c.forEach(S=>{const M=Co(f,S.element,new Map);S.postStyleProps.forEach(L=>M.set(L,null))})):(i.push(function VL(){return new g.vHH(3300,!1)}()),c=[]),i.length)throw function UL(n){return new g.vHH(3504,!1)}();f.forEach((S,M)=>{S.forEach((L,G)=>{S.set(G,this._driver.computeStyle(M,G,qc))})});const I=hf(c.map(S=>{const M=f.get(S.element);return this._buildPlayer(S,new Map,M)}));return this._playersById.set(e,I),I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function BL(n){return new g.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=oM(t,"","","");return iM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const kP="ng-animate-queued",IM="ng-animate-disabled",$V=[],FP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},HV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ra="__ng_removed";class bM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function WV(n){return n??null}(r?e.value:e),r){const u=Aw(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Rw="void",DM=new bM(Rw);class GV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ia(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function jL(n,e){return new g.vHH(3302,!1)}();if(null==r||0==r.length)throw function $L(n){return new g.vHH(3303,!1)}();if(!function KV(n){return"start"==n||"done"==n}(r))throw function HL(n,e){return new g.vHH(3400,!1)}();const u=Co(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Co(this._engine.statesByElement,e,new Map);return f.has(t)||(ia(e,VD),ia(e,VD+"-"+t),f.set(t,DM)),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function GL(n){return new g.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new CM(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(ia(e,VD),ia(e,VD+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const I=new bM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&I.absorbOptions(y.options),f.set(t,I),y||(y=DM),I.value!==Rw&&y.value===I.value){if(!function QV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,I.params)){const ae=[],be=u.matchStyles(y.value,y.params,ae),We=u.matchStyles(I.value,I.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{bg(e,be),el(e,We)})}return}const L=Co(this._engine.playersByElement,e,[]);L.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==t&&ae.queued&&ae.destroy()});let G=u.matchTransition(y.value,I.value,e,I.params),Z=!1;if(!G){if(!i)return;G=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:G,fromState:y,toState:I,player:c,isFallbackTransition:Z}),Z||(ia(e,kP),c.onStart(()=>{y_(e,kP)})),c.onDone(()=>{let ae=this.players.indexOf(c);ae>=0&&this.players.splice(ae,1);const be=this._engine.playersByElement.get(e);if(be){let We=be.indexOf(c);We>=0&&be.splice(We,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,UD,!0);r.forEach(i=>{if(i[ra])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(u.forEach((y,I)=>{if(c.set(I,y.value),this._triggers.has(I)){const S=this.trigger(e,I,Rw,i);S&&f.push(S)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&hf(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers.get(c).fallbackTransition,I=r.get(c)||DM,S=new bM(Rw),M=new CM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:I,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ra];(!u||u===FP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ia(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=oM(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,iM(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class zV{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new GV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const I=r.indexOf(y);r.splice(I+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(YD(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!YD(t))return;const u=t[ra];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ia(e,IM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),y_(e,IM))}removeNode(e,t,r,i){if(YD(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[ra]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return YD(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,UD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,dM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return hf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ra];if(t&&t.setForRemoval){if(e[ra]=FP,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(IM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ia(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?hf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function zL(n){return new g.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new WD,i=[],u=new Map,c=[],f=new Map,y=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(vt=>{S.add(vt);const kt=this.driver.query(vt,".ng-animate-queued",!0);for(let jt=0;jt<kt.length;jt++)S.add(kt[jt])});const M=this.bodyNode,L=Array.from(this.statesByElement.keys()),G=UP(L,this.collectedEnterElements),Z=new Map;let ae=0;G.forEach((vt,kt)=>{const jt=cM+ae++;Z.set(kt,jt),vt.forEach(mn=>ia(mn,jt))});const be=[],We=new Set,yt=new Set;for(let vt=0;vt<this.collectedLeaveElements.length;vt++){const kt=this.collectedLeaveElements[vt],jt=kt[ra];jt&&jt.setForRemoval&&(be.push(kt),We.add(kt),jt.hasAnimation?this.driver.query(kt,".ng-star-inserted",!0).forEach(mn=>We.add(mn)):yt.add(kt))}const ut=new Map,Ct=UP(L,Array.from(We));Ct.forEach((vt,kt)=>{const jt=LD+ae++;ut.set(kt,jt),vt.forEach(mn=>ia(mn,jt))}),e.push(()=>{G.forEach((vt,kt)=>{const jt=Z.get(kt);vt.forEach(mn=>y_(mn,jt))}),Ct.forEach((vt,kt)=>{const jt=ut.get(kt);vt.forEach(mn=>y_(mn,jt))}),be.forEach(vt=>{this.processLeaveNode(vt)})});const qt=[],Kt=[];for(let vt=this._namespaceList.length-1;vt>=0;vt--)this._namespaceList[vt].drainQueuedTransitions(t).forEach(jt=>{const mn=jt.player,Ai=jt.element;if(qt.push(mn),this.collectedEnterElements.length){const rs=Ai[ra];if(rs&&rs.setForMove){if(rs.previousTriggersValues&&rs.previousTriggersValues.has(jt.triggerName)){const Sg=rs.previousTriggersValues.get(jt.triggerName),sa=this.statesByElement.get(jt.element);if(sa&&sa.has(jt.triggerName)){const XD=sa.get(jt.triggerName);XD.value=Sg,sa.set(jt.triggerName,XD)}}return void mn.destroy()}}const tl=!M||!this.driver.containsElement(M,Ai),To=ut.get(Ai),pf=Z.get(Ai),Ir=this._buildInstruction(jt,r,pf,To,tl);if(Ir.errors&&Ir.errors.length)return void Kt.push(Ir);if(tl)return mn.onStart(()=>bg(Ai,Ir.fromStyles)),mn.onDestroy(()=>el(Ai,Ir.toStyles)),void i.push(mn);if(jt.isFallbackTransition)return mn.onStart(()=>bg(Ai,Ir.fromStyles)),mn.onDestroy(()=>el(Ai,Ir.toStyles)),void i.push(mn);const JP=[];Ir.timelines.forEach(rs=>{rs.stretchStartingKeyframe=!0,this.disabledNodes.has(rs.element)||JP.push(rs)}),Ir.timelines=JP,r.append(Ai,Ir.timelines),c.push({instruction:Ir,player:mn,element:Ai}),Ir.queriedElements.forEach(rs=>Co(f,rs,[]).push(mn)),Ir.preStyleProps.forEach((rs,Sg)=>{if(rs.size){let sa=y.get(Sg);sa||y.set(Sg,sa=new Set),rs.forEach((XD,AM)=>sa.add(AM))}}),Ir.postStyleProps.forEach((rs,Sg)=>{let sa=I.get(Sg);sa||I.set(Sg,sa=new Set),rs.forEach((XD,AM)=>sa.add(AM))})});if(Kt.length){const vt=[];Kt.forEach(kt=>{vt.push(function qL(n,e){return new g.vHH(3505,!1)}())}),qt.forEach(kt=>kt.destroy()),this.reportError(vt)}const Dn=new Map,Ti=new Map;c.forEach(vt=>{const kt=vt.element;r.has(kt)&&(Ti.set(kt,kt),this._beforeAnimationBuild(vt.player.namespaceId,vt.instruction,Dn))}),i.forEach(vt=>{const kt=vt.element;this._getPreviousPlayers(kt,!1,vt.namespaceId,vt.triggerName,null).forEach(mn=>{Co(Dn,kt,[]).push(mn),mn.destroy()})});const Kc=be.filter(vt=>jP(vt,y,I)),Zc=new Map;VP(Zc,this.driver,yt,I,qc).forEach(vt=>{jP(vt,y,I)&&Kc.push(vt)});const Nw=new Map;G.forEach((vt,kt)=>{VP(Nw,this.driver,new Set(vt),y,"!")}),Kc.forEach(vt=>{const kt=Zc.get(vt),jt=Nw.get(vt);Zc.set(vt,new Map([...Array.from(kt?.entries()??[]),...Array.from(jt?.entries()??[])]))});const Cg=[],YP=[],QP={};c.forEach(vt=>{const{element:kt,player:jt,instruction:mn}=vt;if(r.has(kt)){if(S.has(kt))return jt.onDestroy(()=>el(kt,mn.toStyles)),jt.disabled=!0,jt.overrideTotalTime(mn.totalTime),void i.push(jt);let Ai=QP;if(Ti.size>1){let To=kt;const pf=[];for(;To=To.parentNode;){const Ir=Ti.get(To);if(Ir){Ai=Ir;break}pf.push(To)}pf.forEach(Ir=>Ti.set(Ir,Ai))}const tl=this._buildAnimation(jt.namespaceId,mn,Dn,u,Nw,Zc);if(jt.setRealPlayer(tl),Ai===QP)Cg.push(jt);else{const To=this.playersByElement.get(Ai);To&&To.length&&(jt.parentPlayer=hf(To)),i.push(jt)}}else bg(kt,mn.fromStyles),jt.onDestroy(()=>el(kt,mn.toStyles)),YP.push(jt),S.has(kt)&&i.push(jt)}),YP.forEach(vt=>{const kt=u.get(vt.element);if(kt&&kt.length){const jt=hf(kt);vt.setRealPlayer(jt)}}),i.forEach(vt=>{vt.parentPlayer?vt.syncPlayerEvents(vt.parentPlayer):vt.destroy()});for(let vt=0;vt<be.length;vt++){const kt=be[vt],jt=kt[ra];if(y_(kt,LD),jt&&jt.hasAnimation)continue;let mn=[];if(f.size){let tl=f.get(kt);tl&&tl.length&&mn.push(...tl);let To=this.driver.query(kt,dM,!0);for(let pf=0;pf<To.length;pf++){let Ir=f.get(To[pf]);Ir&&Ir.length&&mn.push(...Ir)}}const Ai=mn.filter(tl=>!tl.destroyed);Ai.length?ZV(this,kt,Ai):this.processLeaveNode(kt)}return be.length=0,Cg.forEach(vt=>{this.players.push(vt),vt.onDone(()=>{vt.destroy();const kt=this.players.indexOf(vt);this.players.splice(kt,1)}),vt.play()}),Cg}elementContainsData(e,t){let r=!1;const i=t[ra];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==Rw;f.forEach(I=>{I.queued||!y&&I.triggerName!=i||c.push(I)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const I=y.element,S=I!==u,M=Co(r,I,[]);this._getPreviousPlayers(I,S,c,f,t.toState).forEach(G=>{const Z=G.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),G.destroy(),M.push(G)})}bg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,I=[],S=new Set,M=new Set,L=t.timelines.map(Z=>{const ae=Z.element;S.add(ae);const be=ae[ra];if(be&&be.removedBeforeQueried)return new Tw(Z.duration,Z.delay);const We=ae!==y,yt=function YV(n){const e=[];return BP(n,e),e}((r.get(ae)||$V).map(Dn=>Dn.getRealPlayer())).filter(Dn=>!!Dn.element&&Dn.element===ae),ut=u.get(ae),Ct=c.get(ae),qt=hP(0,this._normalizer,0,Z.keyframes,ut,Ct),Kt=this._buildPlayer(Z,qt,yt);if(Z.subTimeline&&i&&M.add(ae),We){const Dn=new CM(e,f,ae);Dn.setRealPlayer(Kt),I.push(Dn)}return Kt});I.forEach(Z=>{Co(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function qV(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Z.element,Z))}),S.forEach(Z=>ia(Z,EP));const G=hf(L);return G.onDestroy(()=>{S.forEach(Z=>y_(Z,EP)),el(y,t.toStyles)}),M.forEach(Z=>{Co(i,Z,[]).push(G)}),G}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Tw(e.duration,e.delay)}}class CM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Tw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>iM(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Co(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function YD(n){return n&&1===n.nodeType}function LP(n,e){const t=n.style.display;return n.style.display=e??"none",t}function VP(n,e,t,r,i){const u=[];t.forEach(y=>u.push(LP(y)));const c=[];r.forEach((y,I)=>{const S=new Map;y.forEach(M=>{const L=e.computeStyle(I,M,i);S.set(M,L),(!L||0==L.length)&&(I[ra]=HV,c.push(I))}),n.set(I,S)});let f=0;return t.forEach(y=>LP(y,u[f++])),c}function UP(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const I=f.parentNode;return y=t.has(I)?I:i.has(I)?1:c(I),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function ia(n,e){n.classList?.add(e)}function y_(n,e){n.classList?.remove(e)}function ZV(n,e,t){hf(t).onDone(()=>n.processLeaveNode(e))}function BP(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof cP?BP(r.players,e):e.push(r)}}function jP(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class QD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new zV(e,t,r),this._timelineEngine=new LV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],S=gM(this._driver,u,y,[]);if(y.length)throw function kL(n,e){return new g.vHH(3404,!1)}();f=function PV(n,e,t){return new OV(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=fP(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=fP(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let XV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&el(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(el(this._element,this._initialStyles),this._endStyles&&(el(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bg(this._element,this._endStyles),this._endStyles=null),el(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function SM(n){let e=null;return n.forEach((t,r)=>{(function eU(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class $P{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:TP(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class tU{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return yP(e,t)}getParentElement(e){return uM(e)}query(e,t,r){return _P(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const I=new Map,S=c.filter(G=>G instanceof $P);(function sV(n,e){return 0===n||0===e})(r,i)&&S.forEach(G=>{G.currentSnapshot.forEach((Z,ae)=>I.set(ae,Z))});let M=function tV(n){return n.length?n[0]instanceof Map?n:n.map(e=>IP(e)):[]}(t).map(G=>ff(G));M=function oV(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(f=>c.set(f,TP(n,f)))}}return e}(e,M,I);const L=function JV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=SM(e[0]),e.length>1&&(r=SM(e[e.length-1]))):e instanceof Map&&(t=SM(e)),t||r?new XV(n,t,r):null}(e,M);return new $P(e,M,y,L)}}let nU=(()=>{class n extends oP{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?aP(t):t;return HP(this._renderer,null,r,"register",[i]),new rU(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(oe))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class rU extends class fL{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new iU(this._id,e,t||{},this._renderer)}}class iU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return HP(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function HP(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const GP="@.disabled";let sU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=c?.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new zP("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,S)),S}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,f,t,S.name,S)};return r.data.animation.forEach(y),new oU(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.FYo),g.LFG(QD),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class zP{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==GP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class oU extends zP{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==GP?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function aU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function uU(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let lU=(()=>{class n extends QD{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oe),g.LFG(lM),g.LFG(wM),g.LFG(g.z2F))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const qP=[{provide:oP,useClass:nU},{provide:wM,useFactory:function cU(){return new MV}},{provide:QD,useClass:lU},{provide:g.FYo,useFactory:function dU(n,e,t){return new sU(n,e,t)},deps:[no,QD,g.R0b]}],TM=[{provide:lM,useFactory:()=>new tU},{provide:g.QbO,useValue:"BrowserAnimations"},...qP],WP=[{provide:lM,useClass:vP},{provide:g.QbO,useValue:"NoopAnimations"},...qP];let hU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?WP:TM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:TM,imports:[Vg]}),n})();const KP_firebaseConfig={apiKey:"AIzaSyCwSxyZzCQqGoXy83d756ayvjmAUt7bV_g",authDomain:"pacman-game-4499a.firebaseapp.com",projectId:"pacman-game-4499a",storageBucket:"pacman-game-4499a.appspot.com",messagingSenderId:"221442927602",appId:"1:221442927602:web:3be21cc5c8d41faf41196b"};let fU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[hL]}),n.\u0275inj=g.cJS({imports:[Vg,hU,dL,QF,Gs.hO.initializeApp(KP_firebaseConfig),Zk]}),n})();(0,g.G48)(),xf().bootstrapModule(fU).catch(n=>console.error(n))},2011:(_t,Ae,k)=>{k.d(Ae,{Dh:()=>he,GT:()=>ue,cc:()=>Me,hO:()=>je,on:()=>j,pX:()=>ee,xv:()=>de});var g=k(4650),Q=k(9260),P=k(2122);_t=k.hmd(_t);const te=["ngOnDestroy"],ee=(le,Xe,pt,Se={})=>new Proxy(le,{get:(_e,Ee)=>pt.runOutsideAngular(()=>{var Ue;if(le[Ee])return!(null===(Ue=Se?.spy)||void 0===Ue)&&Ue.get&&Se.spy.get(Ee,le[Ee]),le[Ee];if(te.indexOf(Ee)>-1)return()=>{};const Be=Xe.toPromise().then(U=>{const pe=U&&U[Ee];return"function"==typeof pe?pe.bind(U):pe&&pe.then?pe.then(Le=>pt.run(()=>Le)):pt.run(()=>pe)});return new Proxy(()=>{},{get:(U,pe)=>Be[pe],apply:(U,pe,Le)=>Be.then(Je=>{var gt;const Ke=Je&&Je(...Le);return!(null===(gt=Se?.spy)||void 0===gt)&&gt.apply&&Se.spy.apply(Ee,Le,Ke),Ke})})})}),ue=(le,Xe)=>{Xe.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(Se=>{Object.defineProperty(le.prototype,Se,Object.getOwnPropertyDescriptor(pt.prototype||pt,Se))})})};class oe{constructor(Xe){return Xe}}const he=new g.OlP("angularfire2.app.options"),de=new g.OlP("angularfire2.app.name");function j(le,Xe,pt){const _e="object"==typeof pt&&pt||{};_e.name=_e.name||"string"==typeof pt&&pt||"[DEFAULT]";const Ue=Q.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||Xe.runOutsideAngular(()=>Q.Z.initializeApp(le,_e));try{JSON.stringify(le)!==JSON.stringify(Ue.options)&&$("error",`${Ue.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(Ue)}const $=(le,...Xe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[le](...Xe)},W={provide:oe,useFactory:j,deps:[he,g.R0b,[new g.FiY,de]]};let je=(()=>{class le{constructor(pt){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",g.q4F.full,pt.toString())}static initializeApp(pt,Se){return{ngModule:le,providers:[{provide:he,useValue:pt},{provide:de,useValue:Se}]}}}return le.\u0275fac=function(pt){return new(pt||le)(g.LFG(g.Lbi))},le.\u0275mod=g.oAB({type:le}),le.\u0275inj=g.cJS({providers:[W]}),le})();function Me(le,Xe,pt,Se,_e){const[,Ee,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===le)||[];if(Ee)return function we(le,Xe){try{return le.toString()===Xe.toString()}catch{return le===Xe}}(_e,Ue)||(ye("error",`${Xe} was already initialized on the ${pt} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:_e,was:Ue})),Ee;{const Be=Se();return globalThis.\u0275AngularfireInstanceCache.push([le,Be,_e]),Be}}const tt=!!_t.hot,ye=(le,...Xe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[le](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(_t,Ae,k)=>{k.d(Ae,{q4:()=>Oi,iC:()=>Vn,HU:()=>fi,vb:()=>ei,JM:()=>ct});var g=k(4650),Q=k(259),P=k(5861),te=k(9681),ee=k(2090),ue=k(4859),oe=k(1877),he=k(8766);const de="@firebase/installations",j="0.6.4",W=`w:${j}`,je="FIS_v2",Xe=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pt(D){return D instanceof ee.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function _e(D){return{token:D.token,requestStatus:2,expiresIn:Je(D.expiresIn),creationTime:Date.now()}}function Ee(D,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(D,C){const F=(yield C.json()).error;return Xe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=Be(D);return x.append("Authorization",function gt(D){return`${je} ${D}`}(C)),x}function pe(D){return Le.apply(this,arguments)}function Le(){return(Le=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Je(D){return Number(D.replace("s","000"))}function Ke(D,C){return re.apply(this,arguments)}function re(){return(re=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=Se(D),K=Be(D),X=C.getImmediate({optional:!0});if(X){const bt=yield X.getHeartbeatsHeader();bt&&K.append("x-firebase-client",bt)}const Ze={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:je,appId:D.appId,sdkVersion:W})},ot=yield pe(()=>fetch(F,Ze));if(ot.ok){const bt=yield ot.json();return{fid:bt.fid||x,registrationStatus:2,refreshToken:bt.refreshToken,authToken:_e(bt.authToken)}}throw yield Ee("Create Installation",ot)})).apply(this,arguments)}function fe(D){return new Promise(C=>{setTimeout(C,D)})}const Re=/^[cdef][\w-]{21}$/;function Ie(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function lt(D){return function ve(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Re.test(x)?x:""}catch{return""}}function Bt(D){return`${D.appName}!${D.appId}`}const on=new Map;function Ye(D,C){const x=Bt(D);St(x,C),function br(D,C){const x=function Tn(){return!Cn&&"BroadcastChannel"in self&&(Cn=new BroadcastChannel("[Firebase] FID Change"),Cn.onmessage=D=>{St(D.data.key,D.data.fid)}),Cn}();x&&x.postMessage({key:D,fid:C}),function kn(){0===on.size&&Cn&&(Cn.close(),Cn=null)}()}(x,C)}function St(D,C){const x=on.get(D);if(x)for(const F of x)F(C)}let Cn=null;const li="firebase-installations-store";let Mi=null;function Ao(){return Mi||(Mi=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(li)}})),Mi}function Qe(D,C){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,P.Z)(function*(D,C){const x=Bt(D),K=(yield Ao()).transaction(li,"readwrite"),X=K.objectStore(li),Ne=yield X.get(x);return yield X.put(C,x),yield K.done,(!Ne||Ne.fid!==C.fid)&&Ye(D,C.fid),C})).apply(this,arguments)}function $i(D){return hr.apply(this,arguments)}function hr(){return(hr=(0,P.Z)(function*(D){const C=Bt(D),F=(yield Ao()).transaction(li,"readwrite");yield F.objectStore(li).delete(C),yield F.done})).apply(this,arguments)}function vi(D,C){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,P.Z)(function*(D,C){const x=Bt(D),K=(yield Ao()).transaction(li,"readwrite"),X=K.objectStore(li),Ne=yield X.get(x),Ze=C(Ne);return void 0===Ze?yield X.delete(x):yield X.put(Ze,x),yield K.done,Ze&&(!Ne||Ne.fid!==Ze.fid)&&Ye(D,Ze.fid),Ze})).apply(this,arguments)}function Fn(D){return rr.apply(this,arguments)}function rr(){return(rr=(0,P.Z)(function*(D){let C;const x=yield vi(D.appConfig,F=>{const K=vn(F),X=wt(D,K);return C=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function vn(D){return Lt(D||{fid:Ie(),registrationStatus:0})}function wt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Xe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function mt(D,C){return fn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Wn(D)}:{installationEntry:C}}function fn(){return(fn=(0,P.Z)(function*(D,C){try{const x=yield Ke(D,C);return Qe(D.appConfig,x)}catch(x){throw pt(x)&&409===x.customData.serverCode?yield $i(D.appConfig):yield Qe(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Wn(D){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,P.Z)(function*(D){let C=yield Cr(D.appConfig);for(;1===C.registrationStatus;)yield fe(100),C=yield Cr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Fn(D);return F||x}return C})).apply(this,arguments)}function Cr(D){return vi(D,C=>{if(!C)throw Xe.create("installation-not-found");return Lt(C)})}function Lt(D){return function As(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function an(D,C){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=un(D,x),K=U(D,x),X=C.getImmediate({optional:!0});if(X){const bt=yield X.getHeartbeatsHeader();bt&&K.append("x-firebase-client",bt)}const Ze={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:W,appId:D.appId}})},ot=yield pe(()=>fetch(F,Ze));if(ot.ok)return _e(yield ot.json());throw yield Ee("Generate Auth Token",ot)})).apply(this,arguments)}function un(D,{fid:C}){return`${Se(D)}/${C}/authTokens:generate`}function fr(D){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*(D,C=!1){let x;const F=yield vi(D.appConfig,X=>{if(!Wt(X))throw Xe.create("not-registered");const Ne=X.authToken;if(!C&&Lr(Ne))return X;if(1===Ne.requestStatus)return x=st(D,C),X;{if(!navigator.onLine)throw Xe.create("app-offline");const Ze=V(X);return x=Ot(D,Ze),Ze}});return x?yield x:F.authToken})).apply(this,arguments)}function st(D,C){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(D,C){let x=yield nt(D.appConfig);for(;1===x.authToken.requestStatus;)yield fe(100),x=yield nt(D.appConfig);const F=x.authToken;return 0===F.requestStatus?fr(D,C):F})).apply(this,arguments)}function nt(D){return vi(D,C=>{if(!Wt(C))throw Xe.create("not-registered");return function q(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ot(D,C){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(D,C){try{const x=yield an(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Qe(D.appConfig,F),x}catch(x){if(!pt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Qe(D.appConfig,F)}else yield $i(D.appConfig);throw x}})).apply(this,arguments)}function Wt(D){return void 0!==D&&2===D.registrationStatus}function Lr(D){return 2===D.requestStatus&&!function B(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function V(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function J(){return(J=(0,P.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield Fn(C);return F?F.catch(console.error):fr(C).catch(console.error),x.fid})).apply(this,arguments)}function xt(){return(xt=(0,P.Z)(function*(D,C=!1){const x=D;return yield Qt(x),(yield fr(x,C)).token})).apply(this,arguments)}function Qt(D){return rn.apply(this,arguments)}function rn(){return(rn=(0,P.Z)(function*(D){const{registrationPromise:C}=yield Fn(D);C&&(yield C)})).apply(this,arguments)}function Ms(D){return Xe.create("missing-app-config-values",{valueName:D})}const Mo="installations",An=D=>{const C=D.getProvider("app").getImmediate(),x=function Sn(D){if(!D||!D.options)throw Ms("App Configuration");if(!D.name)throw Ms("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw Ms(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,te._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},qs=D=>{const C=D.getProvider("app").getImmediate(),x=(0,te._getProvider)(C,Mo).getImmediate();return{getId:()=>function ie(D){return J.apply(this,arguments)}(x),getToken:K=>function He(D){return xt.apply(this,arguments)}(x,K)}};(function Qa(){(0,te._registerComponent)(new ue.wA(Mo,An,"PUBLIC")),(0,te._registerComponent)(new ue.wA("installations-internal",qs,"PRIVATE"))})(),(0,te.registerVersion)(de,j),(0,te.registerVersion)(de,j,"esm2017");const zi="@firebase/remote-config",Zn=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qc{constructor(C,x,F,K){this.client=C,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var x=this;return(0,P.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return K;C.eTag=K&&K.eTag;const X=yield x.client.fetch(C),Ne=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ne.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ne),X})()}}function ol(D=navigator){return D.languages&&D.languages[0]||D.language}class al{constructor(C,x,F,K,X,Ne){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=X,this.appId=Ne}fetch(C){var x=this;return(0,P.Z)(function*(){const[F,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ot={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:x.appId,language_code:ol()},bt={method:"POST",headers:Ze,body:JSON.stringify(ot)},Ut=fetch(Ne,bt),Et=new Promise((gi,Pn)=>{C.signal.addEventListener(()=>{const Da=new Error("The operation was aborted.");Da.name="AbortError",Pn(Da)})});let Rr;try{yield Promise.race([Ut,Et]),Rr=yield Ut}catch(gi){let Pn="fetch-client-network";throw"AbortError"===gi?.name&&(Pn="fetch-timeout"),Zn.create(Pn,{originalErrorMessage:gi?.message})}let or=Rr.status;const $s=Rr.headers.get("ETag")||void 0;let Ci,Nr;if(200===Rr.status){let gi;try{gi=yield Rr.json()}catch(Pn){throw Zn.create("fetch-client-parse",{originalErrorMessage:Pn?.message})}Ci=gi.entries,Nr=gi.state}if("INSTANCE_STATE_UNSPECIFIED"===Nr?or=500:"NO_CHANGE"===Nr?or=304:("NO_TEMPLATE"===Nr||"EMPTY_CONFIG"===Nr)&&(Ci={}),304!==or&&200!==or)throw Zn.create("fetch-status",{httpStatus:or});return{status:or,eTag:$s,config:Ci}})()}}class Tg{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,P.Z)(function*(){yield function ir(D,C){return new Promise((x,F)=>{const K=Math.max(C-Date.now(),0),X=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(X),F(Zn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const X=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),X}catch(X){if(!function Jc(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const Ne={throttleEndTimeMillis:Date.now()+(0,ee.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Ne),K.attemptFetch(C,Ne)}})()}}class Xc{constructor(C,x,F,K,X){this.app=C,this._client=x,this._storageCache=F,this._storage=K,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ul(D,C){const x=D.target.error||void 0;return Zn.create(C,{originalErrorMessage:x&&x?.message})}const Os="app_namespace_store";class Rg{constructor(C,x,F,K=function xg(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{C(ul(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Os,{keyPath:"compositeKey"})}}catch(x){C(Zn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,X)=>{const Ze=F.transaction([Os],"readonly").objectStore(Os),ot=x.createCompositeKey(C);try{const bt=Ze.get(ot);bt.onerror=Ut=>{X(ul(Ut,"storage-get"))},bt.onsuccess=Ut=>{const Et=Ut.target.result;K(Et?Et.value:void 0)}}catch(bt){X(Zn.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(C,x){var F=this;return(0,P.Z)(function*(){const K=yield F.openDbPromise;return new Promise((X,Ne)=>{const ot=K.transaction([Os],"readwrite").objectStore(Os),bt=F.createCompositeKey(C);try{const Ut=ot.put({compositeKey:bt,value:x});Ut.onerror=Et=>{Ne(ul(Et,"storage-set"))},Ut.onsuccess=()=>{X()}}catch(Ut){Ne(Zn.create("storage-set",{originalErrorMessage:Ut?.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,X)=>{const Ze=F.transaction([Os],"readwrite").objectStore(Os),ot=x.createCompositeKey(C);try{const bt=Ze.delete(ot);bt.onerror=Ut=>{X(ul(Ut,"storage-delete"))},bt.onsuccess=()=>{K()}}catch(bt){X(Zn.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class td{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),X=yield x;X&&(C.lastFetchStatus=X);const Ne=yield F;Ne&&(C.lastSuccessfulFetchTimestampMillis=Ne);const Ze=yield K;Ze&&(C.activeConfig=Ze)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function eu(){return mf.apply(this,arguments)}function mf(){return(mf=(0,P.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}!function ks(){(0,te._registerComponent)(new ue.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,ee.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ne,appId:Ze}=F.options;if(!X)throw Zn.create("registration-project-id");if(!Ne)throw Zn.create("registration-api-key");if(!Ze)throw Zn.create("registration-app-id");const ot=new Rg(Ze,F.name,x=x||"firebase"),bt=new td(ot),Ut=new oe.Yd(zi);Ut.logLevel=oe.in.ERROR;const Et=new al(K,te.SDK_VERSION,x,X,Ne,Ze),Rr=new Tg(Et,ot),or=new Qc(Rr,ot,bt,Ut),$s=new Xc(F,or,bt,ot,Ut);return function pr(D){const C=(0,ee.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}($s),$s},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(zi,"0.4.4"),(0,te.registerVersion)(zi,"0.4.4","esm2017")}();const qi="/firebase-messaging-sw.js",ss="/firebase-cloud-messaging-push-scope",os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ua="google.c.a.c_id",tu="google.c.a.c_l",ll="google.c.a.ts",yf="google.c.a.e";var as=(()=>{return(D=as||(as={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",as;var D})();function wi(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ci(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let X=0;X<F.length;++X)K[X]=F.charCodeAt(X);return K}const xo="fcm_token_details_db",Ar="fcm_token_object_Store";function _f(D){return vf.apply(this,arguments)}function vf(){return vf=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(xo))return null;let C=null;return(yield(0,he.X3)(xo,5,{upgrade:(F=(0,P.Z)(function*(K,X,Ne,Ze){var ot;if(X<2||!K.objectStoreNames.contains(Ar))return;const bt=Ze.objectStore(Ar),Ut=yield bt.index("fcmSenderId").get(D);if(yield bt.clear(),Ut)if(2===X){const Et=Ut;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;C={token:Et.fcmToken,createTime:null!==(ot=Et.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:wi(Et.vapidKey)}}}else if(3===X){const Et=Ut;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:wi(Et.auth),p256dh:wi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:wi(Et.vapidKey)}}}else if(4===X){const Et=Ut;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:wi(Et.auth),p256dh:wi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:wi(Et.vapidKey)}}}}),function(X,Ne,Ze,ot){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(xo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Ln(C)?C:null;var F}),vf.apply(this,arguments)}function Ln(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Ei="firebase-messaging-store";let Ur=null;function ru(){return Ur||(Ur=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Ei)}})),Ur}function Ro(D){return us.apply(this,arguments)}function us(){return(us=(0,P.Z)(function*(D){const C=Ri(D),F=yield(yield ru()).transaction(Ei).objectStore(Ei).get(C);if(F)return F;{const K=yield _f(D.appConfig.senderId);if(K)return yield jn(D,K),K}})).apply(this,arguments)}function jn(D,C){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(D,C){const x=Ri(D),K=(yield ru()).transaction(Ei,"readwrite");return yield K.objectStore(Ei).put(C,x),yield K.done,C})).apply(this,arguments)}function ca(D){return da.apply(this,arguments)}function da(){return(da=(0,P.Z)(function*(D){const C=Ri(D),F=(yield ru()).transaction(Ei,"readwrite");yield F.objectStore(Ei).delete(C),yield F.done})).apply(this,arguments)}function Ri({appConfig:D}){return D.appId}const Nn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(D,C){return ha.apply(this,arguments)}function ha(){return(ha=(0,P.Z)(function*(D,C){const x=yield hl(D),F=Ce(C),K={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(No(D.appConfig),K)).json()}catch(Ne){throw Nn.create("token-subscribe-failed",{errorInfo:Ne?.toString()})}if(X.error)throw Nn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Nn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function sd(D,C){return cl.apply(this,arguments)}function cl(){return(cl=(0,P.Z)(function*(D,C){const x=yield hl(D),F=Ce(C.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${No(D.appConfig)}/${C.token}`,K)).json()}catch(Ne){throw Nn.create("token-update-failed",{errorInfo:Ne?.toString()})}if(X.error)throw Nn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Nn.create("token-update-no-token");return X.token})).apply(this,arguments)}function su(D,C){return dl.apply(this,arguments)}function dl(){return(dl=(0,P.Z)(function*(D,C){const F={method:"DELETE",headers:yield hl(D)};try{const X=yield(yield fetch(`${No(D.appConfig)}/${C}`,F)).json();if(X.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(K){throw Nn.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function No({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function hl(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,P.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ce({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:C,p256dh:D}};return F!==os&&(K.web.applicationPubKey=F),K}const Jt=6048e5;function fl(D){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(D){const C=yield Ef(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:wi(C.getKey("auth")),p256dh:wi(C.getKey("p256dh"))},F=yield Ro(D.firebaseDependencies);if(F){if(__(F.subscriptionOptions,x))return Date.now()>=F.createTime+Jt?fa(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield su(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return au(D.firebaseDependencies,x)}return au(D.firebaseDependencies,x)})).apply(this,arguments)}function Yn(D){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(D){const C=yield Ro(D.firebaseDependencies);C&&(yield su(D.firebaseDependencies,C.token),yield ca(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function fa(D,C){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*(D,C){try{const x=yield sd(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield jn(D.firebaseDependencies,F),x}catch(x){throw yield Yn(D),x}})).apply(this,arguments)}function au(D,C){return ko.apply(this,arguments)}function ko(){return(ko=(0,P.Z)(function*(D,C){const F={token:yield Mt(D,C),createTime:Date.now(),subscriptionOptions:C};return yield jn(D,F),F.token})).apply(this,arguments)}function Ef(D,C){return wn.apply(this,arguments)}function wn(){return(wn=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ci(C)})})).apply(this,arguments)}function __(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function uu(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Yr(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const K=C.notification.image;K&&(D.notification.image=K);const X=C.notification.icon;X&&(D.notification.icon=X)}(C,D),function Wi(D,C){!C.data||(D.data=C.data)}(C,D),function If(D,C){var x,F,K,X,Ne;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Ze=null!==(K=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(X=C.notification)||void 0===X?void 0:X.click_action;Ze&&(D.fcmOptions.link=Ze);const ot=null===(Ne=C.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;ot&&(D.fcmOptions.analyticsLabel=ot)}(C,D),C}function pa(D){return"object"==typeof D&&!!D&&ua in D}function Ii(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function pl(D){return Nn.create("missing-app-config-values",{valueName:D})}Ii("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ii("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class od{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Ng(D){if(!D||!D.options)throw pl("App Configuration Object");if(!D.name)throw pl("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw pl(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function gl(D){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(qi,{scope:ss}),D.swRegistration.update().catch(()=>{})}catch(C){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function ml(D,C){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield gl(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Qs(D,C){return lu.apply(this,arguments)}function lu(){return(lu=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=os)})).apply(this,arguments)}function Ls(){return(Ls=(0,P.Z)(function*(D,C){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield Qs(D,C?.vapidKey),yield ml(D,C?.serviceWorkerRegistration),fl(D)})).apply(this,arguments)}function yl(D,C,x){return ga.apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(D,C,x){const F=bf(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ua],message_name:x[tu],message_time:x[ll],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bf(D){switch(D){case as.NOTIFICATION_CLICKED:return"notification_open";case as.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fo(){return(Fo=(0,P.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===as.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(uu(x)):D.onMessageHandler.next(uu(x)));const F=x.data;pa(F)&&"1"===F[yf]&&(yield yl(D,x.messageType,F))})).apply(this,arguments)}const Df="@firebase/messaging",Mr=D=>{const C=new od(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function cu(D,C){return Fo.apply(this,arguments)}(C,x)),C},Js=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function ad(D,C){return Ls.apply(this,arguments)}(C,F)}};function ld(){return cd.apply(this,arguments)}function cd(){return(cd=(0,P.Z)(function*(){try{yield(0,ee.eu)()}catch{return!1}return typeof window<"u"&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pn(){(0,te._registerComponent)(new ue.wA("messaging",Mr,"PUBLIC")),(0,te._registerComponent)(new ue.wA("messaging-internal",Js,"PRIVATE")),(0,te.registerVersion)(Df,"0.12.4"),(0,te.registerVersion)(Df,"0.12.4","esm2017")}();const vl="analytics",v_="firebase_id",hd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vs="https://www.googletagmanager.com/gtag/js",Mn=new oe.Yd("@firebase/analytics"),di=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Sf(D){if(!D.startsWith(Vs)){const C=di.create("invalid-gtag-resource",{gtagURL:D});return Mn.warn(C.message),""}return D}function pd(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function hu(D,C){const x=function du(D,C){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(D,C)),x}("firebase-js-sdk-policy",{createScriptURL:Sf}),F=document.createElement("script"),K=`${Vs}?l=${D}&id=${C}`;F.src=x?x?.createScriptURL(K):K,F.async=!0,document.head.appendChild(F)}function fu(D,C,x,F,K,X){return eo.apply(this,arguments)}function eo(){return(eo=(0,P.Z)(function*(D,C,x,F,K,X){const Ne=F[K];try{if(Ne)yield C[Ne];else{const ot=(yield pd(x)).find(bt=>bt.measurementId===K);ot&&(yield C[ot.appId])}}catch(Ze){Mn.error(Ze)}D("config",K,X)})).apply(this,arguments)}function ma(D,C,x,F,K){return ya.apply(this,arguments)}function ya(){return(ya=(0,P.Z)(function*(D,C,x,F,K){try{let X=[];if(K&&K.send_to){let Ne=K.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ze=yield pd(x);for(const ot of Ne){const bt=Ze.find(Et=>Et.measurementId===ot),Ut=bt&&C[bt.appId];if(!Ut){X=[];break}X.push(Ut)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),D("event",F,K||{})}catch(X){Mn.error(X)}})).apply(this,arguments)}function ls(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Vs)&&x.src.includes(D))return x;return null}const Qr=new class Lg{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function El(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Il(D){return sr.apply(this,arguments)}function sr(){return(sr=(0,P.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,K={method:"GET",headers:El(F)},X=hd.replace("{app-id}",x),Ne=yield fetch(X,K);if(200!==Ne.status&&304!==Ne.status){let Ze="";try{const ot=yield Ne.json();null!==(C=ot.error)&&void 0!==C&&C.message&&(Ze=ot.error.message)}catch{}throw di.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ze})}return Ne.json()})).apply(this,arguments)}function gd(D){return yn.apply(this,arguments)}function yn(){return(yn=(0,P.Z)(function*(D,C=Qr,x){const{appId:F,apiKey:K,measurementId:X}=D.options;if(!F)throw di.create("no-app-id");if(!K){if(X)return{measurementId:X,appId:F};throw di.create("no-api-key")}const Ne=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new mu;return setTimeout((0,P.Z)(function*(){Ze.abort()}),void 0!==x?x:6e4),pu({appId:F,apiKey:K,measurementId:X},Ne,Ze,C)})).apply(this,arguments)}function pu(D,C,x){return to.apply(this,arguments)}function to(){return(to=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,K=Qr){var X;const{appId:Ne,measurementId:Ze}=D;try{yield gu(F,C)}catch(ot){if(Ze)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:Ne,measurementId:Ze};throw ot}try{const ot=yield Il(D);return K.deleteThrottleMetadata(Ne),ot}catch(ot){const bt=ot;if(!Bo(bt)){if(K.deleteThrottleMetadata(Ne),Ze)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Ne,measurementId:Ze};throw ot}const Ut=503===Number(null===(X=bt?.customData)||void 0===X?void 0:X.httpStatus)?(0,ee.$s)(x,K.intervalMillis,30):(0,ee.$s)(x,K.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Ut,backoffCount:x+1};return K.setThrottleMetadata(Ne,Et),Mn.debug(`Calling attemptFetch again in ${Ut} millis`),pu(D,Et,F,K)}})).apply(this,arguments)}function gu(D,C){return new Promise((x,F)=>{const K=Math.max(C-Date.now(),0),X=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(X),F(di.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Bo(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class mu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let va,Dl;function no(){return(no=(0,P.Z)(function*(D,C,x,F,K){if(K&&K.global)D("event",x,F);else{const X=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function wa(D){Dl=D}function Ea(D){va=D}function Cl(){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,P.Z)(function*(){if(!(0,ee.hl)())return Mn.warn(di.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(D){return Mn.warn(di.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(D,C,x,F,K,X,Ne){var Ze;const ot=gd(D);ot.then(or=>{x[or.measurementId]=or.appId,D.options.measurementId&&or.measurementId!==D.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${or.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(or=>Mn.error(or)),C.push(ot);const bt=Cl().then(or=>{if(or)return F.getId()}),[Ut,Et]=yield Promise.all([ot,bt]);ls(X)||hu(X,Ut.measurementId),Dl&&(K("consent","default",Dl),wa(void 0)),K("js",new Date);const Rr=null!==(Ze=Ne?.config)&&void 0!==Ze?Ze:{};return Rr.origin="firebase",Rr.update=!0,null!=Et&&(Rr[v_]=Et),K("config",Ut.measurementId,Rr),va&&(K("set",va),Ea(void 0)),Ut.measurementId})).apply(this,arguments)}class Ia{constructor(C){this.app=C}_delete(){return delete Xr[this.app.options.appId],Promise.resolve()}}let Xr={},Tl=[];const _u={};let vu,Zt,bi="dataLayer",Al=!1;function Ug(D,C,x){!function yd(){const D=[];if((0,ee.ru)()&&D.push("This is a browser extension environment."),(0,ee.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=di.create("invalid-analytics-context",{errorInfo:C});Mn.warn(x.message)}}();const F=D.options.appId;if(!F)throw di.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw di.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xr[F])throw di.create("already-exists",{id:F});if(!Al){!function Xs(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(bi);const{wrappedGtag:X,gtagCore:Ne}=function Tf(D,C,x,F,K){let X=function(...Ne){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(X=window[K]),window[K]=function Uo(D,C,x,F){function X(){return(X=(0,P.Z)(function*(Ne,Ze,ot){try{"event"===Ne?yield ma(D,C,x,Ze,ot):"config"===Ne?yield fu(D,C,x,F,Ze,ot):"consent"===Ne?D("consent","update",ot):D("set",Ze)}catch(bt){Mn.error(bt)}})).apply(this,arguments)}return function K(Ne,Ze,ot){return X.apply(this,arguments)}}(X,D,C,x),{gtagCore:X,wrappedGtag:window[K]}}(Xr,Tl,_u,bi,"gtag");Zt=X,vu=Ne,Al=!0}return Xr[F]=function Mf(D,C,x,F,K,X,Ne){return Jr.apply(this,arguments)}(D,Tl,_u,C,vu,bi,x),new Ia(D)}function Ml(){return io.apply(this,arguments)}function io(){return(io=(0,P.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}const xr="@firebase/analytics";!function Rf(){(0,te._registerComponent)(new ue.wA(vl,(C,{options:x})=>Ug(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,te._registerComponent)(new ue.wA("analytics-internal",function D(C){try{const x=C.getProvider(vl).getImmediate();return{logEvent:(F,K,X)=>function jg(D,C,x,F){D=(0,ee.m9)(D),function md(D,C,x,F,K){return no.apply(this,arguments)}(Zt,Xr[D.app.options.appId],C,x,F).catch(K=>Mn.error(K))}(x,F,K,X)}}catch(x){throw di.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,te.registerVersion)(xr,"0.9.5"),(0,te.registerVersion)(xr,"0.9.5","esm2017")}();var ba=k(4408),Eu=k(7565);const _d=new class Hg extends Eu.v{}(class wu extends ba.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var Pf=k(4986),Of=k(8505),Br=k(9468),$o=k(5363);const Oi=new g.GfV("7.5.0"),Rl="__angularfire_symbol__analyticsIsSupportedValue",Nl="__angularfire_symbol__analyticsIsSupported",vd="__angularfire_symbol__remoteConfigIsSupportedValue",wd="__angularfire_symbol__remoteConfigIsSupported",Iu="__angularfire_symbol__messagingIsSupportedValue",Pl="__angularfire_symbol__messagingIsSupported";function ct(D,C,x){if(C){if(1===C.length)return C[0];const X=C.filter(Ne=>Ne.app===x);if(1===X.length)return X[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Nl]||(globalThis[Nl]=Ml().then(D=>globalThis[Rl]=D).catch(()=>globalThis[Rl]=!1)),globalThis[Pl]||(globalThis[Pl]=ld().then(D=>globalThis[Iu]=D).catch(()=>globalThis[Iu]=!1)),globalThis[wd]||(globalThis[wd]=eu().then(D=>globalThis[vd]=D).catch(()=>globalThis[vd]=!1));const ei=(D,C)=>{const x=C?[C]:(0,Q.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(Ne=>{F.includes(Ne)||F.push(Ne)})}),F};function $n(){}class so{constructor(C,x=_d){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const K=this.zone;return this.delegate.schedule(function(Ne){K.runGuarded(()=>{C.apply(this,[Ne])})},x,F)}}class bu{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$n,{},$n,$n)),x.pipe((0,Of.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fi=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new so(Zone.current)),this.insideAngular=x.run(()=>new so(Zone.current,Pf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function oo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Vn(D){return oo(),function js(D){return function(x){return(x=x.lift(new bu(D.ngZone))).pipe((0,Br.R)(D.outsideAngular),(0,$o.Q)(D.insideAngular))}}(oo())(D)}},2090:(_t,Ae,k)=>{k.d(Ae,{$s:()=>Ot,BH:()=>Ee,G6:()=>Re,L:()=>de,LL:()=>Ye,Pz:()=>_e,Sg:()=>Ue,UG:()=>pe,US:()=>ue,ZB:()=>W,ZR:()=>on,aH:()=>Se,b$:()=>gt,eu:()=>Ie,hl:()=>Pe,jU:()=>Le,m9:()=>Lr,ne:()=>vn,pd:()=>Fn,r3:()=>li,ru:()=>Je,tV:()=>j,uI:()=>U,vZ:()=>Fr,w1:()=>re,xO:()=>vi,xb:()=>Ao,z$:()=>Be,zI:()=>lt,zd:()=>Hi});const te=function(B){const V=[];let q=0;for(let ie=0;ie<B.length;ie++){let J=B.charCodeAt(ie);J<128?V[q++]=J:J<2048?(V[q++]=J>>6|192,V[q++]=63&J|128):55296==(64512&J)&&ie+1<B.length&&56320==(64512&B.charCodeAt(ie+1))?(J=65536+((1023&J)<<10)+(1023&B.charCodeAt(++ie)),V[q++]=J>>18|240,V[q++]=J>>12&63|128,V[q++]=J>>6&63|128,V[q++]=63&J|128):(V[q++]=J>>12|224,V[q++]=J>>6&63|128,V[q++]=63&J|128)}return V},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let J=0;J<B.length;J+=3){const He=B[J],xt=J+1<B.length,Qt=xt?B[J+1]:0,rn=J+2<B.length,ke=rn?B[J+2]:0;let Rn=(15&Qt)<<2|ke>>6,Sr=63&ke;rn||(Sr=64,xt||(Rn=64)),ie.push(q[He>>2],q[(3&He)<<4|Qt>>4],q[Rn],q[Sr])}return ie.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(te(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let q=0,ie=0;for(;q<B.length;){const J=B[q++];if(J<128)V[ie++]=String.fromCharCode(J);else if(J>191&&J<224){const He=B[q++];V[ie++]=String.fromCharCode((31&J)<<6|63&He)}else if(J>239&&J<365){const rn=((7&J)<<18|(63&B[q++])<<12|(63&B[q++])<<6|63&B[q++])-65536;V[ie++]=String.fromCharCode(55296+(rn>>10)),V[ie++]=String.fromCharCode(56320+(1023&rn))}else{const He=B[q++],xt=B[q++];V[ie++]=String.fromCharCode((15&J)<<12|(63&He)<<6|63&xt)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let J=0;J<B.length;){const He=q[B.charAt(J++)],Qt=J<B.length?q[B.charAt(J)]:0;++J;const ke=J<B.length?q[B.charAt(J)]:64;++J;const ft=J<B.length?q[B.charAt(J)]:64;if(++J,null==He||null==Qt||null==ke||null==ft)throw new oe;ie.push(He<<2|Qt>>4),64!==ke&&(ie.push(Qt<<4&240|ke>>2),64!==ft&&ie.push(ke<<6&192|ft))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const de=function(B){return function(B){const V=te(B);return ue.encodeByteArray(V,!0)}(B).replace(/\./g,"")},j=function(B){try{return ue.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function W(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!je(q)||(B[q]=W(B[q],V[q]));return B}function je(B){return"__proto__"!==B}const le=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=B&&j(B[1]);return V&&JSON.parse(V)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Se=()=>{var B;return null===(B=le())||void 0===B?void 0:B.config},_e=B=>{var V;return null===(V=le())||void 0===V?void 0:V[`_${B}`]};class Ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,ie)=>{q?this.reject(q):this.resolve(ie),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,ie))}}}function Ue(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=V||"demo-project",J=B.iat||0,He=B.sub||B.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:J,exp:J+3600,auth_time:J,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},B);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(xt)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function U(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function pe(){var B;const V=null===(B=le())||void 0===B?void 0:B.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Le(){return"object"==typeof self&&self.self===self}function Je(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function re(){const B=Be();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Re(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){try{return"object"==typeof indexedDB}catch{return!1}}function Ie(){return new Promise((B,V)=>{try{let q=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ie);J.onsuccess=()=>{J.result.close(),q||self.indexedDB.deleteDatabase(ie),B(!0)},J.onupgradeneeded=()=>{q=!1},J.onerror=()=>{var He;V((null===(He=J.error)||void 0===He?void 0:He.message)||"")}}catch(q){V(q)}})}function lt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class on extends Error{constructor(V,q,ie){super(q),this.code=V,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,on.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(V,q,ie){this.service=V,this.serviceName=q,this.errors=ie}create(V,...q){const ie=q[0]||{},J=`${this.service}/${V}`,He=this.errors[V],xt=He?function en(B,V){return B.replace(dt,(q,ie)=>{const J=V[ie];return null!=J?String(J):`<${ie}?>`})}(He,ie):"Error";return new on(J,`${this.serviceName}: ${xt} (${J}).`,ie)}}const dt=/\{\$([^}]+)}/g;function li(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function Ao(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function Fr(B,V){if(B===V)return!0;const q=Object.keys(B),ie=Object.keys(V);for(const J of q){if(!ie.includes(J))return!1;const He=B[J],xt=V[J];if($i(He)&&$i(xt)){if(!Fr(He,xt))return!1}else if(He!==xt)return!1}for(const J of ie)if(!q.includes(J))return!1;return!0}function $i(B){return null!==B&&"object"==typeof B}function vi(B){const V=[];for(const[q,ie]of Object.entries(B))Array.isArray(ie)?ie.forEach(J=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(J))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(ie));return V.length?"&"+V.join("&"):""}function Hi(B){const V={};return B.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[J,He]=ie.split("=");V[decodeURIComponent(J)]=decodeURIComponent(He)}}),V}function Fn(B){const V=B.indexOf("?");if(!V)return"";const q=B.indexOf("#",V);return B.substring(V,q>0?q:void 0)}function vn(B,V){const q=new wt(B,V);return q.subscribe.bind(q)}class wt{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(ie=>{this.error(ie)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,ie){let J;if(void 0===V&&void 0===q&&void 0===ie)throw new Error("Missing Observer.");J=function fn(B,V){if("object"!=typeof B||null===B)return!1;for(const q of V)if(q in B&&"function"==typeof B[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:ie},void 0===J.next&&(J.next=Wn),void 0===J.error&&(J.error=Wn),void 0===J.complete&&(J.complete=Wn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),He}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wn(){}function Ot(B,V=1e3,q=2){const ie=V*Math.pow(q,B),J=Math.round(.5*ie*(Math.random()-.5)*2);return Math.min(144e5,ie+J)}function Lr(B){return B&&B._delegate?B._delegate:B}},9751:(_t,Ae,k)=>{k.d(Ae,{y:()=>he});var g=k(2961),Q=k(727),P=k(8822),te=k(9635),ee=k(2416),ue=k(576),oe=k(2806);let he=(()=>{class W{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new W;return we.source=this,we.operator=Me,we}subscribe(Me,we,tt){const ye=function $(W){return W&&W instanceof g.Lv||function j(W){return W&&(0,ue.m)(W.next)&&(0,ue.m)(W.error)&&(0,ue.m)(W.complete)}(W)&&(0,Q.Nn)(W)}(Me)?Me:new g.Hp(Me,we,tt);return(0,oe.x)(()=>{const{operator:le,source:Xe}=this;ye.add(le?le.call(ye,Xe):Xe?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=de(we))((tt,ye)=>{const le=new g.Hp({next:Xe=>{try{Me(Xe)}catch(pt){ye(pt),le.unsubscribe()}},error:ye,complete:tt});this.subscribe(le)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[P.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=de(Me))((we,tt)=>{let ye;this.subscribe(le=>ye=le,le=>tt(le),()=>we(ye))})}}return W.create=je=>new W(je),W})();function de(W){var je;return null!==(je=W??ee.v.Promise)&&void 0!==je?je:Promise}},7579:(_t,Ae,k)=>{k.d(Ae,{x:()=>oe});var g=k(9751),Q=k(727);const te=(0,k(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=k(8737),ue=k(2806);let oe=(()=>{class de extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const W=new he(this,this);return W.operator=$,W}_throwIfClosed(){if(this.closed)throw new te}next($){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next($)}})}error($){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:W}=this;for(;W.length;)W.shift().error($)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:W,isStopped:je,observers:Me}=this;return W||je?Q.Lc:(this.currentObservers=null,Me.push($),new Q.w0(()=>{this.currentObservers=null,(0,ee.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:W,thrownError:je,isStopped:Me}=this;W?$.error(je):Me&&$.complete()}asObservable(){const $=new g.y;return $.source=this,$}}return de.create=(j,$)=>new he(j,$),de})();class he extends oe{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===W||W.call($,j)}error(j){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===W||W.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,W;return null!==(W=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==W?W:Q.Lc}}},2961:(_t,Ae,k)=>{k.d(Ae,{Hp:()=>tt,Lv:()=>W});var g=k(576),Q=k(727),P=k(2416),te=k(7849);function ee(){}const ue=de("C",void 0,void 0);function de(Se,_e,Ee){return{kind:Se,value:_e,error:Ee}}var j=k(3410),$=k(2806);class W extends Q.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Q.Nn)(_e)&&_e.add(this)):this.destination=pt}static create(_e,Ee,Ue){return new tt(_e,Ee,Ue)}next(_e){this.isStopped?Xe(function he(Se){return de("N",Se,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Xe(function oe(Se){return de("E",void 0,Se)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Xe(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Me(Se,_e){return je.call(Se,_e)}class we{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ue){ye(Ue)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ue){ye(Ue)}else ye(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){ye(Ee)}}}class tt extends W{constructor(_e,Ee,Ue){let Be;if(super(),(0,g.m)(_e)||!_e)Be={next:_e??void 0,error:Ee??void 0,complete:Ue??void 0};else{let U;this&&P.v.useDeprecatedNextContext?(U=Object.create(_e),U.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Me(_e.next,U),error:_e.error&&Me(_e.error,U),complete:_e.complete&&Me(_e.complete,U)}):Be=_e}this.destination=new we(Be)}}function ye(Se){P.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Se):(0,te.h)(Se)}function Xe(Se,_e){const{onStoppedNotification:Ee}=P.v;Ee&&j.z.setTimeout(()=>Ee(Se,_e))}const pt={closed:!0,next:ee,error:function le(Se){throw Se},complete:ee}},727:(_t,Ae,k)=>{k.d(Ae,{Lc:()=>ue,w0:()=>ee,Nn:()=>oe});var g=k(576);const P=(0,k(3888).d)(de=>function($){de(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((W,je)=>`${je+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var te=k(8737);class ee{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:W}=this;if((0,g.m)(W))try{W()}catch(Me){j=Me instanceof P?Me.errors:[Me]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Me of je)try{he(Me)}catch(we){j=j??[],we instanceof P?j=[...j,...we.errors]:j.push(we)}}if(j)throw new P(j)}}add(j){var $;if(j&&j!==this)if(this.closed)he(j);else{if(j instanceof ee){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,te.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,te.P)($,j),j instanceof ee&&j._removeParent(this)}}ee.EMPTY=(()=>{const de=new ee;return de.closed=!0,de})();const ue=ee.EMPTY;function oe(de){return de instanceof ee||de&&"closed"in de&&(0,g.m)(de.remove)&&(0,g.m)(de.add)&&(0,g.m)(de.unsubscribe)}function he(de){(0,g.m)(de)?de():de.unsubscribe()}},2416:(_t,Ae,k)=>{k.d(Ae,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,Ae,k)=>{k.d(Ae,{E:()=>Q});const Q=new(k(9751).y)(ee=>ee.complete())},8996:(_t,Ae,k)=>{k.d(Ae,{D:()=>_e});var g=k(8421),Q=k(5363),P=k(9468),ue=k(9751),he=k(2202),de=k(576),j=k(9672);function W(Ee,Ue){if(!Ee)throw new Error("Iterable cannot be null");return new ue.y(Be=>{(0,j.f)(Be,Ue,()=>{const U=Ee[Symbol.asyncIterator]();(0,j.f)(Be,Ue,()=>{U.next().then(pe=>{pe.done?Be.complete():Be.next(pe.value)})},0,!0)})})}var je=k(3670),Me=k(8239),we=k(1144),tt=k(6495),ye=k(2206),le=k(4532),Xe=k(3260);function _e(Ee,Ue){return Ue?function Se(Ee,Ue){if(null!=Ee){if((0,je.c)(Ee))return function te(Ee,Ue){return(0,g.Xf)(Ee).pipe((0,P.R)(Ue),(0,Q.Q)(Ue))}(Ee,Ue);if((0,we.z)(Ee))return function oe(Ee,Ue){return new ue.y(Be=>{let U=0;return Ue.schedule(function(){U===Ee.length?Be.complete():(Be.next(Ee[U++]),Be.closed||this.schedule())})})}(Ee,Ue);if((0,Me.t)(Ee))return function ee(Ee,Ue){return(0,g.Xf)(Ee).pipe((0,P.R)(Ue),(0,Q.Q)(Ue))}(Ee,Ue);if((0,ye.D)(Ee))return W(Ee,Ue);if((0,tt.T)(Ee))return function $(Ee,Ue){return new ue.y(Be=>{let U;return(0,j.f)(Be,Ue,()=>{U=Ee[he.h](),(0,j.f)(Be,Ue,()=>{let pe,Le;try{({value:pe,done:Le}=U.next())}catch(Je){return void Be.error(Je)}Le?Be.complete():Be.next(pe)},0,!0)}),()=>(0,de.m)(U?.return)&&U.return()})}(Ee,Ue);if((0,Xe.L)(Ee))return function pt(Ee,Ue){return W((0,Xe.Q)(Ee),Ue)}(Ee,Ue)}throw(0,le.z)(Ee)}(Ee,Ue):(0,g.Xf)(Ee)}},8421:(_t,Ae,k)=>{k.d(Ae,{Xf:()=>je});var g=k(655),Q=k(1144),P=k(8239),te=k(9751),ee=k(3670),ue=k(2206),oe=k(4532),he=k(6495),de=k(3260),j=k(576),$=k(7849),W=k(8822);function je(Se){if(Se instanceof te.y)return Se;if(null!=Se){if((0,ee.c)(Se))return function Me(Se){return new te.y(_e=>{const Ee=Se[W.L]();if((0,j.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,Q.z)(Se))return function we(Se){return new te.y(_e=>{for(let Ee=0;Ee<Se.length&&!_e.closed;Ee++)_e.next(Se[Ee]);_e.complete()})}(Se);if((0,P.t)(Se))return function tt(Se){return new te.y(_e=>{Se.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,$.h)})}(Se);if((0,ue.D)(Se))return le(Se);if((0,he.T)(Se))return function ye(Se){return new te.y(_e=>{for(const Ee of Se)if(_e.next(Ee),_e.closed)return;_e.complete()})}(Se);if((0,de.L)(Se))return function Xe(Se){return le((0,de.Q)(Se))}(Se)}throw(0,oe.z)(Se)}function le(Se){return new te.y(_e=>{(function pt(Se,_e){var Ee,Ue,Be,U;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,g.KL)(Se);!(Ue=yield Ee.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(pe){Be={error:pe}}finally{try{Ue&&!Ue.done&&(U=Ee.return)&&(yield U.call(Ee))}finally{if(Be)throw Be.error}}_e.complete()})})(Se,_e).catch(Ee=>_e.error(Ee))})}},6451:(_t,Ae,k)=>{k.d(Ae,{T:()=>ue});var g=k(8189),Q=k(8421),P=k(515),te=k(7669),ee=k(8996);function ue(...oe){const he=(0,te.yG)(oe),de=(0,te._6)(oe,1/0),j=oe;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,g.J)(de)((0,ee.D)(j,he)):P.E}},5403:(_t,Ae,k)=>{k.d(Ae,{x:()=>Q});var g=k(2961);function Q(te,ee,ue,oe,he){return new P(te,ee,ue,oe,he)}class P extends g.Lv{constructor(ee,ue,oe,he,de,j){super(ee),this.onFinalize=de,this.shouldUnsubscribe=j,this._next=ue?function($){try{ue($)}catch(W){ee.error(W)}}:super._next,this._error=he?function($){try{he($)}catch(W){ee.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch($){ee.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(_t,Ae,k)=>{k.d(Ae,{U:()=>P});var g=k(4482),Q=k(5403);function P(te,ee){return(0,g.e)((ue,oe)=>{let he=0;ue.subscribe((0,Q.x)(oe,de=>{oe.next(te.call(ee,de,he++))}))})}},8189:(_t,Ae,k)=>{k.d(Ae,{J:()=>P});var g=k(5577),Q=k(4671);function P(te=1/0){return(0,g.z)(Q.y,te)}},5577:(_t,Ae,k)=>{k.d(Ae,{z:()=>he});var g=k(4004),Q=k(8421),P=k(4482),te=k(9672),ee=k(5403),oe=k(576);function he(de,j,$=1/0){return(0,oe.m)(j)?he((W,je)=>(0,g.U)((Me,we)=>j(W,Me,je,we))((0,Q.Xf)(de(W,je))),$):("number"==typeof j&&($=j),(0,P.e)((W,je)=>function ue(de,j,$,W,je,Me,we,tt){const ye=[];let le=0,Xe=0,pt=!1;const Se=()=>{pt&&!ye.length&&!le&&j.complete()},_e=Ue=>le<W?Ee(Ue):ye.push(Ue),Ee=Ue=>{Me&&j.next(Ue),le++;let Be=!1;(0,Q.Xf)($(Ue,Xe++)).subscribe((0,ee.x)(j,U=>{je?.(U),Me?_e(U):j.next(U)},()=>{Be=!0},void 0,()=>{if(Be)try{for(le--;ye.length&&le<W;){const U=ye.shift();we?(0,te.f)(j,we,()=>Ee(U)):Ee(U)}Se()}catch(U){j.error(U)}}))};return de.subscribe((0,ee.x)(j,_e,()=>{pt=!0,Se()})),()=>{tt?.()}}(W,je,de,$)))}},5363:(_t,Ae,k)=>{k.d(Ae,{Q:()=>te});var g=k(9672),Q=k(4482),P=k(5403);function te(ee,ue=0){return(0,Q.e)((oe,he)=>{oe.subscribe((0,P.x)(he,de=>(0,g.f)(he,ee,()=>he.next(de),ue),()=>(0,g.f)(he,ee,()=>he.complete(),ue),de=>(0,g.f)(he,ee,()=>he.error(de),ue)))})}},3099:(_t,Ae,k)=>{k.d(Ae,{B:()=>ee});var g=k(8421),Q=k(7579),P=k(2961),te=k(4482);function ee(oe={}){const{connector:he=(()=>new Q.x),resetOnError:de=!0,resetOnComplete:j=!0,resetOnRefCountZero:$=!0}=oe;return W=>{let je,Me,we,tt=0,ye=!1,le=!1;const Xe=()=>{Me?.unsubscribe(),Me=void 0},pt=()=>{Xe(),je=we=void 0,ye=le=!1},Se=()=>{const _e=je;pt(),_e?.unsubscribe()};return(0,te.e)((_e,Ee)=>{tt++,!le&&!ye&&Xe();const Ue=we=we??he();Ee.add(()=>{tt--,0===tt&&!le&&!ye&&(Me=ue(Se,$))}),Ue.subscribe(Ee),!je&&tt>0&&(je=new P.Hp({next:Be=>Ue.next(Be),error:Be=>{le=!0,Xe(),Me=ue(pt,de,Be),Ue.error(Be)},complete:()=>{ye=!0,Xe(),Me=ue(pt,j),Ue.complete()}}),(0,g.Xf)(_e).subscribe(je))})(W)}}function ue(oe,he,...de){if(!0===he)return void oe();if(!1===he)return;const j=new P.Hp({next:()=>{j.unsubscribe(),oe()}});return he(...de).subscribe(j)}},9468:(_t,Ae,k)=>{k.d(Ae,{R:()=>Q});var g=k(4482);function Q(P,te=0){return(0,g.e)((ee,ue)=>{ue.add(P.schedule(()=>ee.subscribe(ue),te))})}},8505:(_t,Ae,k)=>{k.d(Ae,{b:()=>ee});var g=k(576),Q=k(4482),P=k(5403),te=k(4671);function ee(ue,oe,he){const de=(0,g.m)(ue)||oe||he?{next:ue,error:oe,complete:he}:ue;return de?(0,Q.e)((j,$)=>{var W;null===(W=de.subscribe)||void 0===W||W.call(de);let je=!0;j.subscribe((0,P.x)($,Me=>{var we;null===(we=de.next)||void 0===we||we.call(de,Me),$.next(Me)},()=>{var Me;je=!1,null===(Me=de.complete)||void 0===Me||Me.call(de),$.complete()},Me=>{var we;je=!1,null===(we=de.error)||void 0===we||we.call(de,Me),$.error(Me)},()=>{var Me,we;je&&(null===(Me=de.unsubscribe)||void 0===Me||Me.call(de)),null===(we=de.finalize)||void 0===we||we.call(de)}))}):te.y}},4408:(_t,Ae,k)=>{k.d(Ae,{o:()=>ee});var g=k(727);class Q extends g.w0{constructor(oe,he){super()}schedule(oe,he=0){return this}}const P={setInterval(ue,oe,...he){const{delegate:de}=P;return de?.setInterval?de.setInterval(ue,oe,...he):setInterval(ue,oe,...he)},clearInterval(ue){const{delegate:oe}=P;return(oe?.clearInterval||clearInterval)(ue)},delegate:void 0};var te=k(8737);class ee extends Q{constructor(oe,he){super(oe,he),this.scheduler=oe,this.work=he,this.pending=!1}schedule(oe,he=0){var de;if(this.closed)return this;this.state=oe;const j=this.id,$=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId($,j,he)),this.pending=!0,this.delay=he,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId($,this.id,he),this}requestAsyncId(oe,he,de=0){return P.setInterval(oe.flush.bind(oe,this),de)}recycleAsyncId(oe,he,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return he;null!=he&&P.clearInterval(he)}execute(oe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(oe,he);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,he){let j,de=!1;try{this.work(oe)}catch($){de=!0,j=$||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:oe,scheduler:he}=this,{actions:de}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(de,this),null!=oe&&(this.id=this.recycleAsyncId(he,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Ae,k)=>{k.d(Ae,{v:()=>P});var g=k(6063);class Q{constructor(ee,ue=Q.now){this.schedulerActionCtor=ee,this.now=ue}schedule(ee,ue=0,oe){return new this.schedulerActionCtor(this,ee).schedule(oe,ue)}}Q.now=g.l.now;class P extends Q{constructor(ee,ue=Q.now){super(ee,ue),this.actions=[],this._active=!1}flush(ee){const{actions:ue}=this;if(this._active)return void ue.push(ee);let oe;this._active=!0;do{if(oe=ee.execute(ee.state,ee.delay))break}while(ee=ue.shift());if(this._active=!1,oe){for(;ee=ue.shift();)ee.unsubscribe();throw oe}}}},4986:(_t,Ae,k)=>{k.d(Ae,{z:()=>P});var g=k(4408);const P=new(k(7565).v)(g.o)},6063:(_t,Ae,k)=>{k.d(Ae,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(_t,Ae,k)=>{k.d(Ae,{z:()=>g});const g={setTimeout(Q,P,...te){const{delegate:ee}=g;return ee?.setTimeout?ee.setTimeout(Q,P,...te):setTimeout(Q,P,...te)},clearTimeout(Q){const{delegate:P}=g;return(P?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(_t,Ae,k)=>{k.d(Ae,{h:()=>Q});const Q=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Ae,k)=>{k.d(Ae,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,Ae,k)=>{k.d(Ae,{_6:()=>ue,jO:()=>te,yG:()=>ee});var g=k(576);function P(oe){return oe[oe.length-1]}function te(oe){return(0,g.m)(P(oe))?oe.pop():void 0}function ee(oe){return function Q(oe){return oe&&(0,g.m)(oe.schedule)}(P(oe))?oe.pop():void 0}function ue(oe,he){return"number"==typeof P(oe)?oe.pop():he}},8737:(_t,Ae,k)=>{function g(Q,P){if(Q){const te=Q.indexOf(P);0<=te&&Q.splice(te,1)}}k.d(Ae,{P:()=>g})},3888:(_t,Ae,k)=>{function g(Q){const te=Q(ee=>{Error.call(ee),ee.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}k.d(Ae,{d:()=>g})},2806:(_t,Ae,k)=>{k.d(Ae,{O:()=>te,x:()=>P});var g=k(2416);let Q=null;function P(ee){if(g.v.useDeprecatedSynchronousErrorHandling){const ue=!Q;if(ue&&(Q={errorThrown:!1,error:null}),ee(),ue){const{errorThrown:oe,error:he}=Q;if(Q=null,oe)throw he}}else ee()}function te(ee){g.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ee)}},9672:(_t,Ae,k)=>{function g(Q,P,te,ee=0,ue=!1){const oe=P.schedule(function(){te(),ue?Q.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(Q.add(oe),!ue)return oe}k.d(Ae,{f:()=>g})},4671:(_t,Ae,k)=>{function g(Q){return Q}k.d(Ae,{y:()=>g})},1144:(_t,Ae,k)=>{k.d(Ae,{z:()=>g});const g=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(_t,Ae,k)=>{k.d(Ae,{D:()=>Q});var g=k(576);function Q(P){return Symbol.asyncIterator&&(0,g.m)(P?.[Symbol.asyncIterator])}},576:(_t,Ae,k)=>{function g(Q){return"function"==typeof Q}k.d(Ae,{m:()=>g})},3670:(_t,Ae,k)=>{k.d(Ae,{c:()=>P});var g=k(8822),Q=k(576);function P(te){return(0,Q.m)(te[g.L])}},6495:(_t,Ae,k)=>{k.d(Ae,{T:()=>P});var g=k(2202),Q=k(576);function P(te){return(0,Q.m)(te?.[g.h])}},8239:(_t,Ae,k)=>{k.d(Ae,{t:()=>Q});var g=k(576);function Q(P){return(0,g.m)(P?.then)}},3260:(_t,Ae,k)=>{k.d(Ae,{L:()=>te,Q:()=>P});var g=k(655),Q=k(576);function P(ee){return(0,g.FC)(this,arguments,function*(){const oe=ee.getReader();try{for(;;){const{value:he,done:de}=yield(0,g.qq)(oe.read());if(de)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(he)}}finally{oe.releaseLock()}})}function te(ee){return(0,Q.m)(ee?.getReader)}},4482:(_t,Ae,k)=>{k.d(Ae,{A:()=>Q,e:()=>P});var g=k(576);function Q(te){return(0,g.m)(te?.lift)}function P(te){return ee=>{if(Q(ee))return ee.lift(function(ue){try{return te(ue,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(_t,Ae,k)=>{k.d(Ae,{U:()=>P,z:()=>Q});var g=k(4671);function Q(...te){return P(te)}function P(te){return 0===te.length?g.y:1===te.length?te[0]:function(ue){return te.reduce((oe,he)=>he(oe),ue)}}},7849:(_t,Ae,k)=>{k.d(Ae,{h:()=>P});var g=k(2416),Q=k(3410);function P(te){Q.z.setTimeout(()=>{const{onUnhandledError:ee}=g.v;if(!ee)throw te;ee(te)})}},4532:(_t,Ae,k)=>{function g(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>g})},655:(_t,Ae,k)=>{function te(re,fe){var ve={};for(var Re in re)Object.prototype.hasOwnProperty.call(re,Re)&&fe.indexOf(Re)<0&&(ve[Re]=re[Re]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(Re=Object.getOwnPropertySymbols(re);Pe<Re.length;Pe++)fe.indexOf(Re[Pe])<0&&Object.prototype.propertyIsEnumerable.call(re,Re[Pe])&&(ve[Re[Pe]]=re[Re[Pe]])}return ve}function W(re,fe,ve,Re){return new(ve||(ve=Promise))(function(Ie,lt){function Bt(en){try{Ye(Re.next(en))}catch(dt){lt(dt)}}function on(en){try{Ye(Re.throw(en))}catch(dt){lt(dt)}}function Ye(en){en.done?Ie(en.value):function Pe(Ie){return Ie instanceof ve?Ie:new ve(function(lt){lt(Ie)})}(en.value).then(Bt,on)}Ye((Re=Re.apply(re,fe||[])).next())})}function Se(re){return this instanceof Se?(this.v=re,this):new Se(re)}function _e(re,fe,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Re=ve.apply(re,fe||[]),Ie=[];return Pe={},lt("next"),lt("throw"),lt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function lt(St){Re[St]&&(Pe[St]=function(br){return new Promise(function(Cn,Tn){Ie.push([St,br,Cn,Tn])>1||Bt(St,br)})})}function Bt(St,br){try{!function on(St){St.value instanceof Se?Promise.resolve(St.value.v).then(Ye,en):dt(Ie[0][2],St)}(Re[St](br))}catch(Cn){dt(Ie[0][3],Cn)}}function Ye(St){Bt("next",St)}function en(St){Bt("throw",St)}function dt(St,br){St(br),Ie.shift(),Ie.length&&Bt(Ie[0][0],Ie[0][1])}}function Ue(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,fe=re[Symbol.asyncIterator];return fe?fe.call(re):(re=function tt(re){var fe="function"==typeof Symbol&&Symbol.iterator,ve=fe&&re[fe],Re=0;if(ve)return ve.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Re>=re.length&&(re=void 0),{value:re&&re[Re++],done:!re}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ve={},Re("next"),Re("throw"),Re("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function Re(Ie){ve[Ie]=re[Ie]&&function(lt){return new Promise(function(Bt,on){!function Pe(Ie,lt,Bt,on){Promise.resolve(on).then(function(Ye){Ie({value:Ye,done:Bt})},lt)}(Bt,on,(lt=re[Ie](lt)).done,lt.value)})}}}k.d(Ae,{FC:()=>_e,KL:()=>Ue,_T:()=>te,mG:()=>W,qq:()=>Se})},4650:(_t,Ae,k)=>{k.d(Ae,{$8M:()=>Mf,$Z:()=>bm,AFp:()=>Hy,AaK:()=>he,CRH:()=>w0,CZH:()=>$y,CqO:()=>_h,D6c:()=>ew,EJc:()=>qy,F$t:()=>Tv,F4k:()=>oy,FYo:()=>L_,FiY:()=>X,G48:()=>$b,Gf:()=>ab,GfV:()=>V_,Gpc:()=>$,Hh0:()=>Wu,Hsn:()=>Av,JOm:()=>ps,Jf7:()=>vC,LFG:()=>Vn,LSH:()=>nc,Lbi:()=>zy,Lck:()=>Tc,MAs:()=>Jn,MMx:()=>My,NdJ:()=>ay,OlP:()=>Zt,Oqu:()=>fy,PXZ:()=>eT,Q6J:()=>ty,QGY:()=>sy,QP$:()=>xt,QbO:()=>Mb,Qsj:()=>eE,R0b:()=>bs,RDi:()=>Zf,Rgc:()=>ea,SBq:()=>up,Sil:()=>Uc,Suo:()=>Nc,TTD:()=>os,TgZ:()=>ny,VKq:()=>u0,X6Q:()=>n_,XFs:()=>Qe,Xpm:()=>De,Xts:()=>Zd,Y36:()=>at,YKP:()=>Ty,YNc:()=>mh,Yjl:()=>q,Yz7:()=>Ye,Z0I:()=>br,ZZ4:()=>og,_Bn:()=>Sy,_UZ:()=>ry,_Vd:()=>ap,_c5:()=>Yb,_uU:()=>Ic,aQg:()=>ag,c2e:()=>ts,cJS:()=>dt,cg1:()=>bh,dDg:()=>XS,dqk:()=>fn,eFA:()=>ng,ekj:()=>Oe,eoX:()=>Fb,f3M:()=>Nt,g9A:()=>Yh,h0i:()=>$a,hGG:()=>fT,hij:()=>xn,iGM:()=>ob,ifc:()=>mt,ip1:()=>Jp,jDz:()=>kh,kL8:()=>_I,lG2:()=>V,lqb:()=>oc,lri:()=>kb,n5z:()=>wa,oAB:()=>Wt,oxw:()=>Sv,q4F:()=>rE,qLn:()=>lp,qOj:()=>Zm,qZA:()=>xp,rWj:()=>N0,sBO:()=>j0,sIi:()=>Cp,s_b:()=>ky,soG:()=>Lc,tb:()=>Qh,tp0:()=>Ze,uIk:()=>Lu,vHH:()=>we,vpe:()=>Io,wAp:()=>Pt,xp6:()=>q_,z2F:()=>e_,zSh:()=>rp,zs3:()=>xu});var g=k(7579),Q=k(727),P=k(9751),te=k(6451),ee=k(3099);function ue(s){for(let o in s)if(s[o]===ue)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function de(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=ue({__forward_ref__:ue});function $(s){return s.__forward_ref__=$,s.toString=function(){return he(this())},s}function W(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===$}class we extends Error{constructor(o,a){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function _e(s,o){throw new we(-201,!1)}function Pe(s,o){null==s&&function Ie(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Ye(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function dt(s){return{providers:s.providers||[],imports:s.imports||[]}}function St(s){return Cn(s,ji)||Cn(s,Mi)}function br(s){return null!==St(s)}function Cn(s,o){return s.hasOwnProperty(o)?s[o]:null}function ui(s){return s&&(s.hasOwnProperty(li)||s.hasOwnProperty(Ao))?s[li]:null}const ji=ue({\u0275prov:ue}),li=ue({\u0275inj:ue}),Mi=ue({ngInjectableDef:ue}),Ao=ue({ngInjectorDef:ue});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let Fr;function hr(s){const o=Fr;return Fr=s,o}function vi(s,o,a){const l=St(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Qe.Optional?null:void 0!==o?o:void _e(he(s))}function Fn(s){return{toString:s}.toString()}var rr=(()=>((rr=rr||{})[rr.OnPush=0]="OnPush",rr[rr.Default=1]="Default",rr))(),mt=(()=>{return(s=mt||(mt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",mt;var s})();const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cr={},Lt=[],As=ue({\u0275cmp:ue}),an=ue({\u0275dir:ue}),Gi=ue({\u0275pipe:ue}),un=ue({\u0275mod:ue}),fr=ue({\u0275fac:ue}),Wr=ue({__NG_ELEMENT_ID__:ue});let st=0;function De(s){return Fn(()=>{const a=!0===s.standalone,l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===rr.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Lt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||mt.Emulated,id:"c"+st++,styles:s.styles||Lt,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,v=s.features;return d.inputs=B(s.inputs,l),d.outputs=B(s.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=m?()=>("function"==typeof m?m():m).map(Ot).filter(Vt):null,d.pipeDefs=m?()=>("function"==typeof m?m():m).map(He).filter(Vt):null,d})}function Ot(s){return ie(s)||J(s)}function Vt(s){return null!==s}function Wt(s){return Fn(()=>({type:s.type,bootstrap:s.bootstrap||Lt,declarations:s.declarations||Lt,imports:s.imports||Lt,exports:s.exports||Lt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,o){if(null==s)return Cr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),a[d]=l,o&&(o[d]=m)}return a}const V=De;function q(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ie(s){return s[As]||null}function J(s){return s[an]||null}function He(s){return s[Gi]||null}function xt(s){const o=ie(s)||J(s)||He(s);return null!==o&&o.standalone}function Qt(s,o){const a=s[un]||null;if(!a&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return a}function gr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Kr(s){return Array.isArray(s)&&!0===s[1]}function Xa(s){return 0!=(8&s.flags)}function aa(s){return 2==(2&s.flags)}function sl(s){return 1==(1&s.flags)}function Vr(s){return null!==s.template}function gf(s){return 0!=(256&s[2])}function qi(s,o){return s.hasOwnProperty(fr)?s[fr]:null}class ss{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function os(){return Ks}function Ks(s){return s.type.prototype.ngOnChanges&&(s.setInput=tu),ua}function ua(){const s=yf(this),o=s?.current;if(o){const a=s.previous;if(a===Cr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function tu(s,o,a,l){const d=yf(s)||function la(s,o){return s[ll]=o}(s,{previous:Cr,current:null}),m=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[a],b=v[E];m[E]=new ss(b&&b.currentValue,o,v===Cr),s[l]=o}os.ngInherit=!0;const ll="__ngSimpleChanges__";function yf(s){return s[ll]||null}function Ln(s){for(;Array.isArray(s);)s=s[0];return s}function Ei(s,o){return Ln(o[s])}function Ur(s,o){return Ln(o[s.index])}function Ro(s,o){return s.data[o]}function jn(s,o){const a=o[s];return gr(a)?a:a[0]}function ca(s){return 64==(64&s[2])}function Ri(s,o){return null==o?null:s[o]}function Zs(s){s[18]=0}function Nn(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Mt={lFrame:ga(null),bindingsEnabled:!0};function No(){return Mt.bindingsEnabled}function Ce(){return Mt.lFrame.lView}function Jt(){return Mt.lFrame.tView}function Yn(){let s=Oo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Oo(){return Mt.lFrame.currentTNode}function Zr(s,o){const a=Mt.lFrame;a.currentTNode=s,a.isParent=o}function au(){return Mt.lFrame.isParent}function ko(){Mt.lFrame.isParent=!1}function Yr(){const s=Mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function pa(){return Mt.lFrame.bindingIndex++}function od(s,o){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Ys(o)}function Ys(s){Mt.lFrame.currentDirectiveIndex=s}function Fs(){return Mt.lFrame.currentQueryIndex}function Qs(s){Mt.lFrame.currentQueryIndex=s}function lu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ad(s,o,a){if(a&Qe.SkipSelf){let d=o,m=s;for(;!(d=d.parent,null!==d||a&Qe.Host||(d=lu(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;o=d,s=m}const l=Mt.lFrame=yl();return l.currentTNode=o,l.lView=s,!0}function Ls(s){const o=yl(),a=s[1];Mt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function yl(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?ga(s):o}function ga(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function bf(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const cu=bf;function Fo(){const s=bf();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Mr(){return Mt.lFrame.selectedIndex}function Js(s){Mt.lFrame.selectedIndex=s}function pn(){const s=Mt.lFrame;return Ro(s.tView,s.selectedIndex)}function Cf(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const m=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:R}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-a,b),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function Lo(s,o,a){vl(s,o,3,a)}function _l(s,o,a,l){(3&s[2])===a&&vl(s,o,a,l)}function Fg(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function vl(s,o,a,l){const m=l??-1,v=o.length-1;let E=0;for(let b=void 0!==l?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=l&&E>=l)break}else o[b]<0&&(s[18]+=65536),(E<m||-1==m)&&(v_(s,a,o,b),s[18]=(4294901760&s[18])+b+2),b++}function v_(s,o,a,l){const d=a[l]<0,m=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class wl{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function hu(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const m=a[l++],v=a[l++],E=a[l++];s.setAttribute(o,v,E,m)}else{const m=d,v=a[++l];fu(m)?s.setProperty(o,m,v):s.setAttribute(o,m,v),l++}}return l}function Xs(s){return 3===s||4===s||6===s}function fu(s){return 64===s.charCodeAt(0)}function eo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||ma(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function ma(s,o,a,l,d){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const E=s[m++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=m-1;break}}}for(;m<s.length;){const E=s[m];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[m+1]=d));if(l===s[m+1])return void(s[m+2]=d)}m++,null!==l&&m++,null!==d&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,a),null!==l&&s.splice(m++,0,l),null!==d&&s.splice(m++,0,d)}function ya(s){return-1!==s}function Uo(s){return 32767&s}function ls(s,o){let a=function Tf(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let _a=!0;function Us(s){const o=_a;return _a=s,o}let Il=0;const sr={};function yn(s,o){const a=to(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,pu(l.data,s),pu(o,null),pu(l.blueprint,null));const d=gu(s,o),m=s.injectorIndex;if(ya(d)){const v=Uo(d),E=ls(d,o),b=E[1].data;for(let T=0;T<8;T++)o[m+T]=E[v+T]|b[v+T]}return o[m+8]=d,m}function pu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function to(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function gu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Sl(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Bo(s,o,a){!function gd(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Wr)&&(l=a[Wr]),null==l&&(l=a[Wr]=Il++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function va(s,o,a){if(a&Qe.Optional||void 0!==s)return s;_e()}function md(s,o,a,l){if(a&Qe.Optional&&void 0===l&&(l=null),0==(a&(Qe.Self|Qe.Host))){const d=s[9],m=hr(void 0);try{return d?d.get(o,l,a&Qe.Optional):vi(o,l,a&Qe.Optional)}finally{hr(m)}}return va(l,0,a)}function no(s,o,a,l=Qe.Default,d){if(null!==s){if(1024&o[2]){const v=function Cl(s,o,a,l,d){let m=s,v=o;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=ro(m,v,a,l|Qe.Self,sr);if(E!==sr)return E;let b=m.parent;if(!b){const T=v[21];if(T){const R=T.get(a,sr,l);if(R!==sr)return R}b=Sl(v),v=v[15]}m=b}return d}(s,o,a,l,sr);if(v!==sr)return v}const m=ro(s,o,a,l,sr);if(m!==sr)return m}return md(o,a,l,d)}function ro(s,o,a,l,d){const m=function Af(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Wr)?s[Wr]:void 0;return"number"==typeof o?o>=0?255&o:Dl:o}(a);if("function"==typeof m){if(!ad(o,s,l))return l&Qe.Host?va(d,0,l):md(o,a,l,d);try{const v=m(l);if(null!=v||l&Qe.Optional)return v;_e()}finally{cu()}}else if("number"==typeof m){let v=null,E=to(s,o),b=-1,T=l&Qe.Host?o[16][6]:null;for((-1===E||l&Qe.SkipSelf)&&(b=-1===E?gu(s,o):o[E+8],-1!==b&&bl(l,!1)?(v=o[1],E=Uo(b),o=ls(b,o)):E=-1);-1!==E;){const R=o[1];if(jo(m,E,R.data)){const O=yu(E,o,a,v,l,T);if(O!==sr)return O}b=o[E+8],-1!==b&&bl(l,o[1].data[E+8]===T)&&jo(m,E,o)?(v=R,E=Uo(b),o=ls(b,o)):E=-1}}return d}function yu(s,o,a,l,d,m){const v=o[1],E=v.data[s+8],R=cs(E,v,a,null==l?aa(E)&&_a:l!=v&&0!=(3&E.type),d&Qe.Host&&m===E);return null!==R?Ni(o,v,R,E):sr}function cs(s,o,a,l,d){const m=s.providerIndexes,v=o.data,E=1048575&m,b=s.directiveStart,R=m>>20,H=d?E+R:s.directiveEnd;for(let Y=l?E:E+R;Y<H;Y++){const ge=v[Y];if(Y<b&&a===ge||Y>=b&&ge.type===a)return Y}if(d){const Y=v[b];if(Y&&Vr(Y)&&Y.type===a)return b}return null}function Ni(s,o,a,l){let d=s[a];const m=o.data;if(function hd(s){return s instanceof wl}(d)){const v=d;v.resolving&&function Xe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new we(-200,`Circular dependency in DI detected for ${s}${a}`)}(function le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(m[a]));const E=Us(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?hr(v.injectImpl):null;ad(s,l,Qe.Default);try{d=s[a]=v.factory(void 0,m,s,l),o.firstCreatePass&&a>=l.directiveStart&&function kg(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:m}=o.type.prototype;if(l){const v=Ks(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),m&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,m))}(a,m[a],o)}finally{null!==b&&hr(b),Us(E),v.resolving=!1,cu()}}return d}function jo(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function bl(s,o){return!(s&Qe.Self||s&Qe.Host&&o)}class Pi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return no(this._tNode,this._lView,o,l,a)}}function Dl(){return new Pi(Yn(),Ce())}function wa(s){return Fn(()=>{const o=s.prototype.constructor,a=o[fr]||Ea(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const m=d[fr]||Ea(d);if(m&&m!==a)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Ea(s){return je(s)?()=>{const o=Ea(W(s));return o&&o()}:qi(s)}function Sl(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function Mf(s){return function mu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const m=a[d];if(Xs(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(m===o)return a[d+1];d+=2}}}return null}(Yn(),s)}const Ia="__parameters__";function bi(s,o,a){return Fn(()=>{const l=function _u(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...m){if(this instanceof d)return l.apply(this,m),this;const v=new d(...m);return E.annotation=v,E;function E(b,T,R){const O=b.hasOwnProperty(Ia)?b[Ia]:Object.defineProperty(b,Ia,{value:[]})[Ia];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(v),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Zt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ye({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),xr(l,o)):o!==s&&o.push(l)}return o}function hi(s,o){s.forEach(a=>Array.isArray(a)?hi(a,o):o(a))}function Rf(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ba(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function wu(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function Br(s,o,a){let l=Oi(s,o);return l>=0?s[1|l]=a:(l=~l,function _d(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function $o(s,o){const a=Oi(s,o);if(a>=0)return s[1|a]}function Oi(s,o){return function Nl(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const m=l+(d-l>>1),v=s[m<<a];if(o===v)return m<<a;v>o?d=m:l=m+1}return~(d<<a)}(s,o,1)}const ei={},$n="__NG_DI_FLAG__",so="ngTempTokenPath",fi=/\n/gm,Ed="__source";let pi;function ao(s){const o=pi;return pi=s,o}function kl(s,o=Qe.Default){if(void 0===pi)throw new we(-203,!1);return null===pi?vi(s,void 0,o):pi.get(s,o&Qe.Optional?null:void 0,o)}function Vn(s,o=Qe.Default){return(function $i(){return Fr}()||kl)(W(s),o)}function Nt(s,o=Qe.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Vn(s,o)}function Fl(s){const o=[];for(let a=0;a<s.length;a++){const l=W(s[a]);if(Array.isArray(l)){if(0===l.length)throw new we(900,!1);let d,m=Qe.Default;for(let v=0;v<l.length;v++){const E=l[v],b=C(E);"number"==typeof b?-1===b?d=E.token:m|=b:d=E}o.push(Vn(d,m))}else o.push(Vn(l))}return o}function D(s,o){return s[$n]=o,s.prototype[$n]=o,s}function C(s){return s[$n]}const X=D(bi("Optional"),8),Ze=D(bi("SkipSelf"),4);var ps=(()=>((ps=ps||{})[ps.Important=1]="Important",ps[ps.DashCase=2]="DashCase",ps))();const Td=new Map;let D_=0;const uo="__ngContext__";function Tt(s,o){gr(o)?(s[uo]=o[20],function Kg(s){Td.set(s[20],s)}(o)):s[uo]=o}function jl(s,o){return undefined(s,o)}function Hl(s){const o=s[3];return Kr(o)?o[3]:o}function Tu(s){return em(s[13])}function $f(s){return em(s[4])}function em(s){for(;null!==s&&!Kr(s);)s=s[4];return s}function Ta(s,o,a,l,d){if(null!=l){let m,v=!1;Kr(l)?m=l:gr(l)&&(v=!0,l=l[0]);const E=Ln(l);0===s&&null!==a?null==d?Gf(o,a,E):Wo(o,a,E,d||null,!0):1===s&&null!==a?Wo(o,a,E,d||null,!0):2===s?function Kl(s,o,a){const l=ql(s,o);l&&function zf(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=m&&function Ko(s,o,a,l,d){const m=a[7];m!==Ln(a)&&Ta(o,s,l,m,d);for(let E=10;E<a.length;E++){const b=a[E];Yl(b[1],b,s,o,l,m)}}(o,s,m,a,d)}}function zl(s,o,a){return s.createElement(o,a)}function Au(s,o){const a=s[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Nn(d,-1)),a.splice(l,1)}function qo(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Au(d,l),o>0&&(s[a-1][4]=l[4]);const m=ba(s,10+o);!function co(s,o){Yl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=m[19];null!==v&&v.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Aa(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Yl(s,o,a,3,null,null),function Fd(s){let o=s[13];if(!o)return Ld(s[1],s);for(;o;){let a=null;if(gr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)gr(o)&&Ld(o[1],o),o=o[3];null===o&&(o=s),gr(o)&&Ld(o[1],o),a=o&&o[4]}o=a}}(o)}}function Ld(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function nm(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof wl)){const m=a[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=d[m[v]],b=m[v+1];try{b.call(E)}finally{}}else try{m.call(d)}finally{}}}}(s,o),function tm(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let m=0;m<a.length-1;m+=2)if("string"==typeof a[m]){const v=a[m+1],E="function"==typeof v?v(o):Ln(o[v]),b=l[d=a[m+2]],T=a[m+3];"boolean"==typeof T?E.removeEventListener(a[m],b,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),m+=2}else{const v=l[d=a[m+1]];a[m].call(v)}if(null!==l){for(let m=d+1;m<l.length;m++)(0,l[m])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Kr(o[3])){a!==o[3]&&Au(a,o);const l=o[19];null!==l&&l.detachView(s)}!function Md(s){Td.delete(s[20])}(o)}}function gs(s,o,a){return function rm(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===mt.None||d===mt.Emulated)return null}return Ur(l,a)}(s,o.parent,a)}function Wo(s,o,a,l,d){s.insertBefore(o,a,l,d)}function Gf(s,o,a){s.appendChild(o,a)}function im(s,o,a,l,d){null!==l?Wo(s,o,a,l,d):Gf(s,o,a)}function ql(s,o){return s.parentNode(o)}function Ud(s,o,a){return qf(s,o,a)}let Ki,qf=function Bd(s,o,a){return 40&s.type?Ur(s,a):null};function Hn(s,o,a,l){const d=gs(s,l,o),m=o[11],E=Ud(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)im(m,d,a[b],E,!1);else im(m,d,a,E,!1)}function ms(s,o){if(null!==o){const a=o.type;if(3&a)return Ur(o,s);if(4&a)return Wf(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return ms(s,l);{const d=s[o.index];return Kr(d)?Wf(-1,d):Ln(d)}}if(32&a)return jl(o,s)()||Ln(s[o.index]);{const l=$d(s,o);return null!==l?Array.isArray(l)?l[0]:ms(Hl(s[16]),l):ms(s,o.next)}}return null}function $d(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Wf(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return ms(l,d)}return o[7]}function Zl(s,o,a,l,d,m,v){for(;null!=a;){const E=l[a.index],b=a.type;if(v&&0===o&&(E&&Tt(Ln(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)Zl(s,o,a.child,l,d,m,!1),Ta(o,s,d,E,m);else if(32&b){const T=jl(a,l);let R;for(;R=T();)Ta(o,s,d,R,m);Ta(o,s,d,E,m)}else 16&b?om(s,o,l,a,d,m):Ta(o,s,d,E,m);a=v?a.projectionNext:a.next}}function Yl(s,o,a,l,d,m){Zl(a,l,s.firstChild,o,d,m,!1)}function om(s,o,a,l,d,m){const v=a[16],b=v[6].projection[l.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)Ta(o,s,d,b[T],m);else Zl(s,o,b,v[3],d,m,!0)}function um(s,o,a){s.setAttribute(o,"style",a)}function Kf(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function Zf(s){Ki=s}class Qf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function N(s){return s instanceof Qf?s.changingThisBreaksApplicationSecurity:s}const dm=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Pr=(()=>((Pr=Pr||{})[Pr.NONE=0]="NONE",Pr[Pr.HTML=1]="HTML",Pr[Pr.STYLE=2]="STYLE",Pr[Pr.SCRIPT=3]="SCRIPT",Pr[Pr.URL=4]="URL",Pr[Pr.RESOURCE_URL=5]="RESOURCE_URL",Pr))();function nc(s){const o=function rc(){const s=Ce();return s&&s[12]}();return o?o.sanitize(Pr.URL,s)||"":function z(s,o){const a=function ce(s){return s instanceof Qf&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?N(s):function Wd(s){return(s=String(s)).match(dm)?s:"unsafe:"+s}(ye(s))}const Zd=new Zt("ENVIRONMENT_INITIALIZER"),ic=new Zt("INJECTOR",-1),Hw=new Zt("INJECTOR_DEF_TYPES");class Gw{get(o,a=ei){if(a===ei){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}function cC(...s){return{\u0275providers:zw(0,s)}}function zw(s,...o){const a=[],l=new Set;let d;return hi(o,m=>{const v=m;N_(v,a,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&qw(d,a),a}function qw(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];hi(d,m=>{o.push(m)})}}function N_(s,o,a,l){if(!(s=W(s)))return!1;let d=null,m=ui(s);const v=!m&&ie(s);if(m||v){if(v&&!v.standalone)return!1;d=s}else{const b=s.ngModule;if(m=ui(b),!m)return!1;d=b}const E=l.has(d);if(v){if(E)return!1;if(l.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of b)N_(T,o,a,l)}}else{if(!m)return!1;{if(null!=m.imports&&!E){let T;l.add(d);try{hi(m.imports,R=>{N_(R,o,a,l)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&qw(T,o)}if(!E){const T=qi(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:Lt},{provide:Hw,useValue:d,multi:!0},{provide:Zd,useValue:()=>Vn(d),multi:!0})}const b=m.providers;null==b||E||hi(b,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}const dC=ue({provide:String,useValue:ue});function P_(s){return null!==s&&"object"==typeof s&&dC in s}function xa(s){return"function"==typeof s}const rp=new Zt("Set Injector scope."),sc={},hC={};let k_;function gm(){return void 0===k_&&(k_=new Gw),k_}class oc{}class ip extends oc{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,F_(o,v=>this.processProvider(v)),this.records.set(ic,ac(void 0,this)),d.has("environment")&&this.records.set(oc,ac(void 0,this));const m=this.records.get(rp);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Hw.multi,Lt,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=ao(this),l=hr(void 0);try{return o()}finally{ao(a),hr(l)}}get(o,a=ei,l=Qe.Default){this.assertNotDestroyed();const d=ao(this),m=hr(void 0);try{if(!(l&Qe.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function fC(s){return"function"==typeof s||"object"==typeof s&&s instanceof Zt}(o)&&St(o);E=b&&this.injectableDefInScope(b)?ac(mm(o),sc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Qe.Self?gm():this.parent).get(o,a=l&Qe.Optional&&a===ei?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[so]=v[so]||[]).unshift(he(o)),d)throw v;return function x(s,o,a,l){const d=s[so];throw o[Ed]&&d.unshift(o[Ed]),s.message=function F(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):he(E)))}d=`{${m.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(fi,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[so]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{hr(m),ao(d)}}resolveInjectorInitializers(){const o=ao(this),a=hr(void 0);try{const l=this.get(Zd.multi,Lt,Qe.Self);for(const d of l)d()}finally{ao(o),hr(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(he(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=xa(o=W(o))?o:W(o&&o.provide);const l=function ym(s){return P_(s)?ac(void 0,s.useValue):ac(sp(s),sc)}(o);if(xa(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ac(void 0,sc,!0),d.factory=()=>Fl(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===sc&&(a.value=hC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Yw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function mm(s){const o=St(s),a=null!==o?o.factory:qi(s);if(null!==a)return a;if(s instanceof Zt)throw new we(204,!1);if(s instanceof Function)return function Zw(s){const o=s.length;if(o>0)throw wu(o,"?"),new we(204,!1);const a=function Tn(s){const o=s&&(s[ji]||s[Mi]);if(o){const a=function kn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new we(204,!1)}function sp(s,o,a){let l;if(xa(s)){const d=W(s);return qi(d)||mm(d)}if(P_(s))l=()=>W(s.useValue);else if(function Ww(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Fl(s.deps||[]));else if(function O_(s){return!(!s||!s.useExisting)}(s))l=()=>Vn(W(s.useExisting));else{const d=W(s&&(s.useClass||s.provide));if(!function op(s){return!!s.deps}(s))return qi(d)||mm(d);l=()=>new d(...Fl(s.deps))}return l}function ac(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function pC(s){return!!s.\u0275providers}function F_(s,o){for(const a of s)Array.isArray(a)?F_(a,o):pC(a)?F_(a.\u0275providers,o):o(a)}class Qw{}class mC{resolveComponentFactory(o){throw function _m(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ap=(()=>{class s{}return s.NULL=new mC,s})();function yC(){return Yd(Yn(),Ce())}function Yd(s,o){return new up(Ur(s,o))}let up=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=yC,s})();function Xw(s){return s instanceof up?s.nativeElement:s}class L_{}let eE=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function tE(){const s=Ce(),a=jn(Yn().index,s);return(gr(a)?a:s)[11]}(),s})(),nE=(()=>{class s{}return s.\u0275prov=Ye({token:s,providedIn:"root",factory:()=>null}),s})();class V_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const rE=new V_("14.3.0"),U_={};function j_(s){return s.ngOriginalError}class lp{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&j_(o);for(;a&&j_(a);)a=j_(a);return a||null}}function vC(s){return s.ownerDocument.defaultView}function Ra(s){return s instanceof Function?s():s}function cp(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const m=o.length;if(d+m===l||s.charCodeAt(d+m)<=32)return d}a=d+1}}const dE="ng-template";function IC(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==cp(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function hE(s){return 4===s.type&&s.value!==dE}function bC(s,o,a){return o===(4!==s.type||a?s.value:dE)}function fE(s,o,a){let l=4;const d=s.attrs||[],m=function G_(s){for(let o=0;o<s.length;o++)if(Xs(s[o]))return o;return s.length}(d);let v=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!v)if(4&l){if(l=2|1&l,""!==b&&!bC(s,b,a)||""===b&&1===o.length){if(En(l))return!1;v=!0}}else{const T=8&l?b:o[++E];if(8&l&&null!==s.attrs){if(!IC(s.attrs,T,a)){if(En(l))return!1;v=!0}continue}const O=DC(8&l?"class":b,d,hE(s),a);if(-1===O){if(En(l))return!1;v=!0;continue}if(""!==T){let H;H=O>m?"":d[O+1].toLowerCase();const Y=8&l?H:null;if(Y&&-1!==cp(Y,T,0)||2&l&&T!==H){if(En(l))return!1;v=!0}}}}else{if(!v&&!En(l)&&!En(b))return!1;if(v&&En(b))continue;v=!1,l=b|1&l}}return En(l)||v}function En(s){return 0==(1&s)}function DC(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let m=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=m?1:2}return-1}return function CC(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function H_(s,o,a=!1){for(let l=0;l<o.length;l++)if(fE(s,o[l],a))return!0;return!1}function SC(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function z_(s,o){return s?":not("+o.trim()+")":o}function kM(s){let o=s[0],a=1,l=2,d="",m=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const E=s[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!En(v)&&(o+=z_(m,d),d=""),l=v,m=m||!En(l);a++}return""!==d&&(o+=z_(m,d)),o}const $t={};function q_(s){dp(Jt(),Ce(),Mr()+s,!1)}function dp(s,o,a,l){if(!l)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Lo(o,m,a)}else{const m=s.preOrderHooks;null!==m&&_l(o,m,0,a)}Js(a)}function mE(s,o=null,a=null,l){const d=yE(s,o,a,l);return d.resolveInjectorInitializers(),d}function yE(s,o=null,a=null,l,d=new Set){const m=[a||Lt,cC(s)];return l=l||("object"==typeof s?void 0:he(s)),new ip(m,o||gm(),l||null,d)}let xu=(()=>{class s{static create(a,l){if(Array.isArray(a))return mE({name:""},l,a,"");{const d=a.name??"";return mE({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=ei,s.NULL=new Gw,s.\u0275prov=Ye({token:s,providedIn:"any",factory:()=>Vn(ic)}),s.__NG_ELEMENT_ID__=-1,s})();function at(s,o=Qe.Default){const a=Ce();return null===a?Vn(s,o):no(Yn(),a,W(s),o)}function bm(){throw new Error("invalid")}function lc(s,o){return s<<17|o<<2}function Yi(s){return s>>17&32767}function hp(s){return 2|s}function Na(s){return(131068&s)>>2}function Q_(s,o){return-131069&s|o<<2}function ti(s){return 1|s}function xm(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],m=a[l+1];if(-1!==m){const v=s.data[m];Qs(d),v.contentQueries(2,o[m],m)}}}function sh(s,o,a,l,d,m,v,E,b,T,R){const O=o.blueprint.slice();return O[0]=d,O[2]=76|l,(null!==R||s&&1024&s[2])&&(O[2]|=1024),Zs(O),O[3]=O[15]=s,O[8]=a,O[10]=v||s&&s[10],O[11]=E||s&&s[11],O[12]=b||s&&s[12]||null,O[9]=T||s&&s[9]||null,O[6]=m,O[20]=function Ad(){return D_++}(),O[21]=R,O[16]=2==o.type?s[16]:O,O}function fc(s,o,a,l,d){let m=s.data[o];if(null===m)m=function Rm(s,o,a,l,d){const m=Oo(),v=au(),b=s.data[o]=function $C(s,o,a,l,d,m){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==m&&(v?null==m.child&&null!==b.parent&&(m.child=b):null===m.next&&(m.next=b)),b}(s,o,a,l,d),function Ng(){return Mt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=a,m.value=l,m.attrs=d;const v=function fa(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Zr(m,!0),m}function oh(s,o,a,l){if(0===a)return-1;const d=o.length;for(let m=0;m<a;m++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Nm(s,o,a){Ls(o);try{const l=s.viewQuery;null!==l&&jm(1,l,a);const d=s.template;null!==d&&Pm(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xm(s,o),s.staticViewQueries&&jm(2,s.viewQuery,a);const m=s.components;null!==m&&function av(s,o){for(let a=0;a<o.length;a++)Li(s,o[a])}(o,m)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Fo()}}function gp(s,o,a,l){const d=o[2];if(128!=(128&d)){Ls(o);try{Zs(o),function If(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Pm(s,o,a,2,l);const v=3==(3&d);if(v){const T=s.preOrderCheckHooks;null!==T&&Lo(o,T,null)}else{const T=s.preOrderHooks;null!==T&&_l(o,T,0,null),Fg(o,0)}if(function kE(s){for(let o=Tu(s);null!==o;o=$f(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],m=d[3];0==(512&d[2])&&Nn(m,1),d[2]|=512}}}(o),function Um(s){for(let o=Tu(s);null!==o;o=$f(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ca(l)&&gp(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&xm(s,o),v){const T=s.contentCheckHooks;null!==T&&Lo(o,T)}else{const T=s.contentHooks;null!==T&&_l(o,T,1),Fg(o,1)}!function Mm(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Js(~d);else{const m=d,v=a[++l],E=a[++l];od(v,m),E(2,o[m])}}}finally{Js(-1)}}(s,o);const E=s.components;null!==E&&function ov(s,o){for(let a=0;a<o.length;a++)vp(s,o[a])}(o,E);const b=s.viewQuery;if(null!==b&&jm(2,b,l),v){const T=s.viewCheckHooks;null!==T&&Lo(o,T)}else{const T=s.viewHooks;null!==T&&_l(o,T,2),Fg(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Nn(o[3],-1))}finally{Fo()}}}function Pm(s,o,a,l,d){const m=Mr(),v=2&l;try{Js(-1),v&&o.length>22&&dp(s,o,22,!1),a(l,d)}finally{Js(m)}}function lv(s,o,a){!No()||(function pv(s,o,a,l){const d=a.directiveStart,m=a.directiveEnd;s.firstCreatePass||yn(a,o),Tt(l,o);const v=a.initialInputs;for(let E=d;E<m;E++){const b=s.data[E],T=Vr(b);T&&zC(o,a,b);const R=Ni(o,s,E,a);Tt(R,o),null!==v&&qC(0,E-d,R,b,0,v),T&&(jn(a.index,o)[8]=R)}}(s,o,a,Ur(a,o)),128==(128&a.flags)&&function gv(s,o,a){const l=a.directiveStart,d=a.directiveEnd,m=a.index,v=function gl(){return Mt.lFrame.currentDirectiveIndex}();try{Js(m);for(let E=l;E<d;E++){const b=s.data[E],T=o[E];Ys(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&mv(b,T)}}finally{Js(-1),Ys(v)}}(s,o,a))}function mp(s,o,a=Ur){const l=o.localNames;if(null!==l){let d=o.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],E=-1===v?a(o,s):s[v];s[d++]=E}}}function Om(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=yp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function yp(s,o,a,l,d,m,v,E,b,T){const R=22+l,O=R+d,H=function ii(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:$t);return a}(R,O),Y="function"==typeof T?T():T;return H[1]={type:s,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:Y,incompleteFirstPass:!1}}function Fm(s,o,a,l){const d=ch(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&$m(s).push(l,d.length-1))}function RE(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function cv(s,o){const l=o.directiveEnd,d=s.data,m=o.attrs,v=[];let E=null,b=null;for(let T=o.directiveStart;T<l;T++){const R=d[T],O=R.inputs,H=null===m||hE(o)?null:WC(O,m);v.push(H),E=RE(O,T,E),b=RE(R.outputs,T,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=b}function dv(s,o){const a=jn(o,s);16&a[2]||(a[2]|=32)}function Lm(s,o,a,l){let d=!1;if(No()){const m=function GC(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let m=0;m<l.length;m++){const v=l[m];H_(a,v.selectors,!1)&&(d||(d=[]),Bo(yn(a,o),s,v.type),Vr(v)?(ah(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==m){d=!0,yv(a,s.data.length,m.length);for(let R=0;R<m.length;R++){const O=m[R];O.providersResolver&&O.providersResolver(O)}let E=!1,b=!1,T=oh(s,o,m.length,null);for(let R=0;R<m.length;R++){const O=m[R];a.mergedAttrs=eo(a.mergedAttrs,O.hostAttrs),_p(s,a,o,T,O),OE(T,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const H=O.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!b&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),b=!0),T++}cv(s,a)}v&&function PE(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const m=a[o[d+1]];if(null==m)throw new we(-301,!1);l.push(o[d],m)}}}(a,l,v)}return a.mergedAttrs=eo(a.mergedAttrs,a.attrs),d}function NE(s,o,a,l,d,m){const v=m.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function Vm(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,d,v)}}function mv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ah(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function OE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Vr(o)&&(a[""]=s)}}function yv(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function _p(s,o,a,l,d){s.data[l]=d;const m=d.factory||(d.factory=qi(d.type)),v=new wl(m,Vr(d),at);s.blueprint[l]=v,a[l]=v,NE(s,o,0,l,oh(s,a,d.hostVars,$t),d)}function zC(s,o,a){const l=Ur(o,s),d=Om(a),m=s[10],v=ku(s,sh(s,d,null,a.onPush?32:16,l,o,m,m.createRenderer(l,a),null,null,null));s[o.index]=v}function Yo(s,o,a,l,d,m){const v=Ur(s,o);!function Ou(s,o,a,l,d,m,v){if(null==m)s.removeAttribute(o,d,a);else{const E=null==v?ye(m):v(m,l||"",d);s.setAttribute(o,d,E,a)}}(o[11],v,m,s.value,a,l,d)}function qC(s,o,a,l,d,m){const v=m[o];if(null!==v){const E=l.setInput;for(let b=0;b<v.length;){const T=v[b++],R=v[b++],O=v[b++];null!==E?l.setInput(a,O,T,R):a[R]=O}}}function WC(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function _v(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function vp(s,o){const a=jn(o,s);if(ca(a)){const l=a[1];48&a[2]?gp(l,a,l.template,a[8]):a[5]>0&&Bm(a)}}function Bm(s){for(let l=Tu(s);null!==l;l=$f(l))for(let d=10;d<l.length;d++){const m=l[d];if(ca(m))if(512&m[2]){const v=m[1];gp(v,m,v.template,m[8])}else m[5]>0&&Bm(m)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=jn(a[l],s);ca(d)&&d[5]>0&&Bm(d)}}function Li(s,o){const a=jn(o,s),l=a[1];(function FE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Nm(l,a,a[8])}function ku(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function lh(s){for(;s;){s[2]|=32;const o=Hl(s);if(gf(s)&&!o)return s;s=o}return null}function wp(s,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{gp(s,o,s.template,a)}catch(v){throw l&&Gm(o,v),v}finally{d.end&&d.end()}}function jm(s,o,a){Qs(0),o(s,a)}function ch(s){return s[7]||(s[7]=[])}function $m(s){return s.cleanup||(s.cleanup=[])}function Gm(s,o){const a=s[9],l=a?a.get(lp,null):null;l&&l.handleError(o)}function dh(s,o,a,l,d){for(let m=0;m<a.length;){const v=a[m++],E=a[m++],b=o[v],T=s.data[v];null!==T.setInput?T.setInput(b,d,l,E):b[E]=d}}function Ep(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?m=E:1==m?d=de(d,E):2==m&&(l=de(l,E+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function zm(s,o,a,l,d=!1){for(;null!==a;){const m=o[a.index];if(null!==m&&l.push(Ln(m)),Kr(m))for(let E=10;E<m.length;E++){const b=m[E],T=b[1].firstChild;null!==T&&zm(b[1],b,T,l)}const v=a.type;if(8&v)zm(s,o,a.child,l);else if(32&v){const E=jl(a,o);let b;for(;b=E();)l.push(b)}else if(16&v){const E=$d(o,a);if(Array.isArray(E))l.push(...E);else{const b=Hl(o[16]);zm(b[1],b,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class pc{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return zm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Kr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(qo(o,l),ba(a,l))}this._attachedToViewContainer=!1}Aa(this._lView[1],this._lView)}onDestroy(o){Fm(this._lView[1],this._lView,null,o)}markForCheck(){lh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){wp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vw(s,o){Yl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class qm extends pc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;wp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Ip extends ap{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ie(o);return new bp(a,this.ngModule)}}function vv(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class UE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,U_,l);return d!==U_||a===U_?d:this.parentInjector.get(o,a,l)}}class bp extends Qw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function FM(s){return s.map(kM).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return vv(this.componentDef.inputs)}get outputs(){return vv(this.componentDef.outputs)}create(o,a,l,d){let m=(d=d||this.ngModule)instanceof oc?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new UE(o,m):o,E=v.get(L_,null);if(null===E)throw new we(407,!1);const b=v.get(nE,null),T=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=l?function km(s,o,a){return s.selectRootElement(o,a===mt.ShadowDom)}(T,l,this.componentDef.encapsulation):zl(T,R,function VE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),H=this.componentDef.onPush?288:272,Y=yp(0,null,null,1,0,null,null,null,null,null),ge=sh(null,Y,null,H,null,null,E,T,b,v,null);let Fe,$e;Ls(ge);try{const it=function gc(s,o,a,l,d,m){const v=a[1];a[22]=s;const b=fc(v,22,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(Ep(b,T,!0),null!==s&&(hu(d,s,T),null!==b.classes&&Kf(d,s,b.classes),null!==b.styles&&um(d,s,b.styles)));const R=l.createRenderer(s,o),O=sh(a,Om(o),null,o.onPush?32:16,a[22],b,l,R,m||null,null,null);return v.firstCreatePass&&(Bo(yn(b,a),v,o.type),ah(v,b),yv(b,a.length,1)),ku(a,O),a[22]=O}(O,this.componentDef,ge,E,T);if(O)if(l)hu(T,O,["ng-version",rE.full]);else{const{attrs:At,classes:Te}=function TC(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let m=s[l];if("string"==typeof m)2===d?""!==m&&o.push(m,s[++l]):8===d&&a.push(m);else{if(!En(d))break;d=m}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);At&&hu(T,O,At),Te&&Te.length>0&&Kf(T,O,Te.join(" "))}if($e=Ro(Y,22),void 0!==a){const At=$e.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Ft=a[Te];At.push(null!=Ft?Array.from(Ft):null)}}Fe=function wv(s,o,a,l){const d=a[1],m=function fv(s,o,a){const l=Yn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),_p(s,l,o,oh(s,o,1,null),a),cv(s,l));const d=Ni(o,s,l.directiveStart,l);Tt(d,o);const m=Ur(l,o);return m&&Tt(m,o),d}(d,a,o);if(s[8]=a[8]=m,null!==l)for(const E of l)E(m,o);if(o.contentQueries){const E=Yn();o.contentQueries(1,m,E.directiveStart)}const v=Yn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Js(v.index),NE(a[1],v,0,v.directiveStart,v.directiveEnd,o),mv(o,m)),m}(it,this.componentDef,ge,[YC]),Nm(Y,ge,null)}finally{Fo()}return new Wm(this.componentType,Fe,Yd($e,ge),ge,$e)}}class Wm extends class gC{}{constructor(o,a,l,d,m){super(),this.location=l,this._rootLView=d,this._tNode=m,this.instance=a,this.hostView=this.changeDetectorRef=new qm(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const m=this._rootLView;dh(m[1],m,d,o,a),dv(m,this._tNode.index)}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function YC(){const s=Yn();Cf(Ce()[1],s)}function Zm(s){let o=function BE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Vr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=Ev(s.inputs),v.declaredInputs=Ev(s.declaredInputs),v.outputs=Ev(s.outputs);const E=d.hostBindings;E&&Ym(s,E);const b=d.viewQuery,T=d.contentQueries;if(b&&mc(s,b),T&&Oa(s,T),oe(s.inputs,d.inputs),oe(s.declaredInputs,d.declaredInputs),oe(s.outputs,d.outputs),Vr(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(s),E===Zm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function jE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=eo(d.hostAttrs,a=eo(a,d.hostAttrs))}}(l)}function Ev(s){return s===Cr?{}:s===Lt?[]:s}function mc(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Oa(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,m)=>{o(l,d,m),a(l,d,m)}:o}function Ym(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let yc=null;function po(){if(!yc){const s=fn.Symbol;if(s&&s.iterator)yc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(yc=l)}}}return yc}function Cp(s){return!!Iv(s)&&(Array.isArray(s)||!(s instanceof Map)&&po()in s)}function Iv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Qo(s,o,a){return s[o]=a}function Qn(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Fu(s,o,a,l){const d=Qn(s,o,a);return Qn(s,o+1,l)||d}function Lu(s,o,a,l){const d=Ce();return Qn(d,pa(),o)&&(Jt(),Yo(pn(),d,s,o,a,l)),Lu}function mh(s,o,a,l,d,m,v,E){const b=Ce(),T=Jt(),R=s+22,O=T.firstCreatePass?function Mp(s,o,a,l,d,m,v,E,b){const T=o.consts,R=fc(o,s,4,v||null,Ri(T,E));Lm(o,a,R,Ri(T,b)),Cf(o,R);const O=R.tViews=yp(2,R,l,d,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,T,b,o,a,l,d,m,v):T.data[R];Zr(O,!1);const H=b[11].createComment("");Hn(T,b,H,O),Tt(H,b),ku(b,b[R]=_v(H,b,H,O)),sl(O)&&lv(T,b,O),null!=v&&mp(b,O,E)}function Jn(s){return function us(s,o){return s[o]}(function wn(){return Mt.lFrame.contextLView}(),22+s)}function ty(s,o,a){const l=Ce();return Qn(l,pa(),o)&&function _s(s,o,a,l,d,m,v,E){const b=Ur(o,a);let R,T=o.inputs;!E&&null!=T&&(R=T[l])?(dh(s,a,R,l,d),aa(o)&&dv(a,o.index)):3&o.type&&(l=function HC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,m.setProperty(b,l,d))}(Jt(),pn(),l,s,o,l[11],a,!1),ty}function Dv(s,o,a,l,d){const v=d?"class":"style";dh(s,a,o.inputs[v],v,l)}function ny(s,o,a,l){const d=Ce(),m=Jt(),v=22+s,E=d[11],b=d[v]=zl(E,o,function Og(){return Mt.lFrame.currentNamespace}()),T=m.firstCreatePass?function eS(s,o,a,l,d,m,v){const E=o.consts,T=fc(o,s,2,d,Ri(E,m));return Lm(o,a,T,Ri(E,v)),null!==T.attrs&&Ep(T,T.attrs,!1),null!==T.mergedAttrs&&Ep(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,m,d,0,o,a,l):m.data[v];Zr(T,!0);const R=T.mergedAttrs;null!==R&&hu(E,b,R);const O=T.classes;null!==O&&Kf(E,b,O);const H=T.styles;return null!==H&&um(E,b,H),64!=(64&T.flags)&&Hn(m,d,b,T),0===function cl(){return Mt.lFrame.elementDepthCount}()&&Tt(b,d),function su(){Mt.lFrame.elementDepthCount++}(),sl(T)&&(lv(m,d,T),function uv(s,o,a){if(Xa(o)){const d=o.directiveEnd;for(let m=o.directiveStart;m<d;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,a[m],m)}}}(m,T,d)),null!==l&&mp(d,T),ny}function xp(){let s=Yn();au()?ko():(s=s.parent,Zr(s,!1));const o=s;!function dl(){Mt.lFrame.elementDepthCount--}();const a=Jt();return a.firstCreatePass&&(Cf(a,s),Xa(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function di(s){return 0!=(16&s.flags)}(o)&&Dv(a,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Sf(s){return 0!=(32&s.flags)}(o)&&Dv(a,o,Ce(),o.stylesWithoutHost,!1),xp}function ry(s,o,a,l){return ny(s,o,a,l),xp(),ry}function sy(s){return!!s&&"function"==typeof s.then}function oy(s){return!!s&&"function"==typeof s.subscribe}const _h=oy;function ay(s,o,a,l){const d=Ce(),m=Jt(),v=Yn();return function Cv(s,o,a,l,d,m,v,E){const b=sl(l),R=s.firstCreatePass&&$m(s),O=o[8],H=ch(o);let Y=!0;if(3&l.type||E){const $e=Ur(l,o),it=E?E($e):$e,At=H.length,Te=E?gn=>E(Ln(gn[l.index])):l.index;let Ft=null;if(!E&&b&&(Ft=function ly(s,o,a,l){const d=s.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const v=d[m];if(v===a&&d[m+1]===l){const E=o[7],b=d[m+2];return E.length>b?E[b]:null}"string"==typeof v&&(m+=2)}return null}(s,o,d,l.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=m,Ft.__ngLastListenerFn__=m,Y=!1;else{m=YE(l,o,O,m,!1);const gn=a.listen(it,d,m);H.push(m,gn),R&&R.push(d,Te,At,At+1)}}else m=YE(l,o,O,m,!1);const ge=l.outputs;let Fe;if(Y&&null!==ge&&(Fe=ge[d])){const $e=Fe.length;if($e)for(let it=0;it<$e;it+=2){const On=o[Fe[it]][Fe[it+1]].subscribe(m),Ya=H.length;H.push(m,On),R&&R.push(d,l.index,Ya,-(Ya+1))}}}(m,d,d[11],v,s,o,0,l),ay}function Rp(s,o,a,l){try{return!1!==a(l)}catch(d){return Gm(s,d),!1}}function YE(s,o,a,l,d){return function m(v){if(v===Function)return l;lh(2&s.flags?jn(s.index,o):o);let b=Rp(o,0,l,v),T=m.__ngNextListenerFn__;for(;T;)b=Rp(o,0,T,v)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function Sv(s=1){return function Df(s){return(Mt.lFrame.contextLView=function ud(s,o){for(;s>0;)o=o[15],s--;return o}(s,Mt.lFrame.contextLView))[8]}(s)}function Np(s,o){let a=null;const l=function wm(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const m=o[d];if("*"!==m){if(null===l?H_(s,m,!0):SC(l,m))return d}else a=d}return a}function Tv(s){const o=Ce()[16][6];if(!o.projection){const l=o.projection=wu(s?s.length:1,null),d=l.slice();let m=o.child;for(;null!==m;){const v=s?Np(m,s):0;null!==v&&(d[v]?d[v].projectionNext=m:l[v]=m,d[v]=m),m=m.next}}}function Av(s,o=0,a){const l=Ce(),d=Jt(),m=fc(d,22+s,16,null,a||null);null===m.projection&&(m.projection=o),ko(),64!=(64&m.flags)&&function sm(s,o,a){om(o[11],0,o,a,gs(s,a,o),Ud(a.parent||o[6],a,o))}(d,l,m)}function kv(s,o,a,l,d){const m=s[a+1],v=null===o;let E=l?Yi(m):Na(m),b=!1;for(;0!==E&&(!1===b||v);){const R=s[E+1];QE(s[E],o)&&(b=!0,s[E+1]=l?ti(R):hp(R)),E=l?Yi(R):Na(R)}b&&(s[a+1]=l?hp(m):ti(m))}function QE(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Oi(s,o)>=0}function Oe(s,o){return function rt(s,o,a,l){const d=Ce(),m=Jt(),v=function Ii(s){const o=Mt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);m.firstUpdatePass&&function se(s,o,a,l){const d=s.data;if(null===d[a+1]){const m=d[Mr()],v=function ze(s,o){return o>=s.expandoStartIndex}(s,a);(function Gt(s,o){return 0!=(s.flags&(o?16:32))})(m,l)&&null===o&&!v&&(o=!1),o=function xe(s,o,a,l){const d=function ml(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=kp(a=Uv(null,s,o,a,l),o.attrs,l),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Uv(d,s,o,a,l),null===m){let b=function Gr(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Na(l))return s[Yi(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=Uv(null,s,o,b[1],l),b=kp(b,o.attrs,l),function iI(s,o,a,l){s[Yi(a?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else m=function sS(s,o,a){let l;const d=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<d;m++)l=kp(l,s[m].hostAttrs,a);return kp(l,o.attrs,a)}(s,o,l)}return void 0!==m&&(l?o.residualClasses=m:o.residualStyles=m),a}(d,m,o,l),function dy(s,o,a,l,d,m){let v=m?o.classBindings:o.styleBindings,E=Yi(v),b=Na(v);s[l]=a;let R,T=!1;if(Array.isArray(a)){const O=a;R=O[1],(null===R||Oi(O,R)>0)&&(T=!0)}else R=a;if(d)if(0!==b){const H=Yi(s[E+1]);s[l+1]=lc(H,E),0!==H&&(s[H+1]=Q_(s[H+1],l)),s[E+1]=function LC(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=lc(E,0),0!==E&&(s[E+1]=Q_(s[E+1],l)),E=l;else s[l+1]=lc(b,0),0===E?E=l:s[b+1]=Q_(s[b+1],l),b=l;T&&(s[l+1]=hp(s[l+1])),kv(s,R,l,!0),kv(s,R,l,!1),function Es(s,o,a,l,d){const m=d?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Oi(m,o)>=0&&(a[l+1]=ti(a[l+1]))}(o,R,s,l,m),v=lc(E,b),m?o.classBindings=v:o.styleBindings=v}(d,m,o,a,v,l)}}(m,s,v,l),o!==$t&&Qn(d,v,o)&&function aI(s,o,a,l,d,m,v,E){if(!(3&o.type))return;const b=s.data,T=b[E+1];hy(function IE(s){return 1==(1&s)}(T)?aS(b,o,a,d,Na(T),v):void 0)||(hy(m)||function nh(s){return 2==(2&s)}(T)&&(m=aS(b,null,a,d,E,v)),function am(s,o,a,l,d){if(o)d?s.addClass(a,l):s.removeClass(a,l);else{let m=-1===l.indexOf("-")?void 0:ps.DashCase;null==d?s.removeStyle(a,l,m):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),m|=ps.Important),s.setStyle(a,l,d,m))}}(l,v,Ei(Mr(),a),d,m))}(m,m.data[Mr()],d,d[11],s,d[v+1]=function uI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(N(s)))),s}(o,a),l,v)}(s,o,null,!0),Oe}function Uv(s,o,a,l,d){let m=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(m=o[E],l=kp(l,m.hostAttrs,d),m!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function kp(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Br(s,v,!!a||o[++m]))}return void 0===s?null:s}function aS(s,o,a,l,d,m){const v=null===o;let E;for(;d>0;){const b=s[d],T=Array.isArray(b),R=T?b[1]:b,O=null===R;let H=a[d+1];H===$t&&(H=O?Lt:void 0);let Y=O?$o(H,l):R===l?H:void 0;if(T&&!hy(Y)&&(Y=$o(b,l)),hy(Y)&&(E=Y,v))return E;const ge=s[d+1];d=v?Yi(ge):Na(ge)}if(null!==o){let b=m?o.residualClasses:o.residualStyles;null!=b&&(E=$o(b,l))}return E}function hy(s){return void 0!==s}function Ic(s,o=""){const a=Ce(),l=Jt(),d=s+22,m=l.firstCreatePass?fc(l,d,1,o,null):l.data[d],v=a[d]=function Gl(s,o){return s.createText(o)}(a[11],o);Hn(l,a,v,m),Zr(m,!1)}function fy(s){return xn("",s,""),fy}function xn(s,o,a){const l=Ce(),d=function fh(s,o,a,l){return Qn(s,pa(),a)?o+ye(a)+l:$t}(l,s,o,a);return d!==$t&&function vs(s,o,a){const l=Ei(o,s);!function Od(s,o,a){s.setValue(o,a)}(s[11],l,a)}(l,Mr(),d),xn}const wr=void 0;var yI=["en",[["a","p"],["AM","PM"],wr],[["AM","PM"],wr,wr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wr,"{1} 'at' {0}",wr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dS(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Vi={};function bh(s){const o=function pS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=vI(o);if(a)return a;const l=o.split("-")[0];if(a=vI(l),a)return a;if("en"===l)return yI;throw new we(701,!1)}function _I(s){return bh(s)[Pt.PluralCase]}function vI(s){return s in Vi||(Vi[s]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[s]),Vi[s]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const Dh="en-US";let wI=Dh;function Nh(s,o,a,l,d){if(s=W(s),Array.isArray(s))for(let m=0;m<s.length;m++)Nh(s[m],o,a,l,d);else{const m=Jt(),v=Ce();let E=xa(s)?s:W(s.provide),b=sp(s);const T=Yn(),R=1048575&T.providerIndexes,O=T.directiveStart,H=T.providerIndexes>>20;if(xa(s)||!s.multi){const Y=new wl(b,d,at),ge=Cy(E,o,d?R:R+H,O);-1===ge?(Bo(yn(T,v),m,E),Ph(m,s,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Y),v.push(Y)):(a[ge]=Y,v[ge]=Y)}else{const Y=Cy(E,o,R+H,O),ge=Cy(E,o,R,R+H),Fe=Y>=0&&a[Y],$e=ge>=0&&a[ge];if(d&&!$e||!d&&!Fe){Bo(yn(T,v),m,E);const it=function $I(s,o,a,l,d){const m=new wl(s,a,at);return m.multi=[],m.index=o,m.componentProviders=0,s0(m,d,l&&!a),m}(d?jI:ja,a.length,d,l,b);!d&&$e&&(a[ge].providerFactory=it),Ph(m,s,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(it),v.push(it)}else Ph(m,s,Y>-1?Y:ge,s0(a[d?ge:Y],b,!d&&l));!d&&l&&$e&&a[ge].componentProviders++}}}function Ph(s,o,a,l){const d=xa(o),m=function Kw(s){return!!s.useClass}(o);if(d||m){const b=(m?W(o.useClass):o).prototype.ngOnDestroy;if(b){const T=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=T.indexOf(a);-1===R?T.push(a,[l,b]):T[R+1].push(l,b)}else T.push(a,b)}}}function s0(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Cy(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function ja(s,o,a,l){return qu(this.multi,[])}function jI(s,o,a,l){const d=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Ni(a,a[1],this.providerFactory.index,l);m=E.slice(0,v),qu(d,m);for(let b=v;b<E.length;b++)m.push(E[b])}else m=[],qu(d,m);return m}function qu(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Sy(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Gp(s,o,a){const l=Jt();if(l.firstCreatePass){const d=Vr(s);Nh(a,l.data,l.blueprint,d,!0),Nh(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class $a{}class Ty{}function Tc(s,o){return new Ay(s,o??null)}class Ay extends $a{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ip(this);const l=Qt(o);this._bootstrapComponents=Ra(l.bootstrap),this._r3Injector=yE(o,a,[{provide:$a,useValue:this},{provide:ap,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Oh extends Ty{constructor(o){super(),this.moduleType=o}create(o){return new Ay(this.moduleType,o)}}class zp extends $a{constructor(o,a,l){super(),this.componentFactoryResolver=new Ip(this),this.instance=null;const d=new ip([...o,{provide:$a,useValue:this},{provide:ap,useValue:this.componentFactoryResolver}],a||gm(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function My(s,o,a=null){return new zp(s,o,a).injector}let o0=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=zw(0,a.type),d=l.length>0?My([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Ye({token:s,providedIn:"environment",factory:()=>new s(Vn(oc))}),s})();function kh(s){s.getStandaloneInjector=o=>o.get(o0).getOrCreateStandaloneInjector(s)}function u0(s,o,a,l){return function Mc(s,o,a,l,d,m){const v=o+a;return Qn(s,v,d)?Qo(s,v+1,m?l.call(m,d):l(d)):function Vh(s,o){const a=s[o];return a===$t?void 0:a}(s,v+1)}(Ce(),Yr(),s,o,a,l)}function Wu(s,o,a,l,d,m,v,E,b,T){const R=Yr()+s,O=Ce();let H=function ws(s,o,a,l,d,m){const v=Fu(s,o,a,l);return Fu(s,o+2,d,m)||v}(O,R,a,l,d,m);return function Sp(s,o,a,l,d){const m=Fu(s,o,a,l);return Qn(s,o+2,d)||m}(O,R+4,v,E,b)||H?Qo(O,R+7,T?o.call(T,a,l,d,m,v,E,b):o(a,l,d,m,v,E,b)):function ka(s,o){return s[o]}(O,R+7)}function Eo(s){return o=>{setTimeout(s,void 0,o)}}const Io=class jh extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,m=a||(()=>null),v=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),m=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(m=Eo(m),d&&(d=Eo(d)),v&&(v=Eo(v)));const E=super.subscribe({next:d,error:m,complete:v});return o instanceof Q.w0&&o.add(E),E}};function XI(){return this._results[po()]()}class Oy{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=po(),l=Oy.prototype;l[a]||(l[a]=XI)}get changes(){return this._changes||(this._changes=new Io)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=xr(o);(this._changesDetected=!function $g(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],m=o[l];if(a&&(d=a(d),m=a(m)),m!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ea=(()=>{class s{}return s.__NG_ELEMENT_ID__=p0,s})();const h0=ea,f0=class extends h0{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=sh(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),Nm(l,d,o),new pc(d)}};function p0(){return $h(Yn(),Ce())}function $h(s,o){return 4&s.type?new f0(o,s,Yd(s,o)):null}let ky=(()=>{class s{}return s.__NG_ELEMENT_ID__=g0,s})();function g0(){return m0(Yn(),Ce())}const OS=ky,eb=class extends OS{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){const o=gu(this._hostTNode,this._hostLView);if(ya(o)){const a=ls(o,this._hostLView),l=Uo(o);return new Pi(a[1].data[l+8],a)}return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Er(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,m;"number"==typeof l?d=l:null!=l&&(d=l.index,m=l.injector);const v=o.createEmbeddedView(a||{},m);return this.insert(v,d),v}createComponent(o,a,l,d,m){const v=o&&!function Di(s){return"function"==typeof s}(o);let E;if(v)E=a;else{const O=a||{};E=O.index,l=O.injector,d=O.projectableNodes,m=O.environmentInjector||O.ngModuleRef}const b=v?o:new bp(ie(o)),T=l||this.parentInjector;if(!m&&null==b.ngModule){const H=(v?T:this.parentInjector).get(oc,null);H&&(m=H)}const R=b.create(T,d,void 0,m);return this.insert(R.hostView,E),R}insert(o,a){const l=o._lView,d=l[1];if(function da(s){return Kr(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=l[3],H=new eb(O,O[6],O[3]);H.detach(H.indexOf(o))}}const m=this._adjustIndex(a),v=this._lContainer;!function T_(s,o,a,l){const d=10+l,m=a.length;l>0&&(a[d-1][4]=o),l<m-10?(o[4]=a[d],Rf(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function A_(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(d,l,v,m);const E=Wf(m,v),b=l[11],T=ql(b,v[7]);return null!==T&&function Hf(s,o,a,l,d,m){l[0]=d,l[6]=o,Yl(s,l,a,1,d,m)}(d,v[6],b,l,T,E),o.attachToViewContainerRef(),Rf(nn(v),m,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Er(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=qo(this._lContainer,a);l&&(ba(nn(this._lContainer),a),Aa(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=qo(this._lContainer,a);return l&&null!=ba(nn(this._lContainer),a)?new pc(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Er(s){return s[8]}function nn(s){return s[8]||(s[8]=[])}function m0(s,o){let a;const l=o[s.index];if(Kr(l))a=l;else{let d;if(8&s.type)d=Ln(l);else{const m=o[11];d=m.createComment("");const v=Ur(s,o);Wo(m,ql(m,v),d,function Wl(s,o){return s.nextSibling(o)}(m,v),!1)}o[s.index]=a=_v(l,o,d,s),ku(o,a)}return new eb(a,s,o)}class xc{constructor(o){this.queryList=o,this.matches=null}clone(){return new xc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Rc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let m=0;m<l;m++){const v=a.getByIndex(m);d.push(this.queries[v.indexInDeclarationView].clone())}return new Rc(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Hh(o,a).matches&&this.queries[a].setDirty()}}class Kp{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Fy{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,m=this.getByIndex(l).embeddedTView(o,d);m&&(m.indexInDeclarationView=l,null!==a?a.push(m):a=[m])}return null!==a?new Fy(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ly{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Ly(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const m=l[d];this.matchTNodeWithReadOption(o,a,nb(a,m)),this.matchTNodeWithReadOption(o,a,cs(a,o,m,!1,!1))}else l===ea?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,cs(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===up||d===ky||d===ea&&4&a.type)this.addMatch(a.index,-2);else{const m=cs(a,o,d,!1,!1);null!==m&&this.addMatch(a.index,m)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function nb(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function rb(s,o,a,l){return-1===a?function kS(s,o){return 11&s.type?Yd(s,o):4&s.type?$h(s,o):null}(o,s):-2===a?function ib(s,o,a){return a===up?Yd(o,s):a===ea?$h(o,s):a===ky?m0(o,s):void 0}(s,o,l):Ni(s,s[1],a,o)}function sb(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const m=s.data,v=a.matches,E=[];for(let b=0;b<v.length;b+=2){const T=v[b];E.push(T<0?null:rb(o,m[T],v[b+1],a.metadata.read))}d.matches=E}return d.matches}function v0(s,o,a,l){const d=s.queries.getByIndex(a),m=d.matches;if(null!==m){const v=sb(s,o,d,a);for(let E=0;E<m.length;E+=2){const b=m[E];if(b>0)l.push(v[E/2]);else{const T=m[E+1],R=o[-b];for(let O=10;O<R.length;O++){const H=R[O];H[17]===H[3]&&v0(H[1],H,T,l)}if(null!==R[9]){const O=R[9];for(let H=0;H<O.length;H++){const Y=O[H];v0(Y[1],Y,T,l)}}}}}return l}function ob(s){const o=Ce(),a=Jt(),l=Fs();Qs(l+1);const d=Hh(a,l);if(s.dirty&&function iu(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const m=d.crossesNgTemplate?v0(a,o,l,[]):sb(a,o,d,l);s.reset(m,Xw),s.notifyOnChanges()}return!0}return!1}function ab(s,o,a){const l=Jt();l.firstCreatePass&&(Vy(l,new Kp(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),dr(l,Ce(),o)}function Nc(s,o,a,l){const d=Jt();if(d.firstCreatePass){const m=Yn();Vy(d,new Kp(o,a,l),m.index),function ub(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}dr(d,Ce(),a)}function w0(){return function FS(s,o){return s[19].queries[o].queryList}(Ce(),Fs())}function dr(s,o,a){const l=new Oy(4==(4&a));Fm(s,o,l,l.destroy),null===o[19]&&(o[19]=new Rc),o[19].queries.push(new xc(l))}function Vy(s,o,a){null===s.queries&&(s.queries=new Fy),s.queries.track(new Ly(o,a))}function Hh(s,o){return s.queries.getByIndex(o)}function Zh(...s){}const Jp=new Zt("Application Initializer");let $y=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Zh,this.reject=Zh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(sy(m))a.push(m);else if(_h(m)){const v=new Promise((E,b)=>{m.subscribe({complete:E,error:b})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Vn(Jp,8))},s.\u0275prov=Ye({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Hy=new Zt("AppId",{providedIn:"root",factory:function Xp(){return`${Gy()}${Gy()}${Gy()}`}});function Gy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Yh=new Zt("Platform Initializer"),zy=new Zt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qh=new Zt("appBootstrapListener"),Mb=new Zt("AnimationModuleType");let ts=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Ye({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Lc=new Zt("LocaleId",{providedIn:"root",factory:()=>Nt(Lc,Qe.Optional|Qe.SkipSelf)||function xb(){return typeof $localize<"u"&&$localize.locale||Dh}()}),qy=new Zt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Rb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Uc=(()=>{class s{compileModuleSync(a){return new Oh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),m=Ra(Qt(a).declarations).reduce((v,E)=>{const b=ie(E);return b&&v.push(new bp(b)),v},[]);return new Rb(l,m)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Ye({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const YS=(()=>Promise.resolve(0))();function x0(s){typeof Zone>"u"?YS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class bs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Io(!1),this.onMicrotaskEmpty=new Io(!1),this.onStable=new Io(!1),this.onError=new Io(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Wy(){let s=fn.requestAnimationFrame,o=fn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Pb(s){const o=()=>{!function JS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ka(s),s.isCheckStableRunning=!0,Ky(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ka(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,m,v,E)=>{try{return Jh(s),a.invokeTask(d,m,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),R0(s)}},onInvoke:(a,l,d,m,v,E,b)=>{try{return Jh(s),a.invoke(d,m,v,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),R0(s)}},onHasTask:(a,l,d,m)=>{a.hasTask(d,m),l===d&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Ka(s),Ky(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(a,l,d,m)=>(a.handleError(d,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bs.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(bs.isInAngularZone())throw new we(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+d,o,QS,Zh,Zh);try{return m.runTask(v,a,l)}finally{m.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const QS={};function Ky(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ka(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Jh(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function R0(s){s._nesting--,Ky(s)}class Ob{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Io,this.onMicrotaskEmpty=new Io,this.onStable=new Io,this.onError=new Io}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const kb=new Zt(""),N0=new Zt("");let kr,XS=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kr||(function P0(s){kr=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bs.assertNotInAngularZone(),x0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())x0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:m,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Vn(bs),Vn(Fb),Vn(N0))},s.\u0275prov=Ye({token:s,factory:s.\u0275fac}),s})(),Fb=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return kr?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Ye({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Zu=null;const Lb=new Zt("AllowMultipleToken"),O0=new Zt("PlatformDestroyListeners");class eT{constructor(o,a){this.name=o,this.token=a}}function ng(s,o,a=[]){const l=`Platform: ${o}`,d=new Zt(l);return(m=[])=>{let v=L0();if(!v||v.injector.get(Lb,!1)){const E=[...a,...m,{provide:d,useValue:!0}];s?s(E):function Ub(s){if(Zu&&!Zu.get(Lb,!1))throw new we(400,!1);Zu=s;const o=s.get(V0);(function Yy(s){const o=s.get(Yh,null);o&&o.forEach(a=>a())})(s)}(function Jy(s=[],o){return xu.create({name:o,providers:[{provide:rp,useValue:"platform"},{provide:O0,useValue:new Set([()=>Zu=null])},...s]})}(E,l))}return function F0(s){const o=L0();if(!o)throw new we(401,!1);return o}()}}function L0(){return Zu?.get(V0)??null}let V0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function Xy(s,o){let a;return a="noop"===s?new Ob:("zone.js"===s?void 0:s)||new bs(o),a}(l?.ngZone,function U0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),m=[{provide:bs,useValue:d}];return d.run(()=>{const v=xu.create({providers:m,parent:this.injector,name:a.moduleType.name}),E=a.create(v),b=E.injector.get(lp,null);if(!b)throw new we(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:R=>{b.handleError(R)}});E.onDestroy(()=>{rg(this._modules,E),T.unsubscribe()})}),function Bb(s,o,a){try{const l=a();return sy(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const T=E.injector.get($y);return T.runInitializers(),T.donePromise.then(()=>(function EI(s){Pe(s,"Expected localeId to be defined"),"string"==typeof s&&(wI=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Lc,Dh)||Dh),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=B0({},l);return function Vb(s,o,a){const l=new Oh(a);return Promise.resolve(l)}(0,0,a).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(a){const l=a.injector.get(e_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(O0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Vn(xu))},s.\u0275prov=Ye({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function B0(s,o){return Array.isArray(o)?o.reduce(B0,s):{...s,...o}}let e_=(()=>{class s{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new P.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{bs.assertNotInAngularZone(),x0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{bs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});this.isStable=(0,te.T)(m,v.pipe((0,ee.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Qw;if(!this._injector.get($y).done)throw!d&&xt(a),new we(405,false);let v;v=d?a:this._injector.get(ap).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function Zy(s){return s.isBoundToModule}(v)?void 0:this._injector.get($a),T=v.create(xu.NULL,[],l||v.selector,E),R=T.location.nativeElement,O=T.injector.get(kb,null);return O?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),rg(this.components,T),O?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;rg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Qh,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>rg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Vn(bs),Vn(oc),Vn(lp))},s.\u0275prov=Ye({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function rg(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Bc=!0,t_=!1;function n_(){return t_=!0,Bc}function $b(){if(t_)throw new Error("Cannot enable prod mode after platform setup.");Bc=!1}let j0=(()=>{class s{}return s.__NG_ELEMENT_ID__=iT,s})();function iT(s){return function $0(s,o,a){if(aa(s)&&!a){const l=jn(s.index,o);return new pc(l,l)}return 47&s.type?new pc(o[16],o):null}(Yn(),Ce(),16==(16&s))}class Y0{constructor(){}supports(o){return Cp(o)}create(o){return new cT(o)}}const lT=(s,o)=>o;class cT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||lT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,m=null;for(;a||l;){const v=!l||a&&a.currentIndex<qb(l,d,m)?a:l,E=qb(v,d,m),b=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{m||(m=[]);const T=E-d,R=b-d;if(T!=R){for(let H=0;H<T;H++){const Y=H<m.length?m[H]:m[H]=0,ge=Y+H;R<=ge&&ge<T&&(m[H]=Y+1)}m[v.previousIndex]=R-T}}E!==b&&o(v,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Cp(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,m,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)m=o[E],v=this._trackByFn(E,m),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,m,v,E)),Object.is(a.item,m)||this._addIdentityChange(a,m)):(a=this._mismatch(a,m,v,E),l=!0),a=a._next}else d=0,function QC(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[po()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,m,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,m,d)):o=this._addAfter(new dT(a,l),m,d),o}_verifyReinsertion(o,a,l,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?o=this._reinsertAfter(m,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,m=o._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new a_),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new a_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class a_{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new hT,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qb(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Wb{constructor(){}supports(o){return o instanceof Map||Iv(o)}create(){return new sg}}class sg{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Iv(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const m=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,m)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const m=d._prev,v=d._next;return m&&(m._next=v),v&&(v._prev=m),d._next=null,d._prev=null,d}const l=new Q0(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Q0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $c(){return new og([new Y0])}let og=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||$c()),deps:[[s,new Ze,new X]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new we(901,!1)}}return s.\u0275prov=Ye({token:s,providedIn:"root",factory:$c}),s})();function nf(){return new ag([new Wb])}let ag=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||nf()),deps:[[s,new Ze,new X]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new we(901,!1)}}return s.\u0275prov=Ye({token:s,providedIn:"root",factory:nf}),s})();const Yb=ng(null,"core",[]);let fT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Vn(e_))},s.\u0275mod=Wt({type:s}),s.\u0275inj=dt({}),s})();function ew(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(_t,Ae,k)=>{k.d(Ae,{Z:()=>we});var g=k(2090),Q=k(4859),P=k(9681),te=k(1877);class ee{constructor(ye,le){this._delegate=ye,this.firebase=le,(0,P._addComponent)(ye,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ye,le=P._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(ye);return!pt.isInitialized()&&"EXPLICIT"===(null===(Xe=pt.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:le})}_removeServiceInstance(ye,le=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(le)}_addComponent(ye){(0,P._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,P._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function de(){const tt=function he(tt){const ye={},le={__esModule:!0,initializeApp:function Se(Be,U={}){const pe=P.initializeApp(Be,U);if((0,g.r3)(ye,pe.name))return ye[pe.name];const Le=new tt(pe,le);return ye[pe.name]=Le,Le},app:pt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Be){const U=Be.name,pe=U.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const Le=(Je=pt())=>{if("function"!=typeof Je[pe])throw oe.create("invalid-app-argument",{appName:U});return Je[pe]()};void 0!==Be.serviceProps&&(0,g.ZB)(Le,Be.serviceProps),le[pe]=Le,tt.prototype[pe]=function(...Je){return this._getService.bind(this,U).apply(this,Be.multipleInstances?Je:[])}}return"PUBLIC"===Be.type?le[pe]:null},removeApp:function Xe(Be){delete ye[Be]},useAsService:function Ue(Be,U){return"serverAuth"===U?null:U},modularAPIs:P}};function pt(Be){if(!(0,g.r3)(ye,Be=Be||P._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Be});return ye[Be]}return le.default=le,Object.defineProperty(le,"apps",{get:function _e(){return Object.keys(ye).map(Be=>ye[Be])}}),pt.App=tt,le}(ee);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function ye(le){(0,g.ZB)(tt,le)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),tt}(),$=new te.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=j;!function Me(tt){(0,P.registerVersion)("@firebase/app-compat","0.2.7",tt)}()},9681:(_t,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>ui,_DEFAULT_ENTRY_NAME:()=>Pe,_addComponent:()=>on,_addOrOverwriteComponent:()=>Ye,_apps:()=>lt,_clearComponents:()=>br,_components:()=>Bt,_getProvider:()=>dt,_registerComponent:()=>en,_removeServiceInstance:()=>St,deleteApp:()=>Ao,getApp:()=>li,getApps:()=>Mi,initializeApp:()=>ji,onLog:()=>$i,registerVersion:()=>Fr,setLogLevel:()=>hr});var g=k(5861),Q=k(4859),P=k(1877),te=k(2090),ee=k(8766);class ue{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function oe(st){return"VERSION"===st.getComponent()?.type}(nt)){const Ot=nt.getImmediate();return`${Ot.library}/${Ot.version}`}return null}).filter(nt=>nt).join(" ")}}const he="@firebase/app",j=new P.Yd("@firebase/app"),Pe="[DEFAULT]",Ie={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,Bt=new Map;function on(st,De){try{st.container.addComponent(De)}catch(nt){j.debug(`Component ${De.name} failed to register with FirebaseApp ${st.name}`,nt)}}function Ye(st,De){st.container.addOrOverwriteComponent(De)}function en(st){const De=st.name;if(Bt.has(De))return j.debug(`There were multiple attempts to register component ${De}.`),!1;Bt.set(De,st);for(const nt of lt.values())on(nt,st);return!0}function dt(st,De){const nt=st.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),st.container.getProvider(De)}function St(st,De,nt=Pe){dt(st,De).clearInstance(nt)}function br(){Bt.clear()}const Tn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kn{constructor(De,nt,Ot){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Ot,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const ui="9.19.1";function ji(st,De={}){let nt=st;"object"!=typeof De&&(De={name:De});const Ot=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},De),Vt=Ot.name;if("string"!=typeof Vt||!Vt)throw Tn.create("bad-app-name",{appName:String(Vt)});if(nt||(nt=(0,te.aH)()),!nt)throw Tn.create("no-options");const Wt=lt.get(Vt);if(Wt){if((0,te.vZ)(nt,Wt.options)&&(0,te.vZ)(Ot,Wt.config))return Wt;throw Tn.create("duplicate-app",{appName:Vt})}const Lr=new Q.H0(Vt);for(const V of Bt.values())Lr.addComponent(V);const B=new kn(nt,Ot,Lr);return lt.set(Vt,B),B}function li(st=Pe){const De=lt.get(st);if(!De&&st===Pe)return ji();if(!De)throw Tn.create("no-app",{appName:st});return De}function Mi(){return Array.from(lt.values())}function Ao(st){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(st){const De=st.name;lt.has(De)&&(lt.delete(De),yield Promise.all(st.container.getProviders().map(nt=>nt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function Fr(st,De,nt){var Ot;let Vt=null!==(Ot=Ie[st])&&void 0!==Ot?Ot:st;nt&&(Vt+=`-${nt}`);const Wt=Vt.match(/\s|\//),Lr=De.match(/\s|\//);if(Wt||Lr){const B=[`Unable to register library "${Vt}" with version "${De}":`];return Wt&&B.push(`library name "${Vt}" contains illegal characters (whitespace or "/")`),Wt&&Lr&&B.push("and"),Lr&&B.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void j.warn(B.join(" "))}en(new Q.wA(`${Vt}-version`,()=>({library:Vt,version:De}),"VERSION"))}function $i(st,De){if(null!==st&&"function"!=typeof st)throw Tn.create("invalid-log-argument");(0,P.Am)(st,De)}function hr(st){(0,P.Ub)(st)}const Fn="firebase-heartbeat-store";let rr=null;function vn(){return rr||(rr=(0,ee.X3)("firebase-heartbeat-database",1,{upgrade:(st,De)=>{0===De&&st.createObjectStore(Fn)}}).catch(st=>{throw Tn.create("idb-open",{originalErrorMessage:st.message})})),rr}function mt(){return(mt=(0,g.Z)(function*(st){try{return(yield vn()).transaction(Fn).objectStore(Fn).get(Dr(st))}catch(De){if(De instanceof te.ZR)j.warn(De.message);else{const nt=Tn.create("idb-get",{originalErrorMessage:De?.message});j.warn(nt.message)}}})).apply(this,arguments)}function fn(st,De){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(st,De){try{const Ot=(yield vn()).transaction(Fn,"readwrite");return yield Ot.objectStore(Fn).put(De,Dr(st)),Ot.done}catch(nt){if(nt instanceof te.ZR)j.warn(nt.message);else{const Ot=Tn.create("idb-set",{originalErrorMessage:nt?.message});j.warn(Ot.message)}}})).apply(this,arguments)}function Dr(st){return`${st.name}!${st.options.appId}`}class As{constructor(De){this.container=De,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new un(nt),this._heartbeatsCachePromise=this._storage.read().then(Ot=>(this._heartbeatsCache=Ot,Ot))}triggerHeartbeat(){var De=this;return(0,g.Z)(function*(){const Ot=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Vt=an();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Vt&&!De._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Vt))return De._heartbeatsCache.heartbeats.push({date:Vt,agent:Ot}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Wt=>{const Lr=new Date(Wt.date).valueOf();return Date.now()-Lr<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,g.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const nt=an(),{heartbeatsToSend:Ot,unsentEntries:Vt}=function Gi(st,De=1024){const nt=[];let Ot=st.slice();for(const Vt of st){const Wt=nt.find(Lr=>Lr.agent===Vt.agent);if(Wt){if(Wt.dates.push(Vt.date),fr(nt)>De){Wt.dates.pop();break}}else if(nt.push({agent:Vt.agent,dates:[Vt.date]}),fr(nt)>De){nt.pop();break}Ot=Ot.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Ot}}(De._heartbeatsCache.heartbeats),Wt=(0,te.L)(JSON.stringify({version:2,heartbeats:Ot}));return De._heartbeatsCache.lastSentHeartbeatDate=nt,Vt.length>0?(De._heartbeatsCache.heartbeats=Vt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Wt})()}}function an(){return(new Date).toISOString().substring(0,10)}class un{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,g.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function wt(st){return mt.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var nt=this;return(0,g.Z)(function*(){var Ot;if(yield nt._canUseIndexedDBPromise){const Wt=yield nt.read();return fn(nt.app,{lastSentHeartbeatDate:null!==(Ot=De.lastSentHeartbeatDate)&&void 0!==Ot?Ot:Wt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var nt=this;return(0,g.Z)(function*(){var Ot;if(yield nt._canUseIndexedDBPromise){const Wt=yield nt.read();return fn(nt.app,{lastSentHeartbeatDate:null!==(Ot=De.lastSentHeartbeatDate)&&void 0!==Ot?Ot:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...De.heartbeats]})}})()}}function fr(st){return(0,te.L)(JSON.stringify({version:2,heartbeats:st})).length}!function Wr(st){en(new Q.wA("platform-logger",De=>new ue(De),"PRIVATE")),en(new Q.wA("heartbeat",De=>new As(De),"PRIVATE")),Fr(he,"0.9.7",st),Fr(he,"0.9.7","esm2017"),Fr("fire-js","")}("")},4859:(_t,Ae,k)=>{k.d(Ae,{H0:()=>he,wA:()=>P});var g=k(5861),Q=k(2090);class P{constructor(j,$,W){this.name=j,this.instanceFactory=$,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const te="[DEFAULT]";class ee{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const W=new Q.BH;if(this.instancesDeferred.set($,W),this.isInitialized($)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:$});je&&W.resolve(je)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const W=this.normalizeInstanceIdentifier(j?.identifier),je=null!==($=j?.optional)&&void 0!==$&&$;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Me){if(je)return null;throw Me}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function oe(de){return"EAGER"===de.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[$,W]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:je});W.resolve(Me)}catch{}}}}clearInstance(j=te){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...$.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=te){return this.instances.has(j)}getOptions(j=te){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,W=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:W,options:$});for(const[Me,we]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Me)&&we.resolve(je);return je}onInit(j,$){var W;const je=this.normalizeInstanceIdentifier($),Me=null!==(W=this.onInitCallbacks.get(je))&&void 0!==W?W:new Set;Me.add(j),this.onInitCallbacks.set(je,Me);const we=this.instances.get(je);return we&&j(we,je),()=>{Me.delete(j)}}invokeOnInitCallbacks(j,$){const W=this.onInitCallbacks.get($);if(W)for(const je of W)try{je(j,$)}catch{}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let W=this.instances.get(j);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(de=j,de===te?void 0:de),options:$}),this.instances.set(j,W),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(W,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,W)}catch{}var de;return W||null}normalizeInstanceIdentifier(j=te){return this.component?this.component.multipleInstances?j:te:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new ee(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Ae,k)=>{k.d(Ae,{Am:()=>de,Ub:()=>he,Yd:()=>oe,in:()=>Q});const g=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},te=Q.INFO,ee={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ue=(j,$,...W)=>{if($<j.logLevel)return;const je=(new Date).toISOString(),Me=ee[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${je}]  ${j.name}:`,...W)};class oe{constructor($){this.name=$,this._logLevel=te,this._logHandler=ue,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Q))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...$),this._logHandler(this,Q.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...$),this._logHandler(this,Q.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...$),this._logHandler(this,Q.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...$),this._logHandler(this,Q.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...$),this._logHandler(this,Q.ERROR,...$)}}function he(j){g.forEach($=>{$.setLogLevel(j)})}function de(j,$){for(const W of g){let je=null;$&&$.level&&(je=P[$.level]),W.userLogHandler=null===j?null:(Me,we,...tt)=>{const ye=tt.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch{return null}}).filter(le=>le).join(" ");we>=(je??Me.logLevel)&&j({level:Q[we].toLowerCase(),message:ye,args:tt,type:Me.name})}}}},259:(_t,Ae,k)=>{k.d(Ae,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.19.1","app")},9260:(_t,Ae,k)=>{k.d(Ae,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(_t,Ae,k)=>{k.r(Ae);var g=k(5861),Q=k(3942),P=k(2090),te=k(9681),ee=k(1877),ue=k(655),oe=k(4859);const we=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new ee.Yd("@firebase/auth");function pt(_,...h){Xe.logLevel<=ee.in.ERROR&&Xe.error(`Auth (${te.SDK_VERSION}): ${_}`,...h)}function Se(_,...h){throw Be(_,...h)}function _e(_,...h){return Be(_,...h)}function Ee(_,h,p){const w=Object.assign(Object.assign({},tt()),{[h]:p});return new P.LL("auth","Firebase",w).create(h,{appName:_.name})}function Ue(_,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Se(_,"argument-error"),Ee(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(_,...h){if("string"!=typeof _){const p=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(p,...w)}return ye.create(_,...h)}function U(_,h,...p){if(!_)throw Be(h,...p)}function pe(_){const h="INTERNAL ASSERTION FAILED: "+_;throw pt(h),new Error(h)}function Le(_,h){_||pe(h)}const Je=new Map;function gt(_){Le(_ instanceof Function,"Expected a class definition");let h=Je.get(_);return h?(Le(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,Je.set(_,h),h)}function fe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ve(){return"http:"===Re()||"https:"===Re()}function Re(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class lt{constructor(h,p){this.shortDelay=h,this.longDelay=p,Le(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Pe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ve()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bt(_,h){Le(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class on{static initialize(h,p,w){this.fetchImpl=h,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new lt(3e4,6e4);function dt(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function St(_,h,p,w){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(_,h,p,w,A={}){return Cn(_,A,(0,g.Z)(function*(){let N={},z={};w&&("GET"===h?z=w:N={body:JSON.stringify(w)});const ce=(0,P.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ve=yield _._getAdditionalHeaders();return Ve["Content-Type"]="application/json",_.languageCode&&(Ve["X-Firebase-Locale"]=_.languageCode),on.fetch()(ji(_,_.config.apiHost,p,ce),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Cn(_,h,p){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(_,h,p){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ye),h);try{const A=new li(_),N=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw Mi(_,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const ce=N.ok?z.errorMessage:z.error.message,[Ve,et]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Mi(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ve)throw Mi(_,"email-already-in-use",z);if("USER_DISABLED"===Ve)throw Mi(_,"user-disabled",z);const Rt=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Ee(_,Rt,et);Se(_,Rt)}}catch(A){if(A instanceof P.ZR)throw A;Se(_,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function kn(_,h,p,w){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(_,h,p,w,A={}){const N=yield St(_,h,p,w,A);return"mfaPendingCredential"in N&&Se(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ji(_,h,p,w){const A=`${h}${p}?${w}`;return _.config.emulator?Bt(_.config,A):`${_.config.apiScheme}://${A}`}class li{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mi(_,h,p){const w={appName:_.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const A=_e(_,h,w);return A.customData._tokenResponse=p,A}function Qe(){return(Qe=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Fr(_,h){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function hr(_,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Hi(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function vn(){return(vn=(0,g.Z)(function*(_,h=!1){const p=(0,P.m9)(_),w=yield p.getIdToken(h),A=mt(w);U(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,z=N?.sign_in_provider;return{claims:A,token:w,authTime:Hi(wt(A.auth_time)),issuedAtTime:Hi(wt(A.iat)),expirationTime:Hi(wt(A.exp)),signInProvider:z||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(_){return 1e3*Number(_)}function mt(_){const[h,p,w]=_.split(".");if(void 0===h||void 0===p||void 0===w)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,P.tV)(p);return A?JSON.parse(A):(pt("Failed to decode base64 JWT payload"),null)}catch(A){return pt("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Wn(_,h){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(_,h,p=!1){if(p)return h;try{return yield h}catch(w){throw w instanceof P.ZR&&Cr(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Cr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Lt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class As{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hi(this.lastLoginAt),this.creationTime=Hi(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(_){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,g.Z)(function*(_){var h;const p=_.auth,w=yield _.getIdToken(),A=yield Wn(_,hr(p,{idToken:w}));U(A?.users.length,p,"internal-error");const N=A.users[0];_._notifyReloadListener(N);const z=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?st(N.providerUserInfo):[],ce=Wr(_.providerData,z),Rt=!!_.isAnonymous&&!(_.email&&N.passwordHash||ce?.length),Dt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ce,metadata:new As(N.createdAt,N.lastLoginAt),isAnonymous:Rt};Object.assign(_,Dt)})).apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(_){const h=(0,P.m9)(_);yield an(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Wr(_,h){return[..._.filter(w=>!h.some(A=>A.providerId===w.providerId)),...h]}function st(_){return _.map(h=>{var{providerId:p}=h,w=(0,ue._T)(h,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function nt(){return(nt=(0,g.Z)(function*(_,h){const p=yield Cn(_,{},(0,g.Z)(function*(){const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:N}=_.config,z=ji(_,A,"/v1/token",`key=${N}`),ce=yield _._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(z,{method:"POST",headers:ce,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function fn(_){const h=mt(_);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var w=this;return(0,g.Z)(function*(){return U(!w.accessToken||w.refreshToken,h,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var w=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:z}=yield function De(_,h){return nt.apply(this,arguments)}(h,p);w.updateTokensAndExpiration(A,N,Number(z))})()}updateTokensAndExpiration(h,p,w){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,p){const{refreshToken:w,accessToken:A,expirationTime:N}=p,z=new Ot;return w&&(U("string"==typeof w,"internal-error",{appName:h}),z.refreshToken=w),A&&(U("string"==typeof A,"internal-error",{appName:h}),z.accessToken=A),N&&(U("number"==typeof N,"internal-error",{appName:h}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ot,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Vt(_,h){U("string"==typeof _||typeof _>"u","internal-error",{appName:h})}class Wt{constructor(h){var{uid:p,auth:w,stsTokenManager:A}=h,N=(0,ue._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new As(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const w=yield Wn(p,p.stsTokenManager.getToken(p.auth,h));return U(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(h){return function rr(_){return vn.apply(this,arguments)}(this,h)}reload(){return function un(_){return fr.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new Wt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var w=this;return(0,g.Z)(function*(){let A=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield an(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield Wn(h,function Ao(_,h){return Qe.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var w,A,N,z,ce,Ve,et,Rt;const Dt=null!==(w=p.displayName)&&void 0!==w?w:void 0,vr=null!==(A=p.email)&&void 0!==A?A:void 0,Zi=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Zo=null!==(z=p.photoURL)&&void 0!==z?z:void 0,ec=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,tc=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,dm=null!==(et=p.createdAt)&&void 0!==et?et:void 0,Wd=null!==(Rt=p.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:Fi,emailVerified:Ma,isAnonymous:hm,providerData:Jf,stsTokenManager:fm}=p;U(Fi&&fm,h,"internal-error");const eC=Ot.fromJSON(this.name,fm);U("string"==typeof Fi,h,"internal-error"),Vt(Dt,h.name),Vt(vr,h.name),U("boolean"==typeof Ma,h,"internal-error"),U("boolean"==typeof hm,h,"internal-error"),Vt(Zi,h.name),Vt(Zo,h.name),Vt(ec,h.name),Vt(tc,h.name),Vt(dm,h.name),Vt(Wd,h.name);const Kd=new Wt({uid:Fi,auth:h,email:vr,emailVerified:Ma,displayName:Dt,isAnonymous:hm,photoURL:Zo,phoneNumber:Zi,tenantId:ec,stsTokenManager:eC,createdAt:dm,lastLoginAt:Wd});return Jf&&Array.isArray(Jf)&&(Kd.providerData=Jf.map(Uw=>Object.assign({},Uw))),tc&&(Kd._redirectEventId=tc),Kd}static _fromIdTokenResponse(h,p,w=!1){return(0,g.Z)(function*(){const A=new Ot;A.updateFromServerResponse(p);const N=new Wt({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:w});return yield an(N),N})()}}const B=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var A=this;return(0,g.Z)(function*(){A.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const A=w.storage[p];return void 0===A?null:A})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return _.type="NONE",_})();function V(_,h,p){return`firebase:${_}:${h}:${p}`}class q{constructor(h,p,w){this.persistence=h,this.auth=p,this.userKey=w;const{config:A,name:N}=this.auth;this.fullUserKey=V(this.userKey,A.apiKey,N),this.fullPersistenceKey=V("persistence",A.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Wt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new q(gt(B),h,w);const A=(yield Promise.all(p.map(function(){var et=(0,g.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return et.apply(this,arguments)}}()))).filter(et=>et);let N=A[0]||gt(B);const z=V(w,h.config.apiKey,h.name);let ce=null;for(const et of p)try{const Rt=yield et._get(z);if(Rt){const Dt=Wt._fromJSON(h,Rt);et!==N&&(ce=Dt),N=et;break}}catch{}const Ve=A.filter(et=>et._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],ce&&(yield N._set(z,ce.toJSON())),yield Promise.all(p.map(function(){var et=(0,g.Z)(function*(Rt){if(Rt!==N)try{yield Rt._remove(z)}catch{}});return function(Rt){return et.apply(this,arguments)}}())),new q(N,h,w)):new q(N,h,w)})()}}function ie(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Qt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(J(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ke(h))return"Blackberry";if(ht(h))return"Webos";if(He(h))return"Safari";if((h.includes("chrome/")||xt(h))&&!h.includes("edge/"))return"Chrome";if(rn(h))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function J(_=(0,P.z$)()){return/firefox\//i.test(_)}function He(_=(0,P.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function xt(_=(0,P.z$)()){return/crios\//i.test(_)}function Qt(_=(0,P.z$)()){return/iemobile/i.test(_)}function rn(_=(0,P.z$)()){return/android/i.test(_)}function ke(_=(0,P.z$)()){return/blackberry/i.test(_)}function ht(_=(0,P.z$)()){return/webos/i.test(_)}function ft(_=(0,P.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function zs(_=(0,P.z$)()){return ft(_)||rn(_)||ht(_)||ke(_)||/windows phone/i.test(_)||Qt(_)}function Ms(_,h=[]){let p;switch(_){case"Browser":p=ie((0,P.z$)());break;case"Worker":p=`${ie((0,P.z$)())}-${_}`;break;default:p=_}const w=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${te.SDK_VERSION}/${w}`}class Mo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const w=N=>new Promise((z,ce)=>{try{z(h(N))}catch(Ve){ce(Ve)}});w.onAbort=p,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const w=[];try{for(const A of p.queue)yield A(h),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const N of w)try{N()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class zt{constructor(h,p,w){this.app=h,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new Mo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(h,p){var w=this;return p&&(this._popupRedirectResolver=gt(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,N;if(!w._deleted&&(w.persistenceManager=yield q.create(w,h),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var w;const A=yield p.assertedPersistence.getCurrentUser();let N=A,z=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Ve=N?._redirectEventId,et=yield p.tryRedirectSignIn(h);(!ce||ce===Ve)&&et?.user&&(N=et.user,z=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(z)try{yield p.beforeStateQueue.runMiddleware(N)}catch(ce){N=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield an(h)}catch(w){if("auth/network-request-failed"!==w?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ie(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const w=h?(0,P.m9)(h):null;return w&&U(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(h,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return h&&U(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(gt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,w){return this.registerStateListener(this.authStateSubscription,h,p,w)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,w){return this.registerStateListener(this.idTokenSubscription,h,p,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var w=this;return(0,g.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=h&&gt(h)||p._popupRedirectResolver;U(w,p,"argument-error"),p.redirectPersistenceManager=yield q.create(p,[gt(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var w,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,w,A){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,w,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ms(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function An(_){return(0,P.m9)(_)}class qs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zi(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function xs(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class Tr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,p){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Zn(_,h){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:resetPassword",dt(_,h))})).apply(this,arguments)}function dn(_,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function rl(_,h){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:update",dt(_,h))})).apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithPassword",dt(_,h))})).apply(this,arguments)}function Ps(_,h){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:sendOobCode",dt(_,h))})).apply(this,arguments)}function pr(_,h){return il.apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(_,h){return Ps(_,h)})).apply(this,arguments)}function gr(_,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(_,h){return Ps(_,h)})).apply(this,arguments)}function Xa(_,h){return aa.apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(_,h){return Ps(_,h)})).apply(this,arguments)}function sl(_,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(_,h){return Ps(_,h)})).apply(this,arguments)}function Yc(){return(Yc=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithEmailLink",dt(_,h))})).apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithEmailLink",dt(_,h))})).apply(this,arguments)}class al extends Tr{constructor(h,p,w,A=null){super("password",w),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new al(h,p,"password")}static _fromEmailAndCode(h,p,w=null){return new al(h,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function oa(_,h){return Ns.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function gf(_,h){return Yc.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Se(h,"internal-error")}})()}_linkToIdToken(h,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return dn(h,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Qc(_,h){return ol.apply(this,arguments)}(h,{idToken:p,email:w._email,oobCode:w._password});default:Se(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ir(_,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithIdp",dt(_,h))})).apply(this,arguments)}class is extends Tr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new is(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Se("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A}=p,N=(0,ue._T)(p,["providerId","signInMethod"]);if(!w||!A)return null;const z=new is(w,A);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(h){return ir(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,ir(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ir(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Ag(_,h){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:sendVerificationCode",dt(_,h))})).apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithPhoneNumber",dt(_,h))})).apply(this,arguments)}function ed(){return(ed=(0,g.Z)(function*(_,h){const p=yield kn(_,"POST","/v1/accounts:signInWithPhoneNumber",dt(_,h));if(p.temporaryProof)throw Mi(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const xg={USER_NOT_FOUND:"user-not-found"};function td(){return(td=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithPhoneNumber",dt(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),xg)})).apply(this,arguments)}class ks extends Tr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ks({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ks({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function ul(_,h){return Os.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Mg(_,h){return ed.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Rg(_,h){return td.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:w,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:w,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:w,phoneNumber:A,temporaryProof:N}=h;return w||p||A||N?new ks({verificationId:p,verificationCode:w,phoneNumber:A,temporaryProof:N}):null}}class eu{constructor(h){var p,w,A,N,z,ce;const Ve=(0,P.zd)((0,P.pd)(h)),et=null!==(p=Ve.apiKey)&&void 0!==p?p:null,Rt=null!==(w=Ve.oobCode)&&void 0!==w?w:null,Dt=function nd(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ve.mode)&&void 0!==A?A:null);U(et&&Rt&&Dt,"argument-error"),this.apiKey=et,this.operation=Dt,this.code=Rt,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Ve.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ce=Ve.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function rd(_){const h=(0,P.zd)((0,P.pd)(_)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(_)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||p||h||_}(h);try{return new eu(p)}catch{return null}}}let qi=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,w){return al._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const A=eu.parseLink(w);return U(A,"argument-error"),al._fromEmailAndCode(p,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ss{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class os extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ks extends os{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return U("providerId"in p&&"signInMethod"in p,"argument-error"),is._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ks.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ks.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:N,nonce:z,providerId:ce}=h;if(!w&&!A&&!p&&!N||!ce)return null;try{return new Ks(ce)._credential({idToken:p,accessToken:w,nonce:z,pendingToken:N})}catch{return null}}}let ua=(()=>{class _ extends os{constructor(){super("facebook.com")}static credential(p){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),tu=(()=>{class _ extends os{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:A}=p;if(!w&&!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),ll=(()=>{class _ extends os{constructor(){super("github.com")}static credential(p){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class la extends Tr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return ir(h,this.buildRequest())}_linkToIdToken(h,p){const w=this.buildRequest();return w.idToken=p,ir(h,w)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ir(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A,pendingToken:N}=p;return w&&A&&N&&w===A?new la(w,N):null}static _create(h,p){return new la(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wi extends ss{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return wi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return wi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=la.fromJSON(h);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:w}=h;if(!p||!w)return null;try{return la._create(w,p)}catch{return null}}}let ci=(()=>{class _ extends os{constructor(){super("twitter.com")}static credential(p,w){return is._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=p;if(!w||!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function xo(_,h){return id.apply(this,arguments)}function id(){return(id=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signUp",dt(_,h))})).apply(this,arguments)}class Ar{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,w,A=!1){return(0,g.Z)(function*(){const N=yield Wt._fromIdTokenResponse(h,w,A),z=_f(w);return new Ar({user:N,providerId:z,_tokenResponse:w,operationType:p})})()}static _forOperation(h,p,w){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const A=_f(w);return new Ar({user:h,providerId:A,_tokenResponse:w,operationType:p})})()}}function _f(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Ln(){return(Ln=(0,g.Z)(function*(_){var h;const p=An(_);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Ar({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield xo(p,{returnSecureToken:!0}),A=yield Ar._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class nu extends P.ZR{constructor(h,p,w,A){var N;super(p.code,p.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,nu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,p,w,A){return new nu(h,p,w,A)}}function wf(_,h,p,w){return("reauthenticate"===h?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?nu._fromErrorAndOperation(_,N,h,w):N})}function Ei(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function ru(){return(ru=(0,g.Z)(function*(_,h){const p=(0,P.m9)(_);yield jn(!0,p,h);const{providerUserInfo:w}=yield Fr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=Ei(w||[]);return p.providerData=p.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ro(_,h){return us.apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(_,h,p=!1){const w=yield Wn(_,h._linkToIdToken(_.auth,yield _.getIdToken()),p);return Ar._forOperation(_,"link",w)})).apply(this,arguments)}function jn(_,h,p){return iu.apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(_,h,p){yield an(h);const A=!1===_?"provider-already-linked":"no-such-provider";U(Ei(h.providerData).has(p)===_,h.auth,A)})).apply(this,arguments)}function ca(_,h){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(_,h,p=!1){const{auth:w}=_,A="reauthenticate";try{const N=yield Wn(_,wf(w,A,h,_),p);U(N.idToken,w,"internal-error");const z=mt(N.idToken);U(z,w,"internal-error");const{sub:ce}=z;return U(_.uid===ce,w,"user-mismatch"),Ar._forOperation(_,A,N)}catch(N){throw"auth/user-not-found"===N?.code&&Se(w,"user-mismatch"),N}})).apply(this,arguments)}function Ri(_,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(_,h,p=!1){const w="signIn",A=yield wf(_,w,h),N=yield Ar._fromIdTokenResponse(_,w,A);return p||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Nn(_,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(_,h){return Ri(An(_),h)})).apply(this,arguments)}function ha(_,h){return sd.apply(this,arguments)}function sd(){return(sd=(0,g.Z)(function*(_,h){const p=(0,P.m9)(_);return yield jn(!1,p,h.providerId),Ro(p,h)})).apply(this,arguments)}function cl(_,h){return su.apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(_,h){return ca((0,P.m9)(_),h)})).apply(this,arguments)}function dl(_,h){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(_,h){return kn(_,"POST","/v1/accounts:signInWithCustomToken",dt(_,h))})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(_,h){const p=An(_),w=yield dl(p,{token:h,returnSecureToken:!0}),A=yield Ar._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ce{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Jt._fromServerResponse(h,p):"totpInfo"in p?fl._fromServerResponse(h,p):Se(h,"internal-error")}}class Jt extends Ce{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Jt(p)}}class fl extends Ce{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new fl(p)}}function Po(_,h,p){var w;U((null===(w=p.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),U(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Oo(){return(Oo=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_),A={requestType:"PASSWORD_RESET",email:h};p&&Po(w,A,p),yield gr(w,A)})).apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(_,h,p){yield Zn((0,P.m9)(_),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ko(){return(ko=(0,g.Z)(function*(_,h){yield rl((0,P.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ef(_,h){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(_,h){const p=(0,P.m9)(_),w=yield Zn(p,{oobCode:h}),A=w.requestType;switch(U(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,p,"internal-error");default:U(w.email,p,"internal-error")}let N=null;return w.mfaInfo&&(N=Ce._fromServerResponse(An(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function uu(){return(uu=(0,g.Z)(function*(_,h){const{data:p}=yield Ef((0,P.m9)(_),h);return p.email})).apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(_,h,p){const w=An(_),A=yield xo(w,{returnSecureToken:!0,email:h,password:p}),N=yield Ar._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_),A={requestType:"EMAIL_SIGNIN",email:h};U(p.handleCodeInApp,w,"argument-error"),p&&Po(w,A,p),yield Xa(w,A)})).apply(this,arguments)}function od(){return(od=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_),A=qi.credentialWithLink(h,p||fe());return U(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Nn(w,A)})).apply(this,arguments)}function gl(_,h){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:createAuthUri",dt(_,h))})).apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(_,h){const w={identifier:h,continueUri:ve()?fe():"http://localhost"},{signinMethods:A}=yield gl((0,P.m9)(_),w);return A||[]})).apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(_,h){const p=(0,P.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Po(p.auth,A,h);const{email:N}=yield pr(p.auth,A);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};p&&Po(w.auth,N,p);const{email:z}=yield sl(w.auth,N);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function yl(_,h){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(_,h){return St(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(_,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const w=(0,P.m9)(_),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},z=yield Wn(w,yl(w.auth,N));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const ce=w.providerData.find(({providerId:Ve})=>"password"===Ve);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function ud(_,h,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(_,h,p){const{auth:w}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const z=yield Wn(_,dn(w,N));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class pn{constructor(h,p,w={}){this.isNewUser=h,this.providerId=p,this.profile=w}}class ld extends pn{constructor(h,p,w,A){super(h,p,w),this.username=A}}class cd extends pn{constructor(h,p){super(h,"facebook.com",p)}}class Pg extends ld{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class dd extends pn{constructor(h,p){super(h,"google.com",p)}}class Og extends ld{constructor(h,p,w){super(h,"twitter.com",p,w)}}function kg(_){const{user:h,_tokenResponse:p}=_;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Js(_){var h,p;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const z=null===(p=null===(h=mt(_.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new pn(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new cd(N,A);case"github.com":return new Pg(N,A);case"google.com":return new dd(N,A);case"twitter.com":return new Og(N,A,_.screenName||null);case"custom":case"anonymous":return new pn(N,null);default:return new pn(N,w,A)}}(p)}class Vs{constructor(h,p,w){this.type=h,this.credential=p,this.auth=w}static _fromIdtoken(h,p){return new Vs("enroll",h,p)}static _fromMfaPendingCredential(h){return new Vs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,w;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Vs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return Vs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Mn{constructor(h,p,w){this.session=h,this.hints=p,this.signInResolver=w}static _fromError(h,p){const w=An(h),A=p.customData._serverResponse,N=(A.mfaInfo||[]).map(ce=>Ce._fromServerResponse(w,ce));U(A.mfaPendingCredential,w,"internal-error");const z=Vs._fromMfaPendingCredential(A.mfaPendingCredential);return new Mn(z,N,function(){var ce=(0,g.Z)(function*(Ve){const et=yield Ve._process(w,z);delete A.mfaInfo,delete A.mfaPendingCredential;const Rt=Object.assign(Object.assign({},A),{idToken:et.idToken,refreshToken:et.refreshToken});switch(p.operationType){case"signIn":const Dt=yield Ar._fromIdTokenResponse(w,p.operationType,Rt);return yield w._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return U(p.user,w,"internal-error"),Ar._forOperation(p.user,p.operationType,Rt);default:Se(w,"internal-error")}});return function(Ve){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function di(_,h){return St(_,"POST","/v2/accounts/mfaEnrollment:start",dt(_,h))}class Xs{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Ce._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Xs(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Vs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var w=this;return(0,g.Z)(function*(){const A=h,N=yield w.getSession(),z=yield Wn(w.user,A._process(w.user.auth,N,p));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const w="string"==typeof h?h:h.uid,A=yield p.user.getIdToken();try{const N=yield Wn(p.user,function hu(_,h){return St(_,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(_,h))}(p.user.auth,{idToken:A,mfaEnrollmentId:w}));p.enrolledFactors=p.enrolledFactors.filter(({uid:z})=>z!==w),yield p.user._updateTokensIfNecessary(N),yield p.user.reload()}catch(N){throw N}})()}}const fu=new WeakMap,ma="__sak";class ya{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ma,"1"),this.storage.removeItem(ma),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Us=(()=>{class _ extends ya{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Uo(){const _=(0,P.z$)();return He(_)||ft(_)}()&&function Sn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),N=this.localCache[w];A!==N&&p(w,N,A)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ce,Ve,et)=>{this.notifyListeners(ce,et)});const A=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!w)return}const N=()=>{const ce=this.storage.getItem(A);!w&&this.localCache[A]===ce||this.notifyListeners(A,ce)},z=this.storage.getItem(A);!function Bn(){return(0,P.w1)()&&10===document.documentMode}()||z===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,w){this.localCache[p]=w;const A=this.listeners[p];if(A)for(const N of Array.from(A))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var A=()=>super._set,N=this;return(0,g.Z)(function*(){yield A().call(N,p,w),N.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,A=this;return(0,g.Z)(function*(){const N=yield w().call(A,p);return A.localCache[p]=JSON.stringify(N),N})()}_remove(p){var w=()=>super._remove,A=this;return(0,g.Z)(function*(){yield w().call(A,p),delete A.localCache[p]})()}}return _.type="LOCAL",_})(),Qr=(()=>{class _ extends ya{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return _.type="SESSION",_})();let Il=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(N=>N.isListeningto(p));if(w)return w;const A=new _(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const A=p,{eventId:N,eventType:z,data:ce}=A.data,Ve=w.handlersMap[z];if(!Ve?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const et=Array.from(Ve).map(function(){var Dt=(0,g.Z)(function*(vr){return vr(A.origin,ce)});return function(vr){return Dt.apply(this,arguments)}}()),Rt=yield function El(_){return Promise.all(_.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return h.apply(this,arguments)}}()))}(et);A.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:Rt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function sr(_="",h=10){let p="";for(let w=0;w<h;w++)p+=Math.floor(10*Math.random());return _+p}class gd{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,w=50){var A=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,ce;return new Promise((Ve,et)=>{const Rt=sr("",20);N.port1.start();const Dt=setTimeout(()=>{et(new Error("unsupported_event"))},w);ce={messageChannel:N,onMessage(vr){const Zi=vr;if(Zi.data.eventId===Rt)switch(Zi.data.status){case"ack":clearTimeout(Dt),z=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ve(Zi.data.response);break;default:clearTimeout(Dt),clearTimeout(z),et(new Error("invalid_response"))}}},A.handlers.add(ce),N.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:h,eventId:Rt,data:p},[N.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function yn(){return window}function to(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function Bo(){return(Bo=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const md="firebaseLocalStorageDb",ro="firebaseLocalStorage",yu="fbase_key";class cs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ni(_,h){return _.transaction([ro],h?"readwrite":"readonly").objectStore(ro)}function jo(){const _=indexedDB.open(md,1);return new Promise((h,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(ro,{keyPath:yu})}catch(A){p(A)}}),_.addEventListener("success",(0,g.Z)(function*(){const w=_.result;w.objectStoreNames.contains(ro)?h(w):(w.close(),yield function Af(){const _=indexedDB.deleteDatabase(md);return new cs(_).toPromise()}(),h(yield jo()))}))})}function bl(_,h,p){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(_,h,p){const w=Ni(_,!0).put({[yu]:h,value:p});return new cs(w).toPromise()})).apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(_,h){const p=Ni(_,!1).get(h),w=yield new cs(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ea(_,h){const p=Ni(_,!0).delete(h);return new cs(p).toPromise()}const Jr=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield jo()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const N=yield w._openDb();return yield p(N)}catch(N){if(A++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return to()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Il._getInstance(function va(){return to()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(A,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(A,N){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,A;if(p.activeServiceWorker=yield function gu(){return Bo.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new gd(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function mu(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield jo();return yield bl(p,ma,"1"),yield Ea(p,ma),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(N=>bl(N,p,w)),A.localCache[p]=w,A.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const A=yield w._withRetries(N=>function Dl(_,h){return wa.apply(this,arguments)}(N,p));return w.localCache[p]=A,A})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(A=>Ea(A,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(z=>{const ce=Ni(z,!1).getAll();return new cs(ce).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:z,value:ce}of w)N.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(ce)&&(p.notifyListeners(z,ce),A.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!N.has(z)&&(p.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(p,w){this.localCache[p]=w;const A=this.listeners[p];if(A)for(const N of Array.from(A))N(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ia(_,h){return St(_,"POST","/v2/accounts/mfaSignIn:start",dt(_,h))}function bi(){return(bi=(0,g.Z)(function*(_){return(yield St(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vu(_){return new Promise((h,p)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=h,w.onerror=A=>{const N=_e("internal-error");N.customData=A,p(N)},w.type="text/javascript",w.charset="UTF-8",function xf(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(w)})}function Zt(_){return`__${_}${Math.floor(1e6*Math.random())}`}const yd=1e12;class Ug{constructor(h){this.auth=h,this.counter=yd,this._widgets=new Map}render(h,p){const w=this.counter;return this._widgets.set(w,new Pw(h,this.auth.name,p||{})),this.counter++,w}reset(h){var p;const w=h||yd;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(h){var p;return(null===(p=this._widgets.get(h||yd))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(h||yd))||void 0===w||w.execute(),""})()}}class Pw{constructor(h,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;U(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bg(_){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ml=Zt("rcb"),io=new lt(3e4,6e4);class Ow{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=yn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return U(function mr(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(yn().grecaptcha):new Promise((w,A)=>{const N=yn().setTimeout(()=>{A(_e(h,"network-request-failed"))},io.get());yn()[Ml]=()=>{yn().clearTimeout(N),delete yn()[Ml];const ce=yn().grecaptcha;if(!ce)return void A(_e(h,"internal-error"));const Ve=ce.render;ce.render=(et,Rt)=>{const Dt=Ve(et,Rt);return this.counter++,Dt},this.hostLanguage=p,w(ce)},vu(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Ml,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),A(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=yn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xl{load(h){return(0,g.Z)(function*(){return new Ug(h)})()}clearedOneInstance(){}}const Di="recaptcha",jg={theme:"light",type:"image"};class $g{constructor(h,p=Object.assign({},jg),w){this.parameters=p,this.type=Di,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=An(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xl:new Ow,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(p)||new Promise(N=>{const z=ce=>{!ce||(h.tokenChangeListeners.delete(z),N(ce))};h.tokenChangeListeners.add(z),h.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof h)h(p);else if("string"==typeof h){const w=yn()[h];"function"==typeof w&&w(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){U(ve()&&!to(),h.auth,"internal-error"),yield function xr(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function _u(_){return bi.apply(this,arguments)}(h.auth);U(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ks._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function ba(){return(ba=(0,g.Z)(function*(_,h,p){const w=An(_),A=yield Nf(w,h,(0,P.m9)(p));return new hi(A,N=>Nn(w,N))})).apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_);yield jn(!1,w,"phone");const A=yield Nf(w.auth,h,(0,P.m9)(p));return new hi(A,N=>ha(w,N))})).apply(this,arguments)}function _d(){return(_d=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_),A=yield Nf(w.auth,h,(0,P.m9)(p));return new hi(A,N=>cl(w,N))})).apply(this,arguments)}function Nf(_,h,p){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,g.Z)(function*(_,h,p){var w;const A=yield p.verify();try{let N;if(U("string"==typeof A,_,"argument-error"),U(p.type===Di,_,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const z=N.session;if("phoneNumber"in N)return U("enroll"===z.type,_,"internal-error"),(yield di(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===z.type,_,"internal-error");const ce=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return U(ce,_,"missing-multi-factor-info"),(yield Ia(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Ag(_,{phoneNumber:N.phoneNumber,recaptchaToken:A});return z}}finally{p._reset()}})).apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(_,h){yield Ro((0,P.m9)(_),h)})).apply(this,arguments)}let $o=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=An(p)}verifyPhoneNumber(p,w){return Nf(this.auth,p,(0,P.m9)(w))}static credential(p,w){return ks._fromVerification(p,w)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:A}=p;return w&&A?ks._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Oi(_,h){return h?gt(h):(U(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Rl extends Tr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ir(h,this._buildIdpRequest())}_linkToIdToken(h,p){return ir(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return ir(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Nl(_){return Ri(_.auth,new Rl(_),_.bypassAuthState)}function vd(_){const{auth:h,user:p}=_;return U(p,h,"internal-error"),ca(p,new Rl(_),_.bypassAuthState)}function wd(_){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(_){const{auth:h,user:p}=_;return U(p,h,"internal-error"),Ro(p,new Rl(_),_.bypassAuthState)})).apply(this,arguments)}class Pl{constructor(h,p,w,A,N=!1){this.auth=h,this.resolver=w,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(w,A){h.pendingPromise={resolve:w,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:N,tenantId:z,error:ce,type:Ve}=h;if(ce)return void p.reject(ce);const et={auth:p.auth,requestUri:w,sessionId:A,tenantId:z||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(et))}catch(Rt){p.reject(Rt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Nl;case"linkViaPopup":case"linkViaRedirect":return wd;case"reauthViaPopup":case"reauthViaRedirect":return vd;default:Se(this.auth,"internal-error")}}resolve(h){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ol=new lt(2e3,1e4);function hn(){return(hn=(0,g.Z)(function*(_,h,p){const w=An(_);Ue(_,h,ss);const A=Oi(w,p);return new so(w,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_);Ue(w.auth,h,ss);const A=Oi(w.auth,p);return new so(w.auth,"reauthViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}function $n(){return($n=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_);Ue(w.auth,h,ss);const A=Oi(w.auth,p);return new so(w.auth,"linkViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}let so=(()=>{class _ extends Pl{constructor(p,w,A,N,z){super(p,w,N,z),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return U(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){Le(1===p.filter.length,"Popup operations only handle one event");const w=sr();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ol.get())};p()}}return _.currentPopupAction=null,_})();const fi=new Map;class oo extends Pl{constructor(h,p,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=fi.get(p.auth._key());if(!w){try{const N=(yield function Ed(_,h){return pi.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;w=()=>Promise.resolve(N)}catch(A){w=()=>Promise.reject(A)}fi.set(p.auth._key(),w)}return p.bypassAuthState||fi.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(w,h);if("unknown"!==h.type){if(h.eventId){const A=yield w.auth._redirectUserForId(h.eventId);if(A)return w.user=A,p().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function pi(){return(pi=(0,g.Z)(function*(_,h){const p=Fl(h),w=Nt(_);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(p));return yield w._remove(p),A})).apply(this,arguments)}function ao(_,h){return kl.apply(this,arguments)}function kl(){return(kl=(0,g.Z)(function*(_,h){return Nt(_)._set(Fl(h),"true")})).apply(this,arguments)}function js(_,h){fi.set(_._key(),h)}function Nt(_){return gt(_._redirectPersistence)}function Fl(_){return V("pendingRedirect",_.config.apiKey,_.name)}function x(){return(x=(0,g.Z)(function*(_,h,p){const w=An(_);Ue(_,h,ss),yield w._initializationPromise;const A=Oi(w,p);return yield ao(A,w),A._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function X(){return(X=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_);Ue(w.auth,h,ss),yield w.auth._initializationPromise;const A=Oi(w.auth,p);yield ao(A,w.auth);const N=yield or(w);return A._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(_,h,p){const w=(0,P.m9)(_);Ue(w.auth,h,ss),yield w.auth._initializationPromise;const A=Oi(w.auth,p);yield jn(!1,w,h.providerId),yield ao(A,w.auth);const N=yield or(w);return A._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Ut(){return(Ut=(0,g.Z)(function*(_,h){return yield An(_)._initializationPromise,Et(_,h,!1)})).apply(this,arguments)}function Et(_,h){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(_,h,p=!1){const w=An(_),A=Oi(w,h),z=yield new oo(w,A,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,h)),z})).apply(this,arguments)}function or(_){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(_){const h=sr(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Nr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(p=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Da(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pn(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var w;if(h.error&&!Pn(h)){const A=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const w=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gi(h))}saveEventToCache(h){this.cachedEventUids.add(gi(h)),this.lastProcessedEventTime=Date.now()}}function gi(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function Pn({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===h?.code}function kf(_){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(_,h={}){return St(_,"GET","/v1/projects",h)})).apply(this,arguments)}const Ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Id=/^https?/;function ar(){return(ar=(0,g.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield kf(_);for(const p of h)try{if(Vl(p))return}catch{}Se(_,"unauthorized-domain")})).apply(this,arguments)}function Vl(_){const h=fe(),{protocol:p,hostname:w}=new URL(h);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===w?"chrome-extension:"===p&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===w}if(!Id.test(p))return!1;if(Ll.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Gg=new lt(3e4,6e4);function Ff(){const _=yn().___jsl;if(_?.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let hs=null;function mi(_){return hs=hs||function Ho(_){return new Promise((h,p)=>{var w,A,N;function z(){Ff(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ff(),p(_e(_,"network-request-failed"))},timeout:Gg.get()})}if(null!==(A=null===(w=yn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(N=yn().gapi)||void 0===N||!N.load){const ce=Zt("iframefcb");return yn()[ce]=()=>{gapi.load?z():p(_e(_,"network-request-failed"))},vu(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Ve=>p(Ve))}z()}}).catch(h=>{throw hs=null,h})}(_),hs}const Go=new lt(5e3,15e3),zg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lf(_){const h=_.config;U(h.authDomain,_,"auth-domain-config-required");const p=h.emulator?Bt(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:_.name,v:te.SDK_VERSION},A=b_.get(_.config.apiHost);A&&(w.eid=A);const N=_._getFrameworks();return N.length&&(w.fw=N.join(",")),`${p}?${(0,P.xO)(w).slice(1)}`}function bd(){return bd=(0,g.Z)(function*(_){const h=yield mi(_),p=yn().gapi;return U(p,_,"internal-error"),h.open({where:document.body,url:Lf(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zg,dontclear:!0},w=>new Promise(function(){var A=(0,g.Z)(function*(N,z){yield w.restyle({setHideOnLeave:!1});const ce=_e(_,"network-request-failed"),Ve=yn().setTimeout(()=>{z(ce)},Go.get());function et(){yn().clearTimeout(Ve),N(w)}w.ping(et).then(et,()=>{z(ce)})});return function(N,z){return A.apply(this,arguments)}}()))}),bd.apply(this,arguments)}const Xt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wg(_,h,p,w,A,N){U(_.config.authDomain,_,"auth-domain-config-required"),U(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:w,v:te.SDK_VERSION,eventId:A};if(h instanceof ss){h.setDefaultLanguage(_.languageCode),z.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,et]of Object.entries(N||{}))z[Ve]=et}if(h instanceof os){const Ve=h.getScopes().filter(et=>""!==et);Ve.length>0&&(z.scopes=Ve.join(","))}_.tenantId&&(z.tid=_.tenantId);const ce=z;for(const Ve of Object.keys(ce))void 0===ce[Ve]&&delete ce[Ve];return`${function jr({config:_}){return _.emulator?Bt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,P.xO)(ce).slice(1)}`}const Hs="webStorageSupport";class Ad extends class D_{constructor(h){this.factorId=h}_process(h,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,w);case"signin":return this._finalizeSignIn(h,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ad(h)}_finalizeEnroll(h,p,w){return function Sf(_,h){return St(_,"POST","/v2/accounts/mfaEnrollment:finalize",dt(_,h))}(h,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Xr(_,h){return St(_,"POST","/v2/accounts/mfaSignIn:finalize",dt(_,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Kg=(()=>{class _{constructor(){}static assertion(p){return Ad._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Ul="@firebase/auth";class uo{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(w=>{h(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zo(){return window}function Rd(){return(Rd=(0,g.Z)(function*(_,h,p){var w;const{BuildInfo:A}=zo();Le(h.sessionId,"AuthEvent did not contain a session ID");const N=yield Hl(h.sessionId),z={};return ft()?z.ibi=A.packageName:rn()?z.apn=A.packageName:Se(_,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=N,Wg(_,p,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function Bl(){return(Bl=(0,g.Z)(function*(_){const{BuildInfo:h}=zo(),p={};ft()?p.iosBundleId=h.packageName:rn()?p.androidPackageName=h.packageName:Se(_,"operation-not-supported-in-this-environment"),yield kf(_,p)})).apply(this,arguments)}function $l(){return($l=(0,g.Z)(function*(_,h,p){const{cordova:w}=zo();let A=()=>{};try{yield new Promise((N,z)=>{let ce=null;function Ve(){var Dt;N();const vr=null===(Dt=w.plugins.browsertab)||void 0===Dt?void 0:Dt.close;"function"==typeof vr&&vr(),"function"==typeof p?.close&&p.close()}function et(){ce||(ce=window.setTimeout(()=>{z(_e(_,"redirect-cancelled-by-user"))},2e3))}function Rt(){"visible"===document?.visibilityState&&et()}h.addPassiveListener(Ve),document.addEventListener("resume",et,!1),rn()&&document.addEventListener("visibilitychange",Rt,!1),A=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",Rt,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Hl(_){return jf.apply(this,arguments)}function jf(){return(jf=(0,g.Z)(function*(_){const h=S_(_),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function S_(_){if(Le(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),p=new Uint8Array(h);for(let w=0;w<_.length;w++)p[w]=_.charCodeAt(w);return p}(0,P.Pz)("authIdTokenMaxAge"),function lo(_){(0,te._registerComponent)(new oe.wA("auth",(h,{options:p})=>{const w=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:N,authDomain:z}=w.options;return((ce,Ve)=>{U(N&&!N.includes(":"),"invalid-api-key",{appName:ce.name}),U(!z?.includes(":"),"argument-error",{appName:ce.name});const et={apiKey:N,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ms(_)},Rt=new zt(ce,Ve,et);return function re(_,h){const p=h?.persistence||[],w=(Array.isArray(p)?p:[p]).map(gt);h?.errorMap&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(w,h?.popupRedirectResolver)}(Rt,p),Rt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,w)=>{h.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new oe.wA("auth-internal",h=>{const p=An(h.getProvider("auth").getImmediate());return new uo(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(Ul,"0.22.0",function Tt(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,te.registerVersion)(Ul,"0.22.0","esm2017")}("Browser");class $f extends Nr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Ta(_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,g.Z)(function*(_){const h=yield zl()._get(co(_));return h&&(yield zl()._remove(co(_))),h})).apply(this,arguments)}function kd(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*h.length);_.push(h.charAt(w))}return _.join("")}function zl(){return gt(Us)}function co(_){return V("authEvent",_.config.apiKey,_.name)}function Fd(_){if(!_?.includes("?"))return{};const[h,...p]=_.split("?");return(0,P.zd)(p.join("?"))}function qo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function gs(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function Wo(_=(0,P.z$)()){return!("file:"!==gs()&&"ionic:"!==gs()&&"capacitor:"!==gs()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function ql(){try{const _=self.localStorage,h=sr();if(_)return _.setItem(h,"1"),_.removeItem(h),!function Vd(_=(0,P.z$)()){return function im(){return(0,P.w1)()&&11===document?.documentMode}()||function zf(_=(0,P.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,P.hl)()}catch{return Wl()&&(0,P.hl)()}return!1}function Wl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ud(){return(function rm(){return"http:"===gs()||"https:"===gs()}()||(0,P.ru)()||Wo())&&!function Gf(){return(0,P.b$)()||(0,P.UG)()}()&&ql()&&!Wl()}function Bd(){return Wo()&&typeof document<"u"}function ki(){return(ki=(0,g.Z)(function*(){return!!Bd()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const Hn={LOCAL:"local",NONE:"none",SESSION:"session"},ms=U,$d="persistence";function Kl(_){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,g.Z)(function*(_){yield _._initializationPromise;const h=sm(),p=V($d,_.config.apiKey,_.name);h&&h.setItem(p,_._getPersistence())})).apply(this,arguments)}function sm(){var _;try{return(null===(_=function jd(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const om=U;class Ko{constructor(){this.browserResolver=gt(class Sd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qr,this._completeRedirectFn=Et,this._overrideRedirectResult=js}_openPopup(h,p,w,A){var N=this;return(0,g.Z)(function*(){var z;Le(null===(z=N.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ce=Wg(h,p,w,fe(),A);return function fs(_,h,p,w=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Ve=Object.assign(Object.assign({},Xt),{width:w.toString(),height:A.toString(),top:N,left:z}),et=(0,P.z$)().toLowerCase();p&&(ce=xt(et)?"_blank":p),J(et)&&(h=h||"http://localhost",Ve.scrollbars="yes");const Rt=Object.entries(Ve).reduce((vr,[Zi,Zo])=>`${vr}${Zi}=${Zo},`,"");if(function Sr(_=(0,P.z$)()){var h;return ft(_)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(et)&&"_self"!==ce)return function Vf(_,h){const p=document.createElement("a");p.href=_,p.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(h||"",ce),new Cd(null);const Dt=window.open(h||"",ce,Rt);U(Dt,_,"popup-blocked");try{Dt.focus()}catch{}return new Cd(Dt)}(h,ce,sr())})()}_openRedirect(h,p,w,A){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function pu(_){yn().location.href=_}(Wg(h,p,w,fe(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:N}=this.eventManagers[p];return A?Promise.resolve(A):(Le(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const w=yield function kw(_){return bd.apply(this,arguments)}(h),A=new Nr(h);return w.register("authEvent",N=>(U(N?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=w,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Hs,{type:Hs},A=>{var N;const z=null===(N=A?.[0])||void 0===N?void 0:N[Hs];void 0!==z&&p(!!z),Se(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ds(_){return ar.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return zs()||He()||ft()}}),this.cordovaResolver=gt(class A_{constructor(){this._redirectPersistence=Qr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Et,this._overrideRedirectResult=js}_initialize(h){var p=this;return(0,g.Z)(function*(){const w=h._key();let A=p.eventManagers.get(w);return A||(A=new $f(h),p.eventManagers.set(w,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){Se(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,w,A){var N=this;return(0,g.Z)(function*(){!function Xg(_){var h,p,w,A,N,z,ce,Ve,et,Rt;const Dt=zo();U("function"==typeof(null===(h=Dt?.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(p=Dt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(N=null===(A=null===(w=Dt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ve=null===(ce=null===(z=Dt?.cordova)||void 0===z?void 0:z.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Ve?void 0:Ve.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Rt=null===(et=Dt?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===Rt?void 0:Rt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield N._initialize(h);yield z.initialized(),z.resetRedirect(),function Vn(){fi.clear()}(),yield N._originValidation(h);const ce=function em(_,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:kd(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(h,w,A);yield function Lw(_,h){return zl()._set(co(_),h)}(h,ce);const Ve=yield function Su(_,h,p){return Rd.apply(this,arguments)}(h,ce,p),et=yield function jl(_){const{cordova:h}=zo();return new Promise(p=>{h.plugins.browsertab.isAvailable(w=>{let A=null;w?h.plugins.browsertab.openUrl(_):A=h.InAppBrowser.open(_,function Rn(_=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(A)})})}(Ve);return function Pd(_,h,p){return $l.apply(this,arguments)}(h,z,et)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Nd(_){return Bl.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:w,handleOpenURL:A,BuildInfo:N}=zo(),z=setTimeout((0,g.Z)(function*(){yield Ta(h),p.onEvent(qo())}),500),ce=function(){var Rt=(0,g.Z)(function*(Dt){clearTimeout(z);const vr=yield Ta(h);let Zi=null;vr&&Dt?.url&&(Zi=function Od(_,h){var p,w;const A=function Vw(_){const h=Fd(_),p=h.link?decodeURIComponent(h.link):void 0,w=Fd(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Fd(A).link||A||w||p||_}(h);if(A.includes("/__/auth/callback")){const N=Fd(A),z=N.firebaseError?function Hf(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ce=null===(w=null===(p=z?.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Ve=ce?_e(ce):null;return Ve?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(vr,Dt.url)),p.onEvent(Zi||qo())});return function(vr){return Rt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Ve=A,et=`${N.packageName.toLowerCase()}://`;zo().handleOpenURL=function(){var Rt=(0,g.Z)(function*(Dt){if(Dt.toLowerCase().startsWith(et)&&ce({url:Dt}),"function"==typeof Ve)try{Ve(Dt)}catch(vr){console.error(vr)}});return function(Dt){return Rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qr,this._completeRedirectFn=Et,this._overrideRedirectResult=js}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,w,A){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,w,A)})()}_openRedirect(h,p,w,A){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,w,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Bd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return om(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function qf(){return ki.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function am(_){return _.unwrap()}function Kf(_){return Ql(_)}function Ql(_){const{_tokenResponse:h}=_ instanceof P.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return $o.credentialFromResult(_);const p=h.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=tu;break;case"facebook.com":w=ua;break;case"github.com":w=ll;break;case"twitter.com":w=ci;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:ce,nonce:Ve}=h;return N||z||A||ce?ce?p.startsWith("saml.")?la._create(p,ce):is._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:A,accessToken:N}):new Ks(p).credential({idToken:A,accessToken:N,rawNonce:Ve}):null}return _ instanceof P.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function ur(_,h){return h.catch(p=>{throw p instanceof P.ZR&&function Hd(_,h){var p;const w=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new lm(_,function fd(_,h){var p;const w=(0,P.m9)(_),A=h;return U(h.customData.operationType,w,"argument-error"),U(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),Mn._fromError(w,A)}(_,h));else if(w){const A=Ql(h),N=h;A&&(N.credential=A,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(_,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:Kf(p),additionalUserInfo:kg(p),user:$r.getOrCreate(A)}})}function Gd(_,h){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(_,h){const p=yield h;return{verificationId:p.verificationId,confirm:w=>ur(_,p.confirm(w))}})).apply(this,arguments)}class lm{constructor(h,p){this.resolver=p,this.auth=function um(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ur(am(this.auth),this.resolver.resolveSignIn(h))}}class $r{constructor(h){this._delegate=h,this.multiFactor=function eo(_){const h=(0,P.m9)(_);return fu.has(h)||fu.set(h,Xs._fromUser(h)),fu.get(h)}(h)}static getOrCreate(h){return $r.USER_MAP.has(h)||$r.USER_MAP.set(h,new $r(h)),$r.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return ur(p.auth,ha(p._delegate,h))})()}linkWithPhoneNumber(h,p){var w=this;return(0,g.Z)(function*(){return Gd(w.auth,function wu(_,h,p){return Eu.apply(this,arguments)}(w._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return ur(p.auth,function ei(_,h,p){return $n.apply(this,arguments)}(p._delegate,h,Ko))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Kl(An(p.auth)),function Ne(_,h,p){return function Ze(_,h,p){return ot.apply(this,arguments)}(_,h,p)}(p._delegate,h,Ko)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return ur(p.auth,cl(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Gd(this.auth,function Hg(_,h,p){return _d.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ur(this.auth,function Bs(_,h,p){return ct.apply(this,arguments)}(this._delegate,h,Ko))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Kl(An(p.auth)),function F(_,h,p){return function K(_,h,p){return X.apply(this,arguments)}(_,h,p)}(p._delegate,h,Ko)})()}sendEmailVerification(h){return function Qs(_,h){return lu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Ur(_,h){return ru.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Fo(_,h){return ud((0,P.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function Df(_,h){return ud((0,P.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Of(_,h){return Br.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function bf(_,h){return cu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function ad(_,h,p){return Ls.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$r.USER_MAP=new WeakMap;const Ki=U;let Zf=(()=>{class _{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Ki(A,"invalid-api-key",{appName:p.name}),Ki(A,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?Ko:void 0;this._delegate=w.initialize({options:{persistence:qd(A,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$r.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function Qa(_,h,p){const w=An(_);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const A=!!p?.disableWarnings,N=zi(h),{host:z,port:ce}=function Kn(_){const h=zi(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const N=A[1];return{host:N,port:xs(w.substr(N.length+1))}}{const[N,z]=w.split(":");return{host:N,port:xs(z)}}}(h);w.config.emulator={url:`${N}//${z}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:ce,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Rs(){function _(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,w)}applyActionCode(p){return function au(_,h){return ko.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ef(this._delegate,p)}confirmPasswordReset(p,w){return function fa(_,h,p){return Zr.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var A=this;return(0,g.Z)(function*(){return ur(A._delegate,function Yr(_,h,p){return Wi.apply(this,arguments)}(A._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ml(_,h){return Fs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Ng(_,h){return"EMAIL_SIGNIN"===eu.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ki(Ud(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function bt(_,h){return Ut.apply(this,arguments)}(p._delegate,Ko);return w?ur(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Aa(_,h){An(_)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,w,A){const{next:N,error:z,complete:ce}=zd(p,w,A);return this._delegate.onAuthStateChanged(N,z,ce)}onIdTokenChanged(p,w,A){const{next:N,error:z,complete:ce}=zd(p,w,A);return this._delegate.onIdTokenChanged(N,z,ce)}sendSignInLinkToEmail(p,w){return function pa(_,h,p){return Ii.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function Yn(_,h,p){return Oo.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,g.Z)(function*(){let A;switch(function Wf(_,h){ms(Object.values(Hn).includes(h),_,"invalid-persistence-type"),(0,P.b$)()?ms(h!==Hn.SESSION,_,"unsupported-persistence-type"):(0,P.UG)()?ms(h===Hn.NONE,_,"unsupported-persistence-type"):Wl()?ms(h===Hn.NONE||h===Hn.LOCAL&&(0,P.hl)(),_,"unsupported-persistence-type"):ms(h===Hn.NONE||ql(),_,"unsupported-persistence-type")}(w._delegate,p),p){case Hn.SESSION:A=Qr;break;case Hn.LOCAL:A=(yield gt(Jr)._isAvailable())?Jr:Us;break;case Hn.NONE:A=B;break;default:return Se("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ur(this._delegate,function vf(_){return Ln.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ur(this._delegate,Nn(this._delegate,p))}signInWithCustomToken(p){return ur(this._delegate,function hl(_,h){return ou.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return ur(this._delegate,function If(_,h,p){return Nn((0,P.m9)(_),qi.credential(h,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return ur(this._delegate,function pl(_,h,p){return od.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return Gd(this._delegate,function Rf(_,h,p){return ba.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,g.Z)(function*(){return Ki(Ud(),w._delegate,"operation-not-supported-in-this-environment"),ur(w._delegate,function E_(_,h,p){return hn.apply(this,arguments)}(w._delegate,p,Ko))})()}signInWithRedirect(p){var w=this;return(0,g.Z)(function*(){return Ki(Ud(),w._delegate,"operation-not-supported-in-this-environment"),yield Kl(w._delegate),function D(_,h,p){return function C(_,h,p){return x.apply(this,arguments)}(_,h,p)}(w._delegate,p,Ko)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function __(_,h){return uu.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Hn,_})();function zd(_,h,p){let w=_;"function"!=typeof _&&({next:w,error:h,complete:p}=_);const A=w;return{next:z=>A(z&&$r.getOrCreate(z)),error:h,complete:p}}function qd(_,h){const p=function Yl(_,h){const p=sm();if(!p)return[];const w=V($d,_,h);switch(p.getItem(w)){case Hn.NONE:return[B];case Hn.LOCAL:return[Jr,Qr];case Hn.SESSION:return[Qr];default:return[]}}(_,h);if(typeof self<"u"&&!p.includes(Jr)&&p.push(Jr),typeof window<"u")for(const w of[Us,Qr])p.includes(w)||p.push(w);return p.includes(B)||p.push(B),p}class ys{constructor(){this.providerId="phone",this._delegate=new $o(am(Q.Z.auth()))}static credential(h,p){return $o.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}ys.PHONE_SIGN_IN_METHOD=$o.PHONE_SIGN_IN_METHOD,ys.PROVIDER_ID=$o.PROVIDER_ID;const Yf=U;class cm{constructor(h,p,w=Q.Z.app()){var A;Yf(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new $g(h,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qf(_){_.INTERNAL.registerComponent(new oe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Zf(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:qi,FacebookAuthProvider:ua,GithubAuthProvider:ll,GoogleAuthProvider:tu,OAuthProvider:Ks,SAMLAuthProvider:wi,PhoneAuthProvider:ys,PhoneMultiFactorGenerator:Kg,RecaptchaVerifier:cm,TwitterAuthProvider:ci,Auth:Zf,AuthCredential:Tr,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.3.7")}(Q.Z)},8766:(_t,Ae,k)=>{k.d(Ae,{Lj:()=>Se,X3:()=>pt});var g=k(5861);let P,te;const oe=new WeakMap,he=new WeakMap,de=new WeakMap,j=new WeakMap,$=new WeakMap;let Me={get(U,pe,Le){if(U instanceof IDBTransaction){if("done"===pe)return he.get(U);if("objectStoreNames"===pe)return U.objectStoreNames||de.get(U);if("store"===pe)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return le(U[pe])},set:(U,pe,Le)=>(U[pe]=Le,!0),has:(U,pe)=>U instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in U};function ye(U){return"function"==typeof U?function tt(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...pe){return U.apply(Xe(this),pe),le(oe.get(this))}:function(...pe){return le(U.apply(Xe(this),pe))}:function(pe,...Le){const Je=U.call(Xe(this),pe,...Le);return de.set(Je,pe.sort?pe.sort():[pe]),le(Je)}}(U):(U instanceof IDBTransaction&&function je(U){if(he.has(U))return;const pe=new Promise((Le,Je)=>{const gt=()=>{U.removeEventListener("complete",Ke),U.removeEventListener("error",re),U.removeEventListener("abort",re)},Ke=()=>{Le(),gt()},re=()=>{Je(U.error||new DOMException("AbortError","AbortError")),gt()};U.addEventListener("complete",Ke),U.addEventListener("error",re),U.addEventListener("abort",re)});he.set(U,pe)}(U),((U,pe)=>pe.some(Le=>U instanceof Le))(U,function ee(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function le(U){if(U instanceof IDBRequest)return function W(U){const pe=new Promise((Le,Je)=>{const gt=()=>{U.removeEventListener("success",Ke),U.removeEventListener("error",re)},Ke=()=>{Le(le(U.result)),gt()},re=()=>{Je(U.error),gt()};U.addEventListener("success",Ke),U.addEventListener("error",re)});return pe.then(Le=>{Le instanceof IDBCursor&&oe.set(Le,U)}).catch(()=>{}),$.set(pe,U),pe}(U);if(j.has(U))return j.get(U);const pe=ye(U);return pe!==U&&(j.set(U,pe),$.set(pe,U)),pe}const Xe=U=>$.get(U);function pt(U,pe,{blocked:Le,upgrade:Je,blocking:gt,terminated:Ke}={}){const re=indexedDB.open(U,pe),fe=le(re);return Je&&re.addEventListener("upgradeneeded",ve=>{Je(le(re.result),ve.oldVersion,ve.newVersion,le(re.transaction))}),Le&&re.addEventListener("blocked",()=>Le()),fe.then(ve=>{Ke&&ve.addEventListener("close",()=>Ke()),gt&&ve.addEventListener("versionchange",()=>gt())}).catch(()=>{}),fe}function Se(U,{blocked:pe}={}){const Le=indexedDB.deleteDatabase(U);return pe&&Le.addEventListener("blocked",()=>pe()),le(Le).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ue=new Map;function Be(U,pe){if(!(U instanceof IDBDatabase)||pe in U||"string"!=typeof pe)return;if(Ue.get(pe))return Ue.get(pe);const Le=pe.replace(/FromIndex$/,""),Je=pe!==Le,gt=Ee.includes(Le);if(!(Le in(Je?IDBIndex:IDBObjectStore).prototype)||!gt&&!_e.includes(Le))return;const Ke=function(){var re=(0,g.Z)(function*(fe,...ve){const Re=this.transaction(fe,gt?"readwrite":"readonly");let Pe=Re.store;return Je&&(Pe=Pe.index(ve.shift())),(yield Promise.all([Pe[Le](...ve),gt&&Re.done]))[0]});return function(ve){return re.apply(this,arguments)}}();return Ue.set(pe,Ke),Ke}!function we(U){Me=U(Me)}(U=>({...U,get:(pe,Le,Je)=>Be(pe,Le)||U.get(pe,Le,Je),has:(pe,Le)=>!!Be(pe,Le)||U.has(pe,Le)}))},5861:(_t,Ae,k)=>{function g(P,te,ee,ue,oe,he,de){try{var j=P[he](de),$=j.value}catch(W){return void ee(W)}j.done?te($):Promise.resolve($).then(ue,oe)}function Q(P){return function(){var te=this,ee=arguments;return new Promise(function(ue,oe){var he=P.apply(te,ee);function de($){g(he,ue,oe,de,j,"next",$)}function j($){g(he,ue,oe,de,j,"throw",$)}de(void 0)})}}k.d(Ae,{Z:()=>Q})}},_t=>{_t(_t.s=4009)}]);